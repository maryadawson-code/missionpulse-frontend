<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>MissionPulse - Win/Loss Analysis</title><script src="https://unpkg.com/react@18/umd/react.production.min.js"></script><script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script><script src="https://unpkg.com/@babel/standalone/babel.min.js"></script><script src="https://cdn.tailwindcss.com"></script><link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet"><style>* { margin: 0; padding: 0; box-sizing: border-box; } body { font-family: 'Space Grotesk', sans-serif; background: #00050F; min-height: 100vh; } .font-mono { font-family: 'JetBrains Mono', monospace; } @keyframes fadeInUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } } .animate-fade-up { animation: fadeInUp 0.5s ease-out forwards; } .glass-card { background: linear-gradient(135deg, rgba(15, 23, 42, 0.9) 0%, rgba(15, 23, 42, 0.7) 100%); backdrop-filter: blur(10px); border: 1px solid rgba(0, 229, 250, 0.2); }</style></head><body><div id="root"></div><script src="supabase-client.js"></script><script type="text/babel">
const { useState, useEffect } = React;
const ROLES_ALLOWED = ['CEO','COO','CAP','PM','SA','FIN','Admin'];
const DEMO = [
  { id: 'WL-001', opportunity: 'DHA Genesis EHR Phase II', result: 'win', value: '$24.5M', date: '2024-08-15', agency: 'DHA', competitor: 'Leidos', factors: { technical: 92, management: 88, pastPerf: 95, price: 78 }, keyLessons: ['FHIR-native architecture was decisive differentiator', 'Past performance narratives with quantified outcomes scored highest', 'Price was competitive despite not being lowest'], evalFeedback: 'Outstanding technical approach. Strong understanding of MHS GENESIS ecosystem. Realistic staffing plan.' },
  { id: 'WL-002', opportunity: 'VA Claims Modernization', result: 'loss', value: '$18.2M', date: '2024-06-22', agency: 'VA', competitor: 'Booz Allen (Winner)', factors: { technical: 78, management: 82, pastPerf: 75, price: 85 }, keyLessons: ['Lacked VA-specific past performance', 'Technical approach too generic ‚Äî needed VA OCTO alignment', 'Price was strong but couldn\'t overcome technical gap'], evalFeedback: 'Adequate technical approach but lacked specificity to VA Claims environment. Limited relevant past performance.' },
  { id: 'WL-003', opportunity: 'CMS Quality Reporting', result: 'win', value: '$31.8M', date: '2024-11-01', agency: 'CMS', competitor: 'ICF', factors: { technical: 88, management: 90, pastPerf: 85, price: 82 }, keyLessons: ['Data analytics portfolio was key differentiator', 'Strong PM with CMS experience sealed management score', 'Competitive pricing with value justification narrative'], evalFeedback: 'Excellent data-driven approach. Demonstrated deep understanding of CMS quality measures.' },
  { id: 'WL-004', opportunity: 'DoD JADC2 Data Mesh', result: 'loss', value: '$52.3M', date: '2024-09-18', agency: 'DoD', competitor: 'SAIC (Winner)', factors: { technical: 71, management: 74, pastPerf: 68, price: 90 }, keyLessons: ['Scope too large for current team size', 'Needed stronger DoD clearance depth', 'Technical approach was innovative but lacked DoD-specific references'], evalFeedback: 'Innovative approach but concerns about organizational capacity and cleared workforce availability.' },
];

const App = () => {
  const [analyses, setAnalyses] = useState(DEMO);
  const [filter, setFilter] = useState('all');
  const [expandedId, setExpandedId] = useState(null);
  const [connected, setConnected] = useState(false);
  useEffect(() => {
    const role = localStorage.getItem('missionpulse_role');
    if (role && !ROLES_ALLOWED.includes(role)) { window.location.href = 'index.html'; return; }
    const load = async () => { try { if (typeof sbClient !== 'undefined') { const { data } = await sbClient.from('win_loss_analysis').select('*'); if (data?.length) { setAnalyses(data); setConnected(true); } } } catch(e){} }; load();
  }, []);
  const filtered = analyses.filter(a => filter === 'all' || a.result === filter);
  const wins = analyses.filter(a => a.result === 'win').length;
  const losses = analyses.filter(a => a.result === 'loss').length;
  const winRate = wins + losses > 0 ? Math.round(wins / (wins + losses) * 100) : 0;
  const avgScores = { technical: Math.round(analyses.reduce((s,a) => s + a.factors.technical, 0) / analyses.length), management: Math.round(analyses.reduce((s,a) => s + a.factors.management, 0) / analyses.length), pastPerf: Math.round(analyses.reduce((s,a) => s + a.factors.pastPerf, 0) / analyses.length), price: Math.round(analyses.reduce((s,a) => s + a.factors.price, 0) / analyses.length) };

  const ScoreBar = ({ score, label }) => {
    const color = score >= 85 ? '#10B981' : score >= 70 ? '#F59E0B' : '#EF4444';
    return React.createElement('div', { className: 'flex items-center gap-2 mb-1' },
      React.createElement('span', { className: 'text-xs text-gray-400 w-24' }, label),
      React.createElement('div', { className: 'flex-1 h-2 bg-gray-800 rounded-full' }, React.createElement('div', { className: 'h-full rounded-full', style: { width: `${score}%`, backgroundColor: color } })),
      React.createElement('span', { className: 'font-mono text-xs w-8', style: { color } }, score)
    );
  };

  return React.createElement('div', { className: 'min-h-screen p-6', style: { background: '#00050F' } },
    React.createElement('div', { className: 'flex items-center justify-between mb-6' },
      React.createElement('div', null, React.createElement('h1', { className: 'text-2xl font-bold text-white' }, 'üìä Win/Loss Analysis'), React.createElement('p', { className: 'text-gray-400 text-sm mt-1' }, 'Performance patterns ‚Ä¢ Evaluator feedback ‚Ä¢ Improvement tracking')),
      React.createElement('div', { className: 'flex items-center gap-3' },
        React.createElement('div', { className: 'flex items-center gap-2 px-3 py-1.5 rounded-lg text-xs', style: { background: connected ? 'rgba(16,185,129,0.15)' : 'rgba(245,158,11,0.15)', color: connected ? '#10B981' : '#F59E0B', border: `1px solid ${connected ? 'rgba(16,185,129,0.3)' : 'rgba(245,158,11,0.3)'}` } }, React.createElement('span', { className: `w-2 h-2 rounded-full ${connected ? 'bg-green-500' : 'bg-yellow-500'}` }), connected ? 'Connected' : 'Demo Mode'),
        React.createElement('a', { href: 'index.html', className: 'px-3 py-1.5 rounded-lg text-xs text-gray-400 hover:text-white', style: { border: '1px solid rgba(255,255,255,0.1)' } }, '‚Üê Dashboard')
      )
    ),
    React.createElement('div', { className: 'grid grid-cols-4 gap-4 mb-6' },
      [{ label: 'Win Rate', value: `${winRate}%`, color: winRate >= 50 ? '#10B981' : '#EF4444' }, { label: 'Wins', value: wins, color: '#10B981' }, { label: 'Losses', value: losses, color: '#EF4444' }, { label: 'Avg Technical', value: avgScores.technical, color: avgScores.technical >= 80 ? '#10B981' : '#F59E0B' }].map((s,i) =>
        React.createElement('div', { key: i, className: 'glass-card rounded-lg p-4 text-center animate-fade-up', style: { animationDelay: `${i*0.1}s` } },
          React.createElement('div', { className: 'font-mono text-2xl font-bold', style: { color: s.color } }, s.value),
          React.createElement('div', { className: 'text-xs text-gray-400 mt-1' }, s.label))
      )
    ),
    React.createElement('div', { className: 'flex gap-2 mb-6' }, ['all','win','loss'].map(f => React.createElement('button', { key: f, className: `px-3 py-2 rounded-lg text-xs font-medium ${filter===f?'text-white':'text-gray-400'}`, style: { background: filter===f?'rgba(0,229,250,0.15)':'transparent', border: `1px solid ${filter===f?'rgba(0,229,250,0.4)':'rgba(255,255,255,0.1)'}` }, onClick: () => setFilter(f) }, f==='all'?'All':f==='win'?'üèÜ Wins':'‚úó Losses'))),
    React.createElement('div', { className: 'space-y-3 mb-8' },
      filtered.map((a,i) => React.createElement('div', { key: a.id, className: 'glass-card rounded-lg overflow-hidden animate-fade-up', style: { animationDelay: `${i*0.05}s` } },
        React.createElement('div', { className: 'p-4 cursor-pointer hover:bg-white/5', onClick: () => setExpandedId(expandedId===a.id?null:a.id) },
          React.createElement('div', { className: 'flex items-center justify-between' },
            React.createElement('div', { className: 'flex items-center gap-3' },
              React.createElement('span', { className: 'px-2 py-1 rounded text-sm font-bold', style: { background: a.result==='win'?'rgba(16,185,129,0.15)':'rgba(239,68,68,0.15)', color: a.result==='win'?'#10B981':'#EF4444' } }, a.result==='win'?'üèÜ WIN':'‚úó LOSS'),
              React.createElement('div', null, React.createElement('h3', { className: 'text-white font-semibold' }, a.opportunity), React.createElement('div', { className: 'text-xs text-gray-400' }, `${a.agency} ‚Ä¢ ${a.value} ‚Ä¢ vs ${a.competitor} ‚Ä¢ ${a.date}`))
            ),
            React.createElement('span', { className: 'text-gray-500 text-lg' }, expandedId===a.id?'‚ñæ':'‚ñ∏')
          )
        ),
        expandedId===a.id && React.createElement('div', { className: 'border-t border-gray-800 p-4 space-y-4' },
          React.createElement('div', null, React.createElement('h4', { className: 'text-cyan-400 text-xs font-semibold uppercase mb-2' }, 'Evaluation Scores'), Object.entries(a.factors).map(([k,v]) => React.createElement(ScoreBar, { key: k, label: k==='pastPerf'?'Past Performance':k.charAt(0).toUpperCase()+k.slice(1), score: v }))),
          React.createElement('div', null, React.createElement('h4', { className: 'text-purple-400 text-xs font-semibold uppercase mb-2' }, 'Evaluator Feedback'), React.createElement('p', { className: 'text-sm text-gray-300 bg-gray-900/50 rounded p-3 italic' }, `"${a.evalFeedback}"`)),
          React.createElement('div', null, React.createElement('h4', { className: 'text-yellow-400 text-xs font-semibold uppercase mb-2' }, 'Key Lessons'), a.keyLessons.map((l,li) => React.createElement('div', { key: li, className: 'flex items-start gap-2 text-sm text-gray-300 mb-1' }, React.createElement('span', { className: 'text-yellow-400 mt-0.5' }, '‚Üí'), l))),
          React.createElement('div', { className: 'flex gap-2' },
            React.createElement('button', { className: 'px-3 py-1.5 rounded text-xs font-medium', style: { background: 'rgba(0,229,250,0.15)', color: '#00E5FA', border: '1px solid rgba(0,229,250,0.3)' } }, 'ü§ñ AI: Pattern Analysis'),
            React.createElement('button', { className: 'px-3 py-1.5 rounded text-xs font-medium', style: { background: 'rgba(99,102,241,0.15)', color: '#818CF8', border: '1px solid rgba(99,102,241,0.3)' } }, 'üìã Export to Lessons Learned')
          )
        )
      ))
    ),
    React.createElement('div', { className: 'text-center py-4 border-t border-gray-800' }, React.createElement('p', { className: 'text-xs text-gray-600' }, '‚ö†Ô∏è AI GENERATED - REQUIRES HUMAN REVIEW ‚Ä¢ MissionPulse by Mission Meets Tech ‚Ä¢ NIST 800-171 Compliant'))
  );
};
ReactDOM.render(React.createElement(App), document.getElementById('root'));
</script></body></html>
