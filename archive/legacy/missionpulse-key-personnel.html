<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MissionPulse — Key Personnel</title>
  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <style>*{margin:0;padding:0;box-sizing:border-box}body{font-family:'Inter',sans-serif;background:#00050F;min-height:100vh;color:#e2e8f0}::-webkit-scrollbar{width:6px}::-webkit-scrollbar-track{background:transparent}::-webkit-scrollbar-thumb{background:rgba(0,229,250,0.2);border-radius:3px}</style>
  <script src="rbac-guard.js"></script>
</head>
<body>
  <div id="missionpulse-sidebar"></div>
  <div class="main-content"><div id="root"></div></div>
  <script src="missionpulse-nav.js"></script>
  <script type="text/babel">
    const{useState,useEffect}=React;
    const SB_URL='https://qdrtpnpnhkxvfmvfziop.supabase.co';const SB_KEY='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFkcnRwbnBuaGt4dmZtdmZ6aW9wIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mzc5MjMxNDMsImV4cCI6MjA1MzQ5OTE0M30.GFbjgRMgVhMMcnNaJMrLVnJI_u6yBGJOhO-LHKE8sZQ';
    var sbClient;try{sbClient=supabase.createClient(SB_URL,SB_KEY)}catch(e){sbClient=null}
    const ROLES_ALLOWED=['CEO','COO','CAP','PM'];

    const DEMO_KP=[
      {id:1,name:'Mary Womack',title:'Program Manager',lcat:'PM',clearance:'Secret',clearanceStatus:'Active',clearanceExpiry:'2028-06-15',availability:'Committed',availDate:'Award + 1 day',partner:'MMT',education:"MBA, George Washington University; BS Computer Science, Virginia Tech",yearsExp:18,
        certs:['PMP','ITIL v4 Foundation','SAFe 6.0 SPC','Security+'],
        relevance:{score:95,factors:['Program Management','DHA/MHS','Federal Health IT','Agile/EVM','SDVOSB Leadership']},
        summary:'Veteran program manager with 18 years leading federal healthcare IT programs. Former DHA contractor with deep MHS GENESIS expertise. Led $18.4M DHA modernization contract (Exceptional CPARS). SDVOSB CEO with proven track record delivering complex multi-MTF programs on time and under budget. Expert in Shipley methodology and color team reviews.',
        keyProjects:['DHA Health IT Modernization ($18.4M) — PM','VA Cloud Migration ($12.8M) — Capture Lead','CMS Data Analytics ($8.2M) — PM'],
        rfpMapping:'L.5.1 Management Approach; L.5.2 Staffing; L.5.4 Transition',
        pwsRef:'C.2.1',substitute:'Tom Patterson (DPM) — meets all minimum qualifications',
        resumeStatus:'Current',resumeDate:'2026-02-01',letterOfCommitment:true},
      {id:2,name:'Tom Patterson',title:'Deputy Program Manager',lcat:'DPM',clearance:'Secret',clearanceStatus:'Active',clearanceExpiry:'2029-01-20',availability:'Committed',availDate:'Award + 1 day',partner:'MMT',education:"MS Project Management, George Mason University; BA Management, University of Maryland",yearsExp:14,
        certs:['PMP','CSM','CMMI Associate','ITIL v4'],
        relevance:{score:88,factors:['Capture Management','Risk Management','Transition Planning','DoD Programs']},
        summary:'Experienced deputy PM with 14 years in federal IT program delivery. Specializes in transition planning and risk management for DHA and DoD health programs. Led 3 successful contract transitions with zero service disruptions. Strong EVM and schedule management skills.',
        keyProjects:['DHA Health IT Modernization — DPM','Army Medical Command IT Support — PM','DHA MHS GENESIS Support — Transition Lead'],
        rfpMapping:'L.5.1 Management Approach; L.5.3 Risk Management; L.5.4 Transition',
        pwsRef:'C.2.2',substitute:'Kevin Brown (HD Lead) — with additional PM oversight from Mary Womack',
        resumeStatus:'Current',resumeDate:'2026-01-20',letterOfCommitment:true},
      {id:3,name:'Sarah Kim',title:'Solutions Architect',lcat:'SA',clearance:'Top Secret',clearanceStatus:'Active',clearanceExpiry:'2030-03-10',availability:'Committed',availDate:'Award + 5 days',partner:'MMT',education:"MS Computer Science, MIT; BS Electrical Engineering, Georgia Tech",yearsExp:16,
        certs:['AWS Solutions Architect Professional','Azure Solutions Architect Expert','CISSP','TOGAF 9.2'],
        relevance:{score:92,factors:['Cloud Architecture','Azure Government','DevSecOps','FedRAMP','MHS GENESIS']},
        summary:'Distinguished solutions architect with 16 years designing cloud-native systems for federal health agencies. Holds both AWS and Azure professional certifications. Architected the Azure Government IL5 migration for DHA ($18.4M program). Expert in microservices, container orchestration, and FedRAMP inheritance strategies.',
        keyProjects:['DHA Health IT — Solutions Architect (Azure Gov IL5)','VA Cloud Migration — Cloud Architect','NIH Data Platform — Technical Lead'],
        rfpMapping:'L.4.1 Technical Approach; L.4.2 DevSecOps; L.4.4 Data Migration',
        pwsRef:'C.3.1',substitute:'James Rodriguez (AI/ML Lead) — for interim coverage; external hire within 30 days',
        resumeStatus:'Current',resumeDate:'2026-02-10',letterOfCommitment:true},
      {id:4,name:'James Rodriguez',title:'AI/ML Lead',lcat:'AI-Lead',clearance:'Secret',clearanceStatus:'Active',clearanceExpiry:'2028-09-05',availability:'Committed',availDate:'Award + 10 days',partner:'MMT',education:"MS Machine Learning, Stanford University; BS Mathematics, UC Berkeley",yearsExp:10,
        certs:['AWS Machine Learning Specialty','Google Cloud ML Engineer','TensorFlow Developer Certificate'],
        relevance:{score:90,factors:['AI/ML Engineering','NLP','Responsible AI','Federal Healthcare','AskSage']},
        summary:'AI/ML specialist with 10 years building production ML systems for federal clients. Stanford ML graduate with expertise in NLP, predictive analytics, and responsible AI governance. Key architect of the AskSage integration strategy. Built fraud detection models processing 2M+ daily Medicare claims at CMS (94% accuracy).',
        keyProjects:['CMS Data Analytics — ML Lead (94% fraud detection)','VA Claims Processing AI — AI Architect','DoD AI/ML Platform — NLP Engineer (sub to TPA)'],
        rfpMapping:'L.4.5 AI/ML Integration',
        pwsRef:'C.3.5',substitute:'External hire from pre-qualified bench within 30 days',
        resumeStatus:'Current',resumeDate:'2026-01-28',letterOfCommitment:true},
      {id:5,name:'Angela Foster',title:'Cybersecurity Lead',lcat:'Cyber',clearance:'Top Secret/SCI',clearanceStatus:'Active',clearanceExpiry:'2031-07-22',availability:'Committed',availDate:'Award + 3 days',partner:'MMT',education:"MS Cybersecurity, Johns Hopkins University; BS Information Systems, James Madison University",yearsExp:12,
        certs:['CISSP','CISM','CEH','CompTIA Security+','CompTIA CySA+'],
        relevance:{score:93,factors:['RMF/ATO','NIST 800-171','CMMC','FedRAMP','Penetration Testing']},
        summary:'Senior cybersecurity professional with 12 years protecting DoD and federal health systems. Led ATO efforts for 8 federal systems including DHA and NSA programs. Expert in RMF, continuous monitoring, and FedRAMP inheritance. Achieved ATO in 72 days for VA program (45% faster than estimate). Holds TS/SCI clearance.',
        keyProjects:['DHA Health IT — Cybersecurity Lead (Zero incidents, 3 years)','VA Cloud Migration — ATO Lead (72-day ATO)','NSA IT Support — Security Architect'],
        rfpMapping:'L.4.3 Security & ATO Approach',
        pwsRef:'C.4.1',substitute:'Robert Jackson (ISSO) — interim with external CISSP hire within 30 days',
        resumeStatus:'Current',resumeDate:'2026-02-05',letterOfCommitment:true},
    ];

    const ConnectionDot=({c})=>(<div style={{display:'flex',alignItems:'center',gap:'6px',fontSize:'11px',color:c?'#00ff88':'#f59e0b'}}><div style={{width:'8px',height:'8px',borderRadius:'50%',background:c?'#00ff88':'#f59e0b',boxShadow:`0 0 6px ${c?'#00ff88':'#f59e0b'}`}}/>{c?'LIVE':'DEMO'}</div>);

    const App=()=>{
      const[connected,setConnected]=useState(false);
      const[selected,setSelected]=useState(null);

      useEffect(()=>{if(!sbClient)return;(async()=>{try{const{data,error}=await sbClient.from('team_assignments').select('id');if(!error&&data&&data.length>0)setConnected(true)}catch{}})()},[]);

      const avgRelevance=Math.round(DEMO_KP.reduce((s,k)=>s+k.relevance.score,0)/DEMO_KP.length);

      return(
        <div style={{padding:'24px 32px',maxWidth:'1400px'}}>
          <div style={{display:'flex',justifyContent:'space-between',alignItems:'flex-start',marginBottom:'24px'}}>
            <div>
              <div style={{fontSize:'10px',fontWeight:700,color:'rgba(0,229,250,0.5)',letterSpacing:'2px',textTransform:'uppercase',marginBottom:'4px'}}>PROPOSAL STAFFING</div>
              <h1 style={{fontSize:'26px',fontWeight:800,color:'white',letterSpacing:'-0.5px',margin:0}}>Key Personnel</h1>
              <div style={{fontSize:'12px',color:'#5a7a9a',marginTop:'4px'}}>Resume summaries • Relevance mapping • Clearance tracker • Availability</div>
            </div>
            <ConnectionDot c={connected}/>
          </div>

          <div style={{display:'flex',gap:'10px',flexWrap:'wrap',marginBottom:'20px'}}>
            {[
              {label:'Key Personnel',value:DEMO_KP.length,color:'#f59e0b'},
              {label:'Avg Relevance',value:`${avgRelevance}%`,color:'#00ff88'},
              {label:'All Committed',value:'✓',color:'#00ff88'},
              {label:'Clearances Active',value:`${DEMO_KP.filter(k=>k.clearanceStatus==='Active').length}/${DEMO_KP.length}`,color:'#00ff88'},
              {label:'Resumes Current',value:`${DEMO_KP.filter(k=>k.resumeStatus==='Current').length}/${DEMO_KP.length}`,color:'#00ff88'},
              {label:'LOCs Signed',value:`${DEMO_KP.filter(k=>k.letterOfCommitment).length}/${DEMO_KP.length}`,color:'#00ff88'},
            ].map(s=>(
              <div key={s.label} style={{background:'rgba(10,22,40,0.7)',border:'1px solid rgba(0,229,250,0.08)',borderRadius:'10px',padding:'10px 16px',minWidth:'125px'}}>
                <div style={{fontSize:'9px',fontWeight:700,color:'#5a7a9a',letterSpacing:'0.5px',textTransform:'uppercase'}}>{s.label}</div>
                <div style={{fontSize:'22px',fontWeight:800,color:s.color,letterSpacing:'-0.5px'}}>{s.value}</div>
              </div>
            ))}
          </div>

          {!selected?(
            <div style={{display:'flex',flexDirection:'column',gap:'8px'}}>
              {DEMO_KP.map(kp=>(
                <div key={kp.id} onClick={()=>setSelected(kp.id)} style={{background:'rgba(10,22,40,0.5)',border:'1px solid rgba(0,229,250,0.08)',borderRadius:'12px',padding:'16px',cursor:'pointer',transition:'all 0.15s'}} onMouseOver={e=>e.currentTarget.style.borderColor='rgba(0,229,250,0.25)'} onMouseOut={e=>e.currentTarget.style.borderColor='rgba(0,229,250,0.08)'}>
                  <div style={{display:'flex',justifyContent:'space-between',alignItems:'flex-start'}}>
                    <div style={{flex:1}}>
                      <div style={{display:'flex',alignItems:'center',gap:'8px',marginBottom:'4px'}}>
                        <span style={{fontSize:'16px',fontWeight:800,color:'white'}}>{kp.name}</span>
                        <span style={{fontSize:'11px',fontWeight:600,color:'#00E5FA'}}>{kp.title}</span>
                        <span style={{fontSize:'9px',fontWeight:700,padding:'2px 6px',borderRadius:'3px',background:'rgba(245,158,11,0.12)',color:'#f59e0b'}}>⭐ KEY PERSONNEL</span>
                      </div>
                      <div style={{display:'flex',gap:'10px',fontSize:'11px',color:'#5a7a9a',marginBottom:'6px'}}>
                        <span>LCAT: <span style={{color:'#00E5FA',fontWeight:600}}>{kp.lcat}</span></span>
                        <span>{kp.yearsExp} yrs</span>
                        <span>Clearance: <span style={{color:kp.clearance.includes('Top Secret')?'#ef4444':'#00E5FA',fontWeight:600}}>{kp.clearance}</span></span>
                        <span style={{color:'#00ff88',fontWeight:600}}>● {kp.availability}</span>
                      </div>
                      <div style={{display:'flex',gap:'3px',flexWrap:'wrap'}}>
                        {kp.certs.slice(0,4).map(c=><span key={c} style={{fontSize:'9px',padding:'1px 5px',borderRadius:'3px',background:'rgba(167,139,250,0.08)',color:'#a78bfa'}}>{c}</span>)}
                        {kp.relevance.factors.slice(0,3).map(f=><span key={f} style={{fontSize:'9px',padding:'1px 5px',borderRadius:'3px',background:'rgba(0,229,250,0.06)',color:'#67e8f9'}}>{f}</span>)}
                      </div>
                    </div>
                    <div style={{textAlign:'right',flexShrink:0}}>
                      <div style={{fontSize:'9px',fontWeight:700,color:'#5a7a9a'}}>RELEVANCE</div>
                      <div style={{fontSize:'22px',fontWeight:800,color:kp.relevance.score>=90?'#00ff88':'#00E5FA'}}>{kp.relevance.score}%</div>
                    </div>
                  </div>
                </div>
              ))}
            </div>
          ):(()=>{
            const kp=DEMO_KP.find(k=>k.id===selected);if(!kp)return null;
            return(
              <div>
                <button onClick={()=>setSelected(null)} style={{marginBottom:'12px',padding:'5px 12px',fontSize:'11px',fontWeight:600,borderRadius:'6px',border:'none',cursor:'pointer',background:'rgba(10,22,40,0.5)',color:'#00E5FA'}}>← Back</button>
                <div style={{background:'rgba(10,22,40,0.5)',border:'1px solid rgba(0,229,250,0.08)',borderRadius:'12px',padding:'20px'}}>
                  <div style={{display:'flex',justifyContent:'space-between',alignItems:'flex-start',marginBottom:'16px'}}>
                    <div>
                      <div style={{fontSize:'22px',fontWeight:800,color:'white'}}>{kp.name} <span style={{fontSize:'12px',color:'#f59e0b'}}>⭐ KEY PERSONNEL</span></div>
                      <div style={{fontSize:'14px',color:'#00E5FA',fontWeight:600,marginTop:'2px'}}>{kp.title} ({kp.lcat})</div>
                    </div>
                    <div style={{textAlign:'right'}}>
                      <div style={{fontSize:'9px',fontWeight:700,color:'#5a7a9a'}}>RELEVANCE</div>
                      <div style={{fontSize:'28px',fontWeight:800,color:'#00ff88'}}>{kp.relevance.score}%</div>
                    </div>
                  </div>

                  {/* Status Grid */}
                  <div style={{display:'grid',gridTemplateColumns:'repeat(auto-fill,minmax(150px,1fr))',gap:'8px',marginBottom:'16px'}}>
                    {[
                      {l:'Clearance',v:kp.clearance,c:kp.clearance.includes('Top Secret')?'#ef4444':'#00E5FA'},
                      {l:'Status',v:kp.clearanceStatus,c:'#00ff88'},
                      {l:'Expiry',v:kp.clearanceExpiry,c:'#94a3b8'},
                      {l:'Availability',v:kp.availability,c:'#00ff88'},
                      {l:'Available Date',v:kp.availDate,c:'#00E5FA'},
                      {l:'Partner',v:kp.partner,c:'#a78bfa'},
                      {l:'Experience',v:`${kp.yearsExp} years`,c:'#e2e8f0'},
                      {l:'Resume',v:kp.resumeStatus,c:'#00ff88'},
                      {l:'LOC',v:kp.letterOfCommitment?'Signed':'Pending',c:kp.letterOfCommitment?'#00ff88':'#f59e0b'},
                    ].map(r=>(
                      <div key={r.l} style={{background:'rgba(0,0,0,0.2)',borderRadius:'6px',padding:'8px 10px'}}>
                        <div style={{fontSize:'9px',fontWeight:700,color:'#5a7a9a',letterSpacing:'0.5px'}}>{r.l}</div>
                        <div style={{fontSize:'12px',fontWeight:600,color:r.c}}>{r.v}</div>
                      </div>
                    ))}
                  </div>

                  {/* Education */}
                  <div style={{marginBottom:'12px'}}>
                    <div style={{fontSize:'9px',fontWeight:700,color:'#5a7a9a',letterSpacing:'0.5px',marginBottom:'4px'}}>EDUCATION</div>
                    <div style={{fontSize:'12px',color:'#94a3b8'}}>{kp.education}</div>
                  </div>

                  {/* Certs */}
                  <div style={{marginBottom:'12px'}}>
                    <div style={{fontSize:'9px',fontWeight:700,color:'#5a7a9a',letterSpacing:'0.5px',marginBottom:'4px'}}>CERTIFICATIONS</div>
                    <div style={{display:'flex',gap:'4px',flexWrap:'wrap'}}>
                      {kp.certs.map(c=><span key={c} style={{fontSize:'10px',padding:'2px 7px',borderRadius:'4px',background:'rgba(167,139,250,0.08)',color:'#a78bfa'}}>{c}</span>)}
                    </div>
                  </div>

                  {/* Summary */}
                  <div style={{background:'rgba(0,229,250,0.03)',borderRadius:'8px',padding:'14px 16px',borderLeft:'3px solid #00E5FA',marginBottom:'14px'}}>
                    <div style={{fontSize:'9px',fontWeight:700,color:'#00E5FA',letterSpacing:'0.5px',marginBottom:'4px'}}>RESUME SUMMARY</div>
                    <div style={{fontSize:'12px',color:'#e2e8f0',lineHeight:'1.7'}}>{kp.summary}</div>
                  </div>

                  {/* Key Projects */}
                  <div style={{marginBottom:'14px'}}>
                    <div style={{fontSize:'9px',fontWeight:700,color:'#00ff88',letterSpacing:'0.5px',marginBottom:'4px'}}>KEY PROJECTS</div>
                    {kp.keyProjects.map(p=><div key={p} style={{fontSize:'11px',color:'#86efac',padding:'2px 0'}}>▸ {p}</div>)}
                  </div>

                  {/* Relevance */}
                  <div style={{marginBottom:'14px'}}>
                    <div style={{fontSize:'9px',fontWeight:700,color:'#5a7a9a',letterSpacing:'0.5px',marginBottom:'4px'}}>RELEVANCE FACTORS</div>
                    <div style={{display:'flex',gap:'4px',flexWrap:'wrap'}}>
                      {kp.relevance.factors.map(f=><span key={f} style={{fontSize:'10px',padding:'2px 7px',borderRadius:'4px',background:'rgba(0,229,250,0.06)',color:'#67e8f9'}}>{f}</span>)}
                    </div>
                  </div>

                  <div style={{display:'grid',gridTemplateColumns:'1fr 1fr',gap:'12px'}}>
                    <div style={{background:'rgba(0,0,0,0.2)',borderRadius:'6px',padding:'10px 12px'}}>
                      <div style={{fontSize:'9px',fontWeight:700,color:'#5a7a9a',letterSpacing:'0.5px',marginBottom:'4px'}}>RFP MAPPING</div>
                      <div style={{fontSize:'11px',color:'#94a3b8'}}>{kp.rfpMapping}</div>
                      <div style={{fontSize:'10px',color:'#00E5FA',marginTop:'4px'}}>PWS: {kp.pwsRef}</div>
                    </div>
                    <div style={{background:'rgba(245,158,11,0.03)',borderRadius:'6px',padding:'10px 12px',border:'1px solid rgba(245,158,11,0.1)'}}>
                      <div style={{fontSize:'9px',fontWeight:700,color:'#f59e0b',letterSpacing:'0.5px',marginBottom:'4px'}}>SUBSTITUTION PLAN</div>
                      <div style={{fontSize:'11px',color:'#fbbf24'}}>{kp.substitute}</div>
                    </div>
                  </div>
                </div>
              </div>
            );
          })()}

          <div style={{textAlign:'center',padding:'20px 0',marginTop:'28px',borderTop:'1px solid rgba(0,229,250,0.06)',fontSize:'10px',color:'rgba(148,163,184,0.4)',lineHeight:'1.8'}}>⚠️ AI GENERATED — REQUIRES HUMAN REVIEW<br/>MissionPulse v12.0 — Mission Meets Tech | CMMC 2.0 L2 Compliant</div>
        </div>
      );
    };
    ReactDOM.createRoot(document.getElementById('root')).render(<App/>);
  </script>
</body>
</html>
