<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MissionPulse - Meeting Notes</title>
  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
  <style>* { margin: 0; padding: 0; box-sizing: border-box; } body { font-family: 'Space Grotesk', sans-serif; background: #00050F; min-height: 100vh; } .font-mono { font-family: 'JetBrains Mono', monospace; } @keyframes fadeInUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } } .animate-fade-up { animation: fadeInUp 0.5s ease-out forwards; } .glass-card { background: linear-gradient(135deg, rgba(15, 23, 42, 0.9) 0%, rgba(15, 23, 42, 0.7) 100%); backdrop-filter: blur(10px); border: 1px solid rgba(0, 229, 250, 0.2); }</style>
</head>
<body>
  <div id="root"></div>
  <script src="supabase-client.js"></script>
  <script type="text/babel">
    const { useState, useEffect } = React;
    const ROLES_ALLOWED = ['CEO','COO','CAP','PM','SA','FIN','CON','DEL','QA','Partner','Admin'];

    const DEMO_MEETINGS = [
      { id: 'MTG-001', title: 'DHA EHR - Pink Team Review', date: '2025-02-14', time: '10:00 AM', type: 'Color Team', opportunity: 'DHA EHR Modernization', attendees: ['Mary Womack', 'Marcus Johnson', 'Sarah Chen', 'Emily Rodriguez'], actionItems: [{ task: 'Revise Section L.3 technical approach', owner: 'Sarah Chen', due: '2025-02-18', status: 'open' }, { task: 'Update pricing model with revised rates', owner: 'Mary Womack', due: '2025-02-16', status: 'done' }, { task: 'Add FHIR interop diagram to graphics', owner: 'David Park', due: '2025-02-20', status: 'open' }], decisions: ['Go with phased migration approach', 'Include AskSage as named tool in tech volume'], notes: 'Strong technical approach. Need to tighten management section. Pricing looks competitive. Graphics need work ‚Äî evaluator-friendly diagrams required.' },
      { id: 'MTG-002', title: 'VA Claims - Capture Strategy', date: '2025-02-12', time: '2:00 PM', type: 'Capture', opportunity: 'VA Claims Processing', attendees: ['Mary Womack', 'Marcus Johnson'], actionItems: [{ task: 'Schedule customer meeting with VA OCTO', owner: 'Marcus Johnson', due: '2025-02-20', status: 'open' }, { task: 'Draft teaming agreement with AI partner', owner: 'Mary Womack', due: '2025-02-25', status: 'open' }], decisions: ['Pursue as prime, seek AI/ML sub'], notes: 'Strong fit for MMT capabilities. VA OCTO relationship is key. Need to differentiate on automation speed.' },
      { id: 'MTG-003', title: 'Weekly Proposal Status', date: '2025-02-10', time: '9:00 AM', type: 'Status', opportunity: 'All', attendees: ['Mary Womack', 'Sarah Chen', 'Jessica Williams', 'Robert Taylor'], actionItems: [{ task: 'Complete DHA past performance narrative', owner: 'Jessica Williams', due: '2025-02-14', status: 'done' }], decisions: ['Defer IHS pursuit to Q3', 'Accelerate CMS proposal schedule by 1 week'], notes: 'Pipeline healthy. DHA on track. VA in early capture. CMS needs acceleration ‚Äî RFP expected 2 weeks early.' },
      { id: 'MTG-004', title: 'CMS Data Analytics - Red Team', date: '2025-02-07', time: '1:00 PM', type: 'Color Team', opportunity: 'CMS Data Analytics', attendees: ['Mary Womack', 'Marcus Johnson', 'Sarah Chen', 'Amanda Foster', 'External: John Davis (Reviewer)'], actionItems: [{ task: 'Rewrite executive summary with evaluator lens', owner: 'Amanda Foster', due: '2025-02-12', status: 'done' }, { task: 'Add quantified benefits table', owner: 'Sarah Chen', due: '2025-02-11', status: 'done' }], decisions: ['Proposal ready for Gold Team', 'No major rewrites needed'], notes: 'External reviewer impressed. Executive summary needs sharpening. Cost volume is strong. Compliance matrix complete.' },
    ];

    const TypeBadge = ({ type }) => {
      const config = { 'Color Team': { bg: 'rgba(239,68,68,0.15)', color: '#EF4444' }, 'Capture': { bg: 'rgba(0,229,250,0.15)', color: '#00E5FA' }, 'Status': { bg: 'rgba(99,102,241,0.15)', color: '#818CF8' }, 'Teaming': { bg: 'rgba(16,185,129,0.15)', color: '#10B981' } };
      const c = config[type] || config.Status;
      return React.createElement('span', { className: 'px-2 py-0.5 rounded text-xs font-medium', style: { background: c.bg, color: c.color } }, type);
    };

    const App = () => {
      const [meetings, setMeetings] = useState(DEMO_MEETINGS);
      const [expandedId, setExpandedId] = useState('MTG-001');
      const [filter, setFilter] = useState('all');
      const [connected, setConnected] = useState(false);

      useEffect(() => {
        const role = localStorage.getItem('missionpulse_role');
        if (role && !ROLES_ALLOWED.includes(role)) { window.location.href = 'index.html'; return; }
        const load = async () => { try { if (typeof sbClient !== 'undefined') { const { data } = await sbClient.from('meeting_notes').select('*'); if (data?.length) { setMeetings(data); setConnected(true); } } } catch (e) {} };
        load();
      }, []);

      const filtered = meetings.filter(m => filter === 'all' || m.type === filter);
      const openActions = meetings.reduce((s, m) => s + m.actionItems.filter(a => a.status === 'open').length, 0);

      return React.createElement('div', { className: 'min-h-screen p-6', style: { background: '#00050F' } },
        React.createElement('div', { className: 'flex items-center justify-between mb-6' },
          React.createElement('div', null,
            React.createElement('h1', { className: 'text-2xl font-bold text-white' }, 'üìù Meeting Notes'),
            React.createElement('p', { className: 'text-gray-400 text-sm mt-1' }, 'Capture meetings ‚Ä¢ Color teams ‚Ä¢ Action items ‚Ä¢ Decisions')
          ),
          React.createElement('div', { className: 'flex items-center gap-3' },
            React.createElement('div', { className: 'flex items-center gap-2 px-3 py-1.5 rounded-lg text-xs', style: { background: connected ? 'rgba(16,185,129,0.15)' : 'rgba(245,158,11,0.15)', color: connected ? '#10B981' : '#F59E0B', border: `1px solid ${connected ? 'rgba(16,185,129,0.3)' : 'rgba(245,158,11,0.3)'}` } },
              React.createElement('span', { className: `w-2 h-2 rounded-full ${connected ? 'bg-green-500' : 'bg-yellow-500'}` }), connected ? 'Connected' : 'Demo Mode'
            ),
            React.createElement('a', { href: 'index.html', className: 'px-3 py-1.5 rounded-lg text-xs text-gray-400 hover:text-white', style: { border: '1px solid rgba(255,255,255,0.1)' } }, '‚Üê Dashboard')
          )
        ),

        React.createElement('div', { className: 'grid grid-cols-3 gap-4 mb-6' },
          [
            { label: 'Total Meetings', value: meetings.length, color: '#00E5FA' },
            { label: 'Open Action Items', value: openActions, color: openActions > 3 ? '#F59E0B' : '#10B981' },
            { label: 'Key Decisions', value: meetings.reduce((s, m) => s + m.decisions.length, 0), color: '#818CF8' }
          ].map((s, i) =>
            React.createElement('div', { key: i, className: 'glass-card rounded-lg p-4 text-center animate-fade-up', style: { animationDelay: `${i*0.1}s` } },
              React.createElement('div', { className: 'font-mono text-2xl font-bold', style: { color: s.color } }, s.value),
              React.createElement('div', { className: 'text-xs text-gray-400 mt-1' }, s.label)
            )
          )
        ),

        React.createElement('div', { className: 'flex gap-2 mb-6' },
          ['all', 'Color Team', 'Capture', 'Status', 'Teaming'].map(f =>
            React.createElement('button', { key: f, className: `px-3 py-2 rounded-lg text-xs font-medium ${filter === f ? 'text-white' : 'text-gray-400'}`, style: { background: filter === f ? 'rgba(0,229,250,0.15)' : 'transparent', border: `1px solid ${filter === f ? 'rgba(0,229,250,0.4)' : 'rgba(255,255,255,0.1)'}` }, onClick: () => setFilter(f) },
              f === 'all' ? 'All' : f
            )
          )
        ),

        React.createElement('div', { className: 'space-y-3 mb-8' },
          filtered.map((m, i) =>
            React.createElement('div', { key: m.id, className: 'glass-card rounded-lg overflow-hidden animate-fade-up', style: { animationDelay: `${i*0.05}s` } },
              React.createElement('div', { className: 'p-4 cursor-pointer hover:bg-white/5', onClick: () => setExpandedId(expandedId === m.id ? null : m.id) },
                React.createElement('div', { className: 'flex items-center justify-between' },
                  React.createElement('div', { className: 'flex items-center gap-3' },
                    React.createElement(TypeBadge, { type: m.type }),
                    React.createElement('h3', { className: 'text-white font-semibold' }, m.title),
                    m.actionItems.filter(a => a.status === 'open').length > 0 && React.createElement('span', { className: 'px-1.5 py-0.5 rounded-full text-xs font-mono', style: { background: 'rgba(245,158,11,0.15)', color: '#F59E0B' } }, `${m.actionItems.filter(a => a.status === 'open').length} open`)
                  ),
                  React.createElement('div', { className: 'flex items-center gap-3 text-xs text-gray-400' },
                    React.createElement('span', { className: 'font-mono' }, `${m.date} ${m.time}`),
                    React.createElement('span', null, `${m.attendees.length} attendees`),
                    React.createElement('span', { className: 'text-gray-500 text-lg' }, expandedId === m.id ? '‚ñæ' : '‚ñ∏')
                  )
                )
              ),
              expandedId === m.id && React.createElement('div', { className: 'border-t border-gray-800 p-4 space-y-4' },
                React.createElement('div', null,
                  React.createElement('h4', { className: 'text-cyan-400 text-xs font-semibold uppercase mb-2' }, 'Notes'),
                  React.createElement('p', { className: 'text-gray-300 text-sm' }, m.notes)
                ),
                React.createElement('div', null,
                  React.createElement('h4', { className: 'text-green-400 text-xs font-semibold uppercase mb-2' }, `Decisions (${m.decisions.length})`),
                  m.decisions.map((d, di) => React.createElement('div', { key: di, className: 'flex items-center gap-2 text-sm text-gray-300 mb-1' }, React.createElement('span', { className: 'text-green-400' }, '‚úì'), d))
                ),
                React.createElement('div', null,
                  React.createElement('h4', { className: 'text-yellow-400 text-xs font-semibold uppercase mb-2' }, `Action Items (${m.actionItems.length})`),
                  m.actionItems.map((a, ai) =>
                    React.createElement('div', { key: ai, className: 'flex items-center justify-between bg-gray-900/50 rounded-lg px-3 py-2 mb-1' },
                      React.createElement('div', { className: 'flex items-center gap-2' },
                        React.createElement('span', { className: `w-4 h-4 rounded flex items-center justify-center text-xs ${a.status === 'done' ? 'bg-green-500/20 text-green-400' : 'bg-gray-700 text-gray-400'}` }, a.status === 'done' ? '‚úì' : '‚óã'),
                        React.createElement('span', { className: `text-sm ${a.status === 'done' ? 'text-gray-500 line-through' : 'text-white'}` }, a.task)
                      ),
                      React.createElement('div', { className: 'flex items-center gap-3 text-xs' },
                        React.createElement('span', { className: 'text-cyan-400' }, a.owner),
                        React.createElement('span', { className: 'font-mono text-gray-500' }, `Due: ${a.due}`)
                      )
                    )
                  )
                ),
                React.createElement('div', { className: 'text-xs text-gray-500' }, `Attendees: ${m.attendees.join(', ')}`)
              )
            )
          )
        ),

        React.createElement('div', { className: 'text-center py-4 border-t border-gray-800' },
          React.createElement('p', { className: 'text-xs text-gray-600' }, '‚ö†Ô∏è AI GENERATED - REQUIRES HUMAN REVIEW ‚Ä¢ MissionPulse by Mission Meets Tech ‚Ä¢ NIST 800-171 Compliant')
        )
      );
    };

    ReactDOM.render(React.createElement(App), document.getElementById('root'));
  </script>
</body>
</html>
