<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MissionPulse - Executive Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'mp-navy': '#00050F',
                        'mp-cyan': '#00E5FA',
                        'mp-slate': '#0A1628'
                    },
                    fontFamily: {
                        'inter': ['Inter', 'sans-serif']
                    }
                }
            }
        }
    </script>
    <style>
        * { font-family: 'Inter', sans-serif; }
        @keyframes pulse-ring {
            0% { transform: scale(0.95); opacity: 1; }
            100% { transform: scale(1.1); opacity: 0; }
        }
        .pulse-ring::before {
            content: '';
            position: absolute;
            inset: -4px;
            border-radius: 50%;
            border: 2px solid currentColor;
            animation: pulse-ring 1.5s ease-out infinite;
        }
    </style>
  <script src="rbac-guard.js"></script>
</head>
<body class="bg-mp-navy min-h-screen text-white">
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useMemo } = React;

        // Executive metrics data
        const executiveData = {
            portfolio: {
                totalValue: 847000000,
                activeOpportunities: 12,
                avgPWin: 62,
                pipelineHealth: 78
            },
            financial: {
                ytdRevenue: 45200000,
                ytdTarget: 52000000,
                backlog: 125000000,
                burnRate: 3200000
            },
            performance: {
                winRate: 42,
                winRateTrend: 5,
                avgDaysToWin: 145,
                proposalsSubmitted: 18,
                proposalsWon: 8,
                proposalsLost: 6,
                proposalsPending: 4
            },
            pipeline: [
                { stage: 'Identified', count: 15, value: 245000000 },
                { stage: 'Qualified', count: 8, value: 180000000 },
                { stage: 'Capture', count: 6, value: 165000000 },
                { stage: 'Proposal', count: 4, value: 127000000 },
                { stage: 'Submitted', count: 3, value: 89000000 },
                { stage: 'Won', count: 2, value: 41000000 }
            ],
            recentActivity: [
                { type: 'win', title: 'VA Cloud Migration - Task Order 3', value: 18500000, date: '2024-02-22' },
                { type: 'submission', title: 'DHA EHR Modernization', value: 45000000, date: '2024-02-20' },
                { type: 'decision', title: 'Go/No-Go: CMS Analytics Platform', outcome: 'GO', date: '2024-02-18' },
                { type: 'milestone', title: 'Gold Team Review Complete', opportunity: 'VA Cloud Migration', date: '2024-02-15' },
                { type: 'loss', title: 'DoD Cyber Assessment', value: 12000000, date: '2024-02-10' }
            ],
            upcomingDeadlines: [
                { title: 'DHA EHR Modernization Due', date: '2024-03-15', daysLeft: 18, priority: 'critical' },
                { title: 'VA Cloud Migration Due', date: '2024-04-01', daysLeft: 35, priority: 'high' },
                { title: 'CMS Data Analytics Due', date: '2024-02-28', daysLeft: 3, priority: 'critical' }
            ],
            teamMetrics: {
                totalStaff: 45,
                proposalTeam: 12,
                utilization: 87,
                avgWorkload: 2.3
            },
            quarterlyTrend: [
                { quarter: 'Q1 2023', wins: 3, value: 28, winRate: 35 },
                { quarter: 'Q2 2023', wins: 4, value: 42, winRate: 38 },
                { quarter: 'Q3 2023', wins: 5, value: 55, winRate: 41 },
                { quarter: 'Q4 2023', wins: 6, value: 68, winRate: 44 },
                { quarter: 'Q1 2024', wins: 8, value: 85, winRate: 48 }
            ]
        };

        function formatCurrency(value) {
            if (value >= 1000000000) return `$${(value / 1000000000).toFixed(1)}B`;
            if (value >= 1000000) return `$${(value / 1000000).toFixed(1)}M`;
            if (value >= 1000) return `$${(value / 1000).toFixed(0)}K`;
            return `$${value}`;
        }

        function MetricCard({ title, value, subtitle, trend, color = 'text-white', icon }) {
            return (
                <div className="bg-mp-slate rounded-xl p-5">
                    <div className="flex items-start justify-between mb-2">
                        <span className="text-gray-400 text-sm">{title}</span>
                        {icon && <span className="text-2xl">{icon}</span>}
                    </div>
                    <p className={`text-3xl font-bold ${color}`}>{value}</p>
                    {subtitle && <p className="text-sm text-gray-400 mt-1">{subtitle}</p>}
                    {trend !== undefined && (
                        <p className={`text-sm mt-2 ${trend >= 0 ? 'text-green-400' : 'text-red-400'}`}>
                            {trend >= 0 ? '‚Üë' : '‚Üì'} {Math.abs(trend)}% vs last quarter
                        </p>
                    )}
                </div>
            );
        }

        function PipelineFunnel({ data }) {
            const maxValue = Math.max(...data.map(d => d.value));
            
            return (
                <div className="bg-mp-slate rounded-xl p-5">
                    <h3 className="font-semibold text-white mb-4">Pipeline Funnel</h3>
                    <div className="space-y-3">
                        {data.map((stage, idx) => (
                            <div key={stage.stage}>
                                <div className="flex items-center justify-between text-sm mb-1">
                                    <span className="text-gray-400">{stage.stage}</span>
                                    <span className="text-white font-medium">{stage.count} ‚Ä¢ {formatCurrency(stage.value)}</span>
                                </div>
                                <div className="h-6 bg-mp-navy rounded-lg overflow-hidden">
                                    <div 
                                        className="h-full bg-gradient-to-r from-mp-cyan to-blue-500 rounded-lg transition-all duration-500 flex items-center justify-end pr-2"
                                        style={{ width: `${(stage.value / maxValue) * 100}%` }}
                                    >
                                    </div>
                                </div>
                            </div>
                        ))}
                    </div>
                </div>
            );
        }

        function WinLossChart({ data }) {
            const maxWins = Math.max(...data.map(d => d.wins));
            
            return (
                <div className="bg-mp-slate rounded-xl p-5">
                    <h3 className="font-semibold text-white mb-4">Quarterly Performance</h3>
                    <div className="flex items-end justify-between h-32 gap-2">
                        {data.map((quarter, idx) => (
                            <div key={quarter.quarter} className="flex-1 flex flex-col items-center">
                                <div className="w-full flex flex-col items-center justify-end h-24">
                                    <div 
                                        className="w-full bg-gradient-to-t from-mp-cyan to-blue-400 rounded-t-lg transition-all duration-500"
                                        style={{ height: `${(quarter.wins / maxWins) * 100}%` }}
                                    />
                                </div>
                                <p className="text-xs text-gray-400 mt-2 text-center">{quarter.quarter.split(' ')[0]}</p>
                                <p className="text-xs text-mp-cyan font-medium">{quarter.wins} wins</p>
                            </div>
                        ))}
                    </div>
                    <div className="mt-4 pt-4 border-t border-gray-800 grid grid-cols-3 gap-4 text-center">
                        <div>
                            <p className="text-xl font-bold text-green-400">{data[data.length-1].winRate}%</p>
                            <p className="text-xs text-gray-400">Current Win Rate</p>
                        </div>
                        <div>
                            <p className="text-xl font-bold text-mp-cyan">${data[data.length-1].value}M</p>
                            <p className="text-xs text-gray-400">Wins This Quarter</p>
                        </div>
                        <div>
                            <p className="text-xl font-bold text-purple-400">+{data[data.length-1].winRate - data[0].winRate}%</p>
                            <p className="text-xs text-gray-400">YoY Improvement</p>
                        </div>
                    </div>
                </div>
            );
        }

        function ActivityFeed({ activities }) {
            const getActivityIcon = (type) => {
                switch (type) {
                    case 'win': return { icon: 'üèÜ', color: 'text-green-400' };
                    case 'loss': return { icon: '‚ùå', color: 'text-red-400' };
                    case 'submission': return { icon: 'üì§', color: 'text-blue-400' };
                    case 'decision': return { icon: '‚öñÔ∏è', color: 'text-yellow-400' };
                    case 'milestone': return { icon: 'üéØ', color: 'text-purple-400' };
                    default: return { icon: 'üìå', color: 'text-gray-400' };
                }
            };

            return (
                <div className="bg-mp-slate rounded-xl p-5">
                    <h3 className="font-semibold text-white mb-4">Recent Activity</h3>
                    <div className="space-y-3">
                        {activities.map((activity, idx) => {
                            const { icon, color } = getActivityIcon(activity.type);
                            return (
                                <div key={idx} className="flex items-start gap-3 p-2 rounded-lg hover:bg-mp-navy/50 transition-colors">
                                    <span className={`text-xl ${color}`}>{icon}</span>
                                    <div className="flex-1">
                                        <p className="text-sm text-white">{activity.title}</p>
                                        <div className="flex items-center gap-2 mt-1">
                                            {activity.value && (
                                                <span className="text-xs text-mp-cyan font-medium">{formatCurrency(activity.value)}</span>
                                            )}
                                            {activity.outcome && (
                                                <span className={`text-xs px-2 py-0.5 rounded ${activity.outcome === 'GO' ? 'bg-green-500/20 text-green-400' : 'bg-red-500/20 text-red-400'}`}>
                                                    {activity.outcome}
                                                </span>
                                            )}
                                            <span className="text-xs text-gray-500">{activity.date}</span>
                                        </div>
                                    </div>
                                </div>
                            );
                        })}
                    </div>
                </div>
            );
        }

        function DeadlineAlert({ deadlines }) {
            return (
                <div className="bg-mp-slate rounded-xl p-5">
                    <h3 className="font-semibold text-white mb-4">Upcoming Deadlines</h3>
                    <div className="space-y-3">
                        {deadlines.sort((a, b) => a.daysLeft - b.daysLeft).map((deadline, idx) => (
                            <div 
                                key={idx} 
                                className={`flex items-center justify-between p-3 rounded-lg ${
                                    deadline.daysLeft <= 3 ? 'bg-red-500/10 border border-red-500/30' :
                                    deadline.daysLeft <= 14 ? 'bg-yellow-500/10 border border-yellow-500/30' :
                                    'bg-mp-navy/50'
                                }`}
                            >
                                <div>
                                    <p className="text-sm text-white">{deadline.title}</p>
                                    <p className="text-xs text-gray-400">{deadline.date}</p>
                                </div>
                                <div className={`text-right ${deadline.daysLeft <= 3 ? 'text-red-400' : deadline.daysLeft <= 14 ? 'text-yellow-400' : 'text-green-400'}`}>
                                    <p className="text-xl font-bold">{deadline.daysLeft}</p>
                                    <p className="text-xs">days</p>
                                </div>
                            </div>
                        ))}
                    </div>
                </div>
            );
        }

        function HealthGauge({ value, label }) {
            const getColor = (v) => {
                if (v >= 80) return 'text-green-400';
                if (v >= 60) return 'text-yellow-400';
                if (v >= 40) return 'text-orange-400';
                return 'text-red-400';
            };

            return (
                <div className="text-center">
                    <div className="relative inline-flex items-center justify-center">
                        <svg className="w-20 h-20 transform -rotate-90">
                            <circle
                                cx="40"
                                cy="40"
                                r="35"
                                stroke="currentColor"
                                strokeWidth="6"
                                fill="none"
                                className="text-mp-navy"
                            />
                            <circle
                                cx="40"
                                cy="40"
                                r="35"
                                stroke="currentColor"
                                strokeWidth="6"
                                fill="none"
                                strokeLinecap="round"
                                className={getColor(value)}
                                strokeDasharray={`${value * 2.2} 220`}
                            />
                        </svg>
                        <span className={`absolute text-xl font-bold ${getColor(value)}`}>{value}</span>
                    </div>
                    <p className="text-xs text-gray-400 mt-2">{label}</p>
                </div>
            );
        }

        function App() {
            const data = executiveData;
            const revenueProgress = Math.round((data.financial.ytdRevenue / data.financial.ytdTarget) * 100);

            return (
                <div className="min-h-screen bg-mp-navy pb-16">
                    {/* Header */}
                    <header className="bg-mp-slate border-b border-gray-800 px-6 py-4">
                        <div className="flex items-center justify-between">
                            <div className="flex items-center gap-4">
                                <div className="w-10 h-10 bg-gradient-to-br from-mp-cyan to-blue-600 rounded-lg flex items-center justify-center">
                                    <span className="text-xl">üìä</span>
                                </div>
                                <div>
                                    <h1 className="text-xl font-bold text-white">Executive Dashboard</h1>
                                    <p className="text-sm text-gray-400">Portfolio performance & strategic KPIs</p>
                                </div>
                            </div>
                            <div className="flex items-center gap-4">
                                <span className="text-sm text-gray-400">Last updated: Today, 2:30 PM</span>
                                <button className="bg-mp-cyan text-mp-navy px-4 py-2 rounded-lg font-medium hover:bg-mp-cyan/90 transition-colors">
                                    Export Report
                                </button>
                            </div>
                        </div>
                    </header>

                    {/* KPI Row */}
                    <div className="px-6 py-4">
                        <div className="grid grid-cols-6 gap-4">
                            <MetricCard 
                                title="Pipeline Value" 
                                value={formatCurrency(data.portfolio.totalValue)}
                                subtitle={`${data.portfolio.activeOpportunities} opportunities`}
                                color="text-mp-cyan"
                                icon="üí∞"
                            />
                            <MetricCard 
                                title="YTD Revenue" 
                                value={formatCurrency(data.financial.ytdRevenue)}
                                subtitle={`${revenueProgress}% of target`}
                                color="text-green-400"
                                icon="üìà"
                            />
                            <MetricCard 
                                title="Backlog" 
                                value={formatCurrency(data.financial.backlog)}
                                subtitle="Contracted value"
                                color="text-purple-400"
                                icon="üìã"
                            />
                            <MetricCard 
                                title="Win Rate" 
                                value={`${data.performance.winRate}%`}
                                trend={data.performance.winRateTrend}
                                color="text-yellow-400"
                                icon="üèÜ"
                            />
                            <MetricCard 
                                title="Avg Days to Win" 
                                value={data.performance.avgDaysToWin}
                                subtitle="From capture to award"
                                color="text-blue-400"
                                icon="‚è±Ô∏è"
                            />
                            <MetricCard 
                                title="Team Utilization" 
                                value={`${data.teamMetrics.utilization}%`}
                                subtitle={`${data.teamMetrics.proposalTeam} on proposals`}
                                color="text-orange-400"
                                icon="üë•"
                            />
                        </div>
                    </div>

                    {/* Health Gauges */}
                    <div className="px-6 py-2">
                        <div className="bg-mp-slate rounded-xl p-4 flex items-center justify-around">
                            <HealthGauge value={data.portfolio.pipelineHealth} label="Pipeline Health" />
                            <HealthGauge value={data.portfolio.avgPWin} label="Avg pWin" />
                            <HealthGauge value={Math.round(data.performance.proposalsWon / data.performance.proposalsSubmitted * 100)} label="Win Ratio" />
                            <HealthGauge value={data.teamMetrics.utilization} label="Utilization" />
                            <div className="text-center px-8">
                                <div className="grid grid-cols-3 gap-8">
                                    <div>
                                        <p className="text-3xl font-bold text-green-400">{data.performance.proposalsWon}</p>
                                        <p className="text-xs text-gray-400">Won</p>
                                    </div>
                                    <div>
                                        <p className="text-3xl font-bold text-yellow-400">{data.performance.proposalsPending}</p>
                                        <p className="text-xs text-gray-400">Pending</p>
                                    </div>
                                    <div>
                                        <p className="text-3xl font-bold text-red-400">{data.performance.proposalsLost}</p>
                                        <p className="text-xs text-gray-400">Lost</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    {/* Main Content */}
                    <div className="px-6 py-4 grid grid-cols-3 gap-4">
                        {/* Left Column */}
                        <div className="space-y-4">
                            <PipelineFunnel data={data.pipeline} />
                            <DeadlineAlert deadlines={data.upcomingDeadlines} />
                        </div>

                        {/* Middle Column */}
                        <div className="space-y-4">
                            <WinLossChart data={data.quarterlyTrend} />
                            <div className="bg-mp-slate rounded-xl p-5">
                                <h3 className="font-semibold text-white mb-4">Revenue Progress</h3>
                                <div className="mb-4">
                                    <div className="flex justify-between text-sm mb-2">
                                        <span className="text-gray-400">YTD Revenue vs Target</span>
                                        <span className="text-white">{revenueProgress}%</span>
                                    </div>
                                    <div className="h-4 bg-mp-navy rounded-full overflow-hidden">
                                        <div 
                                            className={`h-full rounded-full transition-all duration-500 ${
                                                revenueProgress >= 90 ? 'bg-green-500' :
                                                revenueProgress >= 70 ? 'bg-yellow-500' :
                                                'bg-red-500'
                                            }`}
                                            style={{ width: `${Math.min(revenueProgress, 100)}%` }}
                                        />
                                    </div>
                                    <div className="flex justify-between text-xs text-gray-500 mt-1">
                                        <span>{formatCurrency(data.financial.ytdRevenue)}</span>
                                        <span>{formatCurrency(data.financial.ytdTarget)}</span>
                                    </div>
                                </div>
                                <div className="grid grid-cols-2 gap-4 pt-4 border-t border-gray-800">
                                    <div className="text-center">
                                        <p className="text-xl font-bold text-mp-cyan">{formatCurrency(data.financial.backlog)}</p>
                                        <p className="text-xs text-gray-400">Total Backlog</p>
                                    </div>
                                    <div className="text-center">
                                        <p className="text-xl font-bold text-orange-400">{formatCurrency(data.financial.burnRate)}/mo</p>
                                        <p className="text-xs text-gray-400">Burn Rate</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        {/* Right Column */}
                        <div className="space-y-4">
                            <ActivityFeed activities={data.recentActivity} />
                        </div>
                    </div>

                    {/* Footer */}
                    <footer className="fixed bottom-0 left-0 right-0 bg-mp-slate border-t border-gray-800 px-6 py-3">
                        <div className="flex items-center justify-between text-sm text-gray-400">
                            <span>MissionPulse v12 ‚Ä¢ Executive Dashboard Module</span>
                            <span className="text-yellow-500">‚ö†Ô∏è AI GENERATED - REQUIRES HUMAN REVIEW</span>
                        </div>
                    </footer>
                </div>
            );
        }

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>
