<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MissionPulse S112 - Opportunity Health Score</title>
  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: 'Space Grotesk', sans-serif; background: #00050F; min-height: 100vh; }
    .font-mono { font-family: 'JetBrains Mono', monospace; }
    @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.7; } }
    @keyframes slideIn { from { opacity: 0; transform: translateY(12px); } to { opacity: 1; transform: translateY(0); } }
    @keyframes ringPulse { 0%, 100% { stroke-dashoffset: 0; } 50% { stroke-dashoffset: 5; } }
    @keyframes barFill { from { width: 0%; } }
    .animate-pulse { animation: pulse 2s ease-in-out infinite; }
    .animate-slide-in { animation: slideIn 0.4s ease-out forwards; }
    .animate-bar { animation: barFill 1s ease-out forwards; }
    .glass-card { background: linear-gradient(135deg, rgba(15,23,42,0.9) 0%, rgba(15,23,42,0.7) 100%); backdrop-filter: blur(10px); border: 1px solid rgba(0,229,250,0.15); }
    .glass-card:hover { border-color: rgba(0,229,250,0.3); }
    ::-webkit-scrollbar { width: 6px; } ::-webkit-scrollbar-track { background: #0a1628; } ::-webkit-scrollbar-thumb { background: rgba(0,229,250,0.3); border-radius: 3px; }
  </style>
  <script src="rbac-guard.js"></script>
</head>
<body>
  <div id="root"></div>
  <script type="text/babel">
    const { useState, useEffect } = React;

    // ===== SUPABASE =====
    const SUPABASE_URL = 'https://qdrtpnpnhkxvfmvfziop.supabase.co';
    const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFkcnRwbnBuaGt4dmZtdmZ6aW9wIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mzc4MjMwMTgsImV4cCI6MjA1MzM5OTAxOH0.gFHBoGjPMWjCGuJNdxMGPOBmGMHBp0jSTbxxcFKqkPQ';
    var sbClient;
    try { sbClient = supabase.createClient(SUPABASE_URL, SUPABASE_KEY); } catch(e) { sbClient = null; }

    // ===== ICONS =====
    const Icons = {
      heart: () => <svg className="w-full h-full" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" /></svg>,
      alert: () => <svg className="w-full h-full" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" /></svg>,
      check: () => <svg className="w-full h-full" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 13l4 4L19 7" /></svg>,
      trending: () => <svg className="w-full h-full" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6" /></svg>,
      trendDown: () => <svg className="w-full h-full" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M13 17h8m0 0v-8m0 8l-8-8-4 4-6-6" /></svg>,
      shield: () => <svg className="w-full h-full" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z" /></svg>,
      clock: () => <svg className="w-full h-full" fill="none" stroke="currentColor" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10" strokeWidth={2}/><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 6v6l4 2" /></svg>,
      zap: () => <svg className="w-full h-full" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M13 10V3L4 14h7v7l9-11h-7z" /></svg>,
      users: () => <svg className="w-full h-full" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z" /></svg>,
    };
    const Icon = ({ name, className = "w-4 h-4" }) => { const C = Icons[name]; return C ? <span className={`inline-block ${className}`}><C /></span> : null; };

    // ===== DEMO DATA =====
    const DEMO_OPPORTUNITIES = [
      {
        id: 1, name: 'DHA EHR Modernization', value: 47000000, stage: 'Proposal', pwin: 72, due_days: 18,
        health_score: 87,
        health_trend: [82, 84, 85, 87, 87],
        dimensions: { capture_maturity: 92, team_readiness: 85, compliance_status: 95, competitive_position: 78, schedule_health: 85 },
        risks: [ { severity: 'medium', signal: 'Incumbent has filed a GAO protest on similar contract', action: 'Prepare protest-ready documentation' }, { severity: 'low', signal: 'Key SA resource has PTO during pink team week', action: 'Assign backup SA; shift pink team 3 days' } ],
        actions: [ { task: 'Complete technical volume section 3.2', priority: 'high', owner: 'SA Lead', due: '2 days' }, { task: 'Finalize teaming agreement with Leidos', priority: 'high', owner: 'COO', due: '5 days' }, { task: 'Price volume DCAA compliance review', priority: 'medium', owner: 'FIN Lead', due: '7 days' } ]
      },
      {
        id: 2, name: 'VA Claims Processing AI', value: 23000000, stage: 'Capture', pwin: 55, due_days: 45,
        health_score: 62,
        health_trend: [70, 68, 65, 63, 62],
        dimensions: { capture_maturity: 55, team_readiness: 70, compliance_status: 80, competitive_position: 45, schedule_health: 60 },
        risks: [ { severity: 'high', signal: 'Past performance gap — no direct VA experience', action: 'Accelerate sub teaming with VA-experienced partner' }, { severity: 'high', signal: 'Win probability declining for 4 consecutive weeks', action: 'Conduct emergency Black Hat review' }, { severity: 'medium', signal: 'Competitor IBM has incumbent relationship', action: 'Differentiate on AI innovation + cost savings' } ],
        actions: [ { task: 'Identify VA teaming partner by Friday', priority: 'critical', owner: 'BD Lead', due: '3 days' }, { task: 'Schedule customer meeting with VA PM', priority: 'high', owner: 'CAP Manager', due: '5 days' }, { task: 'Complete competitive analysis update', priority: 'medium', owner: 'Strategy Lead', due: '10 days' } ]
      },
      {
        id: 3, name: 'CMS Data Analytics Platform', value: 15500000, stage: 'Post-Award', pwin: 95, due_days: 0,
        health_score: 94,
        health_trend: [88, 90, 92, 93, 94],
        dimensions: { capture_maturity: 98, team_readiness: 95, compliance_status: 92, competitive_position: 90, schedule_health: 95 },
        risks: [ { severity: 'low', signal: 'Minor scope clarification needed on data migration timeline', action: 'Submit RFI to COR by next sprint' } ],
        actions: [ { task: 'Complete transition-in plan update', priority: 'medium', owner: 'PM Lead', due: '14 days' } ]
      },
      {
        id: 4, name: 'IHS Telehealth Expansion', value: 8200000, stage: 'Qualify', pwin: 35, due_days: 90,
        health_score: 38,
        health_trend: [45, 42, 40, 39, 38],
        dimensions: { capture_maturity: 30, team_readiness: 45, compliance_status: 50, competitive_position: 25, schedule_health: 40 },
        risks: [ { severity: 'critical', signal: 'No tribal data sovereignty expertise on team', action: 'ESCALATE: Go/No-Go gate review required' }, { severity: 'high', signal: 'Competitor has 8-year incumbent relationship with IHS', action: 'Consider No-Bid recommendation to CEO' }, { severity: 'medium', signal: 'Technical approach lacks IHS-specific requirements understanding', action: 'Engage IHS SME consultant' } ],
        actions: [ { task: 'Schedule Go/No-Go gate review with CEO', priority: 'critical', owner: 'COO', due: '1 day' }, { task: 'Research tribal sovereignty compliance requirements', priority: 'high', owner: 'Compliance Lead', due: '5 days' } ]
      },
      {
        id: 5, name: 'DoD Advana Analytics Expansion', value: 125000000, stage: 'Capture', pwin: 60, due_days: 60,
        health_score: 73,
        health_trend: [68, 70, 71, 72, 73],
        dimensions: { capture_maturity: 75, team_readiness: 80, compliance_status: 70, competitive_position: 65, schedule_health: 75 },
        risks: [ { severity: 'medium', signal: 'Security clearance gap — 2 key staff need TS/SCI upgrade', action: 'Initiate clearance upgrade process immediately' }, { severity: 'low', signal: 'Pricing model needs update for FY26 rates', action: 'Schedule pricing sync with FIN lead' } ],
        actions: [ { task: 'Submit clearance upgrade packages', priority: 'high', owner: 'Security Officer', due: '3 days' }, { task: 'Complete capture plan v2', priority: 'medium', owner: 'CAP Manager', due: '10 days' }, { task: 'Draft FedRAMP compliance narrative', priority: 'medium', owner: 'SA Lead', due: '14 days' } ]
      },
    ];

    // ===== CONNECTION =====
    const ConnectionIndicator = ({ connected }) => (
      <div className="flex items-center gap-2 px-3 py-1 rounded-full text-xs font-mono" style={{ background: connected ? 'rgba(0,255,136,0.1)' : 'rgba(255,184,0,0.1)', border: `1px solid ${connected ? 'rgba(0,255,136,0.3)' : 'rgba(255,184,0,0.3)'}` }}>
        <div className={`w-2 h-2 rounded-full ${connected ? 'bg-green-400' : 'bg-amber-400 animate-pulse'}`} />
        <span style={{ color: connected ? '#00ff88' : '#ffb800' }}>{connected ? 'LIVE' : 'DEMO'}</span>
      </div>
    );

    // ===== HEALTH RING =====
    const HealthRing = ({ score, size = 80 }) => {
      const radius = (size - 8) / 2;
      const circumference = 2 * Math.PI * radius;
      const offset = circumference - (score / 100) * circumference;
      const color = score >= 80 ? '#00ff88' : score >= 60 ? '#ffb800' : score >= 40 ? '#ff8c00' : '#ff4444';
      return (
        <div className="relative" style={{ width: size, height: size }}>
          <svg width={size} height={size} className="transform -rotate-90">
            <circle cx={size/2} cy={size/2} r={radius} fill="none" stroke="rgba(100,116,139,0.2)" strokeWidth={4} />
            <circle cx={size/2} cy={size/2} r={radius} fill="none" stroke={color} strokeWidth={4} strokeLinecap="round" strokeDasharray={circumference} strokeDashoffset={offset} style={{ transition: 'stroke-dashoffset 1s ease' }} />
          </svg>
          <div className="absolute inset-0 flex items-center justify-center">
            <span className="text-lg font-mono font-bold" style={{ color }}>{score}</span>
          </div>
        </div>
      );
    };

    // ===== SPARKLINE =====
    const Sparkline = ({ data, width = 80, height = 24 }) => {
      const min = Math.min(...data);
      const max = Math.max(...data);
      const range = max - min || 1;
      const points = data.map((v, i) => `${(i / (data.length - 1)) * width},${height - ((v - min) / range) * height}`).join(' ');
      const lastVal = data[data.length - 1];
      const prevVal = data[data.length - 2];
      const color = lastVal >= prevVal ? '#00ff88' : '#ff4444';
      return (
        <svg width={width} height={height}>
          <polyline points={points} fill="none" stroke={color} strokeWidth={1.5} strokeLinecap="round" strokeLinejoin="round" />
        </svg>
      );
    };

    // ===== MAIN APP =====
    const HealthScoreApp = () => {
      const [connected, setConnected] = useState(false);
      const [userRole, setUserRole] = useState('CEO');
      const [opportunities] = useState(DEMO_OPPORTUNITIES);
      const [selectedOpp, setSelectedOpp] = useState(null);
      const [sortBy, setSortBy] = useState('health');

      useEffect(() => {
        const allowedRoles = ['CEO','COO','CAP','PM','SA','QA','Admin'];
        if (!allowedRoles.includes(userRole)) setUserRole(null);
      }, [userRole]);

      useEffect(() => {
        const tryConnect = async () => {
          if (!sbClient) return;
          try {
            const { data } = await sbClient.from('opportunities').select('id').limit(1);
            if (data) setConnected(true);
          } catch(e) {}
        };
        tryConnect();
      }, []);

      const sorted = [...opportunities].sort((a, b) => {
        if (sortBy === 'health') return a.health_score - b.health_score;
        if (sortBy === 'value') return b.value - a.value;
        return b.health_score - a.health_score;
      });

      const avgHealth = Math.round(opportunities.reduce((s, o) => s + o.health_score, 0) / opportunities.length);
      const criticalCount = opportunities.filter(o => o.health_score < 50).length;
      const atRiskCount = opportunities.filter(o => o.health_score >= 50 && o.health_score < 70).length;

      const SeverityBadge = ({ severity }) => {
        const map = { critical: { color: '#ff4444', bg: 'rgba(255,68,68,0.1)' }, high: { color: '#ff8c00', bg: 'rgba(255,140,0,0.1)' }, medium: { color: '#ffb800', bg: 'rgba(255,184,0,0.1)' }, low: { color: '#00E5FA', bg: 'rgba(0,229,250,0.1)' } };
        const s = map[severity] || map.medium;
        return <span className="px-2 py-0.5 rounded text-xs font-mono font-bold" style={{ background: s.bg, color: s.color, border: `1px solid ${s.color}30` }}>{severity.toUpperCase()}</span>;
      };

      const PriorityBadge = ({ priority }) => {
        const map = { critical: '#ff4444', high: '#ff8c00', medium: '#ffb800', low: '#00E5FA' };
        return <span className="text-xs font-mono font-bold" style={{ color: map[priority] || '#ffb800' }}>● {priority}</span>;
      };

      // Detail View
      if (selectedOpp) {
        const o = selectedOpp;
        return (
          <div className="min-h-screen" style={{ background: '#00050F' }}>
            <div className="max-w-6xl mx-auto p-6">
              <button onClick={() => setSelectedOpp(null)} className="flex items-center gap-2 text-sm text-slate-400 hover:text-cyan-400 transition mb-6">← Back to Health Dashboard</button>

              <div className="glass-card rounded-xl p-6 mb-6">
                <div className="flex items-center justify-between">
                  <div>
                    <h1 className="text-2xl font-bold text-white mb-1">{o.name}</h1>
                    <p className="text-sm text-slate-400">${(o.value/1000000).toFixed(1)}M · {o.stage} · pWin: {o.pwin}% · Due in {o.due_days} days</p>
                  </div>
                  <div className="flex items-center gap-4">
                    <Sparkline data={o.health_trend} width={100} height={32} />
                    <HealthRing score={o.health_score} size={90} />
                  </div>
                </div>
              </div>

              <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
                {/* Health Dimensions */}
                <div className="glass-card rounded-xl p-6">
                  <h3 className="text-sm font-mono font-bold text-cyan-400 mb-4">HEALTH DIMENSIONS</h3>
                  {Object.entries(o.dimensions).map(([key, val]) => (
                    <div key={key} className="flex items-center gap-3 mb-3">
                      <span className="text-xs text-slate-400 w-36 shrink-0 capitalize">{key.replace(/_/g, ' ')}</span>
                      <div className="flex-1 h-2.5 rounded-full bg-slate-700/40 overflow-hidden">
                        <div className="h-full rounded-full animate-bar" style={{ width: `${val}%`, background: val >= 80 ? '#00ff88' : val >= 60 ? '#ffb800' : val >= 40 ? '#ff8c00' : '#ff4444' }} />
                      </div>
                      <span className="text-xs font-mono w-8 text-right" style={{ color: val >= 80 ? '#00ff88' : val >= 60 ? '#ffb800' : val >= 40 ? '#ff8c00' : '#ff4444' }}>{val}</span>
                    </div>
                  ))}
                </div>

                {/* Health Trend */}
                <div className="glass-card rounded-xl p-6">
                  <h3 className="text-sm font-mono font-bold text-cyan-400 mb-4">5-WEEK TREND</h3>
                  <div className="flex items-end gap-3 justify-center" style={{ height: 120 }}>
                    {o.health_trend.map((v, i) => {
                      const color = v >= 80 ? '#00ff88' : v >= 60 ? '#ffb800' : v >= 40 ? '#ff8c00' : '#ff4444';
                      return (
                        <div key={i} className="flex flex-col items-center gap-2 flex-1">
                          <span className="text-xs font-mono" style={{ color }}>{v}</span>
                          <div className="w-full rounded-t" style={{ height: `${v}px`, background: color, opacity: 0.7, transition: 'height 0.6s ease' }} />
                          <span className="text-xs text-slate-500 font-mono">W{i+1}</span>
                        </div>
                      );
                    })}
                  </div>
                  <div className="mt-4 pt-3 border-t border-slate-700/30 flex justify-between">
                    <span className="text-xs text-slate-500">5-week change</span>
                    <span className={`text-sm font-mono font-bold ${o.health_trend[4] >= o.health_trend[0] ? 'text-green-400' : 'text-red-400'}`}>
                      {o.health_trend[4] >= o.health_trend[0] ? '+' : ''}{o.health_trend[4] - o.health_trend[0]} pts
                    </span>
                  </div>
                </div>

                {/* Risk Signals */}
                <div className="glass-card rounded-xl p-6">
                  <h3 className="text-sm font-mono font-bold text-cyan-400 mb-4">
                    <span className="flex items-center gap-2"><Icon name="alert" className="w-4 h-4 text-amber-400" /> RISK SIGNALS ({o.risks.length})</span>
                  </h3>
                  <div className="space-y-3">
                    {o.risks.map((r, i) => (
                      <div key={i} className="p-3 rounded-lg bg-slate-800/30 border border-slate-700/20">
                        <div className="flex items-start gap-2 mb-2">
                          <SeverityBadge severity={r.severity} />
                          <span className="text-sm text-slate-300">{r.signal}</span>
                        </div>
                        <div className="pl-2 border-l-2 border-cyan-500/30 ml-1">
                          <span className="text-xs text-cyan-400">→ {r.action}</span>
                        </div>
                      </div>
                    ))}
                  </div>
                </div>

                {/* Action Items */}
                <div className="glass-card rounded-xl p-6">
                  <h3 className="text-sm font-mono font-bold text-cyan-400 mb-4">
                    <span className="flex items-center gap-2"><Icon name="zap" className="w-4 h-4 text-amber-400" /> ACTION ITEMS ({o.actions.length})</span>
                  </h3>
                  <div className="space-y-3">
                    {o.actions.map((a, i) => (
                      <div key={i} className="p-3 rounded-lg bg-slate-800/30 border border-slate-700/20">
                        <div className="flex items-start justify-between mb-1">
                          <span className="text-sm text-white">{a.task}</span>
                          <PriorityBadge priority={a.priority} />
                        </div>
                        <div className="flex items-center gap-4 mt-2 text-xs text-slate-500">
                          <span>Owner: <span className="text-slate-300">{a.owner}</span></span>
                          <span>Due: <span className="text-slate-300">{a.due}</span></span>
                        </div>
                      </div>
                    ))}
                  </div>
                </div>
              </div>
            </div>
          </div>
        );
      }

      // ===== LIST VIEW =====
      return (
        <div className="min-h-screen" style={{ background: '#00050F' }}>
          <div className="max-w-7xl mx-auto p-6">
            {/* Header */}
            <div className="flex items-center justify-between mb-8">
              <div>
                <div className="flex items-center gap-3 mb-1">
                  <h1 className="text-2xl font-bold text-white">Opportunity Health Score</h1>
                  <ConnectionIndicator connected={connected} />
                </div>
                <p className="text-sm text-slate-400">Per-opportunity health index, risk signals & recommended actions</p>
              </div>
              <div className="flex items-center gap-2 bg-slate-800/50 rounded-lg p-1">
                {[{k:'health',l:'By Risk'},{k:'value',l:'By Value'},{k:'score',l:'By Score'}].map(s => (
                  <button key={s.k} onClick={() => setSortBy(s.k)} className={`px-3 py-1.5 rounded-md text-xs font-mono font-bold transition ${sortBy === s.k ? 'bg-cyan-500/20 text-cyan-400' : 'text-slate-500 hover:text-slate-300'}`}>{s.l}</button>
                ))}
              </div>
            </div>

            {/* Summary KPIs */}
            <div className="grid grid-cols-2 md:grid-cols-4 gap-4 mb-8">
              {[
                { label: 'Portfolio Health', value: avgHealth, color: avgHealth >= 70 ? '#00ff88' : '#ffb800', icon: 'heart' },
                { label: 'Critical', value: criticalCount, color: '#ff4444', icon: 'alert' },
                { label: 'At Risk', value: atRiskCount, color: '#ffb800', icon: 'alert' },
                { label: 'Opportunities', value: opportunities.length, color: '#00E5FA', icon: 'trending' },
              ].map((kpi, i) => (
                <div key={i} className="glass-card rounded-xl p-5 animate-slide-in" style={{ animationDelay: `${i*0.05}s` }}>
                  <div className="flex items-center gap-2 mb-3">
                    <Icon name={kpi.icon} className="w-4 h-4" style={{ color: kpi.color }} />
                    <span className="text-xs text-slate-500 font-mono uppercase">{kpi.label}</span>
                  </div>
                  <div className="text-2xl font-mono font-bold" style={{ color: kpi.color }}>{kpi.value}</div>
                </div>
              ))}
            </div>

            {/* Opportunity Cards */}
            <div className="space-y-4">
              {sorted.map((o, i) => (
                <div key={o.id} onClick={() => setSelectedOpp(o)} className="glass-card rounded-xl p-5 cursor-pointer hover:border-cyan-500/40 transition-all animate-slide-in" style={{ animationDelay: `${i*0.08}s` }}>
                  <div className="flex items-center justify-between">
                    <div className="flex items-center gap-5">
                      <HealthRing score={o.health_score} size={64} />
                      <div>
                        <h3 className="text-white font-semibold">{o.name}</h3>
                        <p className="text-xs text-slate-500 mt-0.5">${(o.value/1000000).toFixed(1)}M · {o.stage} · pWin: {o.pwin}%{o.due_days > 0 ? ` · ${o.due_days}d to due` : ''}</p>
                      </div>
                    </div>
                    <div className="flex items-center gap-6">
                      <Sparkline data={o.health_trend} />
                      <div className="text-right">
                        <div className="flex items-center gap-1">
                          <Icon name="alert" className="w-3 h-3 text-amber-400" />
                          <span className="text-sm font-mono text-slate-300">{o.risks.length}</span>
                        </div>
                        <div className="text-xs text-slate-500">risks</div>
                      </div>
                      <div className="text-right">
                        <span className="text-sm font-mono text-slate-300">{o.actions.length}</span>
                        <div className="text-xs text-slate-500">actions</div>
                      </div>
                      <span className="text-slate-600 text-lg">→</span>
                    </div>
                  </div>
                </div>
              ))}
            </div>

            {/* AI Disclaimer */}
            <div className="mt-8 text-center">
              <div className="inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-amber-500/5 border border-amber-500/20">
                <Icon name="shield" className="w-3.5 h-3.5 text-amber-500" />
                <span className="text-xs text-amber-500/80 font-mono">AI GENERATED — REQUIRES HUMAN REVIEW</span>
              </div>
            </div>
          </div>
        </div>
      );
    };

    ReactDOM.render(<HealthScoreApp />, document.getElementById('root'));
  </script>
</body>
</html>
