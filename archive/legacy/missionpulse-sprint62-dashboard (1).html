<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MissionPulse | Command Center</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'mp-navy': '#00050F',
                        'mp-cyan': '#00E5FA',
                        'mp-cyan-dark': '#00B8C8',
                        'mp-slate': '#0A1628',
                        'mp-card': '#111827',
                        'mp-border': '#1E3A5F'
                    },
                    fontFamily: {
                        'inter': ['Inter', 'sans-serif']
                    }
                }
            }
        }
    </script>
    <style>
        body { font-family: 'Inter', sans-serif; }
        .glow-cyan { box-shadow: 0 0 20px rgba(0, 229, 250, 0.15); }
        .glow-cyan-strong { box-shadow: 0 0 30px rgba(0, 229, 250, 0.25); }
        .gradient-border { background: linear-gradient(135deg, #00E5FA 0%, #0066FF 100%); }
        .module-tile:hover { transform: translateY(-2px); transition: all 0.2s ease; }
        .pulse-dot { animation: pulse 2s infinite; }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        .scrollbar-thin::-webkit-scrollbar { width: 4px; }
        .scrollbar-thin::-webkit-scrollbar-track { background: #0A1628; }
        .scrollbar-thin::-webkit-scrollbar-thumb { background: #1E3A5F; border-radius: 2px; }
    </style>
  <script src="rbac-guard.js"></script>
</head>
<body class="bg-mp-navy text-white min-h-screen">
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useEffect } = React;

        // Demo data
        const DEMO_USER = {
            name: 'Mary Womack',
            role: 'CEO',
            email: 'mary@missionmeetstech.com',
            avatar: 'MW'
        };

        const PIPELINE_DATA = {
            totalValue: 847000000,
            opportunities: 12,
            avgPwin: 68,
            upcomingDeadlines: 3,
            wonThisQuarter: 2,
            lostThisQuarter: 1
        };

        const MODULES = [
            // Core Operations
            { id: 'm1', name: 'Dashboard', icon: 'ðŸ“Š', href: 'index.html', category: 'core', status: 'live' },
            { id: 'm2', name: 'War Room', icon: 'ðŸŽ¯', href: 'missionpulse-sprint61-warroom.html', category: 'core', status: 'live', featured: true },
            { id: 'm3', name: 'Pipeline', icon: 'ðŸ“ˆ', href: 'missionpulse-m2-warroom-enhanced.html', category: 'core', status: 'live' },
            { id: 'm4', name: 'Swimlane', icon: 'ðŸŠ', href: 'missionpulse-m3-swimlane-board.html', category: 'core', status: 'live' },
            
            // Intelligence
            { id: 'm5', name: 'RFP Shredder', icon: 'ðŸ“„', href: 'index__13_.html', category: 'intel', status: 'live' },
            { id: 'm6', name: 'Contract Scanner', icon: 'ðŸ”', href: 'missionpulse-m5-contracts-enhanced.html', category: 'intel', status: 'live' },
            { id: 'm7', name: 'Iron Dome', icon: 'ðŸ›¡ï¸', href: 'missionpulse-m6-iron-dome.html', category: 'intel', status: 'live' },
            { id: 'm8', name: 'Black Hat', icon: 'ðŸŽ©', href: 'missionpulse-m7-blackhat-enhanced.html', category: 'intel', status: 'live', roleRequired: ['CEO', 'CAP'] },
            
            // Pricing & Compliance
            { id: 'm9', name: 'Pricing Studio', icon: 'ðŸ’°', href: 'missionpulse-m8-pricing.html', category: 'pricing', status: 'live' },
            { id: 'm10', name: 'HITL Approvals', icon: 'âœ…', href: 'missionpulse-m9-hitl-enhanced.html', category: 'pricing', status: 'live' },
            { id: 'm11', name: 'Orals Studio', icon: 'ðŸŽ¤', href: 'm10-orals-studio-enhanced.jsx', category: 'delivery', status: 'live' },
            
            // Strategy
            { id: 'm12', name: 'Frenemy Protocol', icon: 'ðŸ¤', href: 'missionpulse-m11-frenemy-protocol.html', category: 'strategy', status: 'live' },
            { id: 'm13', name: 'Launch ROI', icon: 'ðŸš€', href: 'missionpulse-m13-launch-roi.html', category: 'strategy', status: 'live' },
            { id: 'm14', name: 'Post-Award', icon: 'ðŸ†', href: 'missionpulse-m14-post-award.html', category: 'strategy', status: 'live' },
            { id: 'm15', name: 'Playbook', icon: 'ðŸ“š', href: 'missionpulse-m15-lessons-playbook.html', category: 'strategy', status: 'live' },
            
            // Admin & System
            { id: 'm16', name: 'RBAC Admin', icon: 'ðŸ”', href: 'missionpulse-task16-rbac.html', category: 'admin', status: 'live', roleRequired: ['CEO', 'Admin'] },
            { id: 'm17', name: 'Agent Hub', icon: 'ðŸ¤–', href: 'missionpulse-sprint55-agenthub.html', category: 'ai', status: 'live' },
            { id: 'm18', name: 'Reports', icon: 'ðŸ“‘', href: 'missionpulse-sprint56-reports.html', category: 'core', status: 'live' },
            { id: 'm19', name: 'Mobile View', icon: 'ðŸ“±', href: 'missionpulse-sprint57-mobile.html', category: 'core', status: 'live' },
            { id: 'm20', name: 'Auth', icon: 'ðŸ”‘', href: 'login.html', category: 'admin', status: 'live' },
            { id: 'm21', name: 'Intel Tracker', icon: 'ðŸ•µï¸', href: 'missionpulse-m27-intel.html', category: 'intel', status: 'live' },
            { id: 'm22', name: 'Doc Library', icon: 'ðŸ“', href: 'missionpulse-m28-docs.html', category: 'core', status: 'live' },
            { id: 'm23', name: 'Realtime', icon: 'âš¡', href: 'missionpulse-sprint60-realtime.html', category: 'core', status: 'live' },
        ];

        const ACTION_ITEMS = [
            { id: 1, type: 'approval', title: 'Pricing BOE needs review', opportunity: 'VA EHR Modernization', priority: 'high', due: '2 hours' },
            { id: 2, type: 'deadline', title: 'Proposal due', opportunity: 'DHA Telehealth Platform', priority: 'critical', due: '3 days' },
            { id: 3, type: 'approval', title: 'Tech approach pending', opportunity: 'CMS Data Analytics', priority: 'medium', due: '1 day' },
            { id: 4, type: 'review', title: 'Black Hat analysis ready', opportunity: 'IHS Cloud Migration', priority: 'high', due: 'Today' },
        ];

        const RECENT_ACTIVITY = [
            { id: 1, user: 'Daniel Torres', action: 'updated pricing model', target: 'VA EHR Modernization', time: '5 min ago', avatar: 'DT' },
            { id: 2, user: 'Sarah Chen', action: 'completed compliance review', target: 'DHA Telehealth', time: '23 min ago', avatar: 'SC' },
            { id: 3, user: 'AI Agent', action: 'generated risk analysis', target: 'CMS Analytics', time: '1 hour ago', avatar: 'ðŸ¤–' },
            { id: 4, user: 'Mike Johnson', action: 'submitted technical volume', target: 'IHS Migration', time: '2 hours ago', avatar: 'MJ' },
            { id: 5, user: 'Mary Womack', action: 'approved Go/No-Go', target: 'VA EHR Modernization', time: '3 hours ago', avatar: 'MW' },
        ];

        const ROLE_WIDGETS = {
            CEO: ['pwin_trends', 'pipeline_value', 'action_items', 'deadlines'],
            CAP: ['win_themes', 'competitor_intel', 'teaming', 'pwin_trends'],
            PM: ['deadlines', 'task_status', 'team_workload', 'milestones'],
            SA: ['tech_gaps', 'compliance_status', 'past_performance', 'requirements'],
            FIN: ['pricing_status', 'rate_validation', 'boe_reviews', 'cost_analysis'],
            CON: ['clause_analysis', 'far_dfars', 'compliance_matrix', 'risk_items'],
        };

        // Components
        const Header = ({ user }) => (
            <header className="bg-mp-slate border-b border-mp-border px-6 py-4">
                <div className="max-w-7xl mx-auto flex items-center justify-between">
                    <div className="flex items-center gap-4">
                        <div className="flex items-center gap-2">
                            <div className="w-10 h-10 rounded-lg gradient-border flex items-center justify-center">
                                <span className="text-xl">ðŸŽ¯</span>
                            </div>
                            <div>
                                <h1 className="text-xl font-bold text-white">MissionPulse</h1>
                                <p className="text-xs text-gray-400">Command Center</p>
                            </div>
                        </div>
                    </div>
                    
                    <div className="flex items-center gap-6">
                        <div className="flex items-center gap-2 text-sm">
                            <span className="pulse-dot w-2 h-2 bg-green-400 rounded-full"></span>
                            <span className="text-gray-400">All Systems Operational</span>
                        </div>
                        
                        <div className="flex items-center gap-3 bg-mp-card px-4 py-2 rounded-lg border border-mp-border">
                            <div className="w-8 h-8 rounded-full bg-mp-cyan/20 flex items-center justify-center text-mp-cyan text-sm font-medium">
                                {user.avatar}
                            </div>
                            <div>
                                <p className="text-sm font-medium text-white">{user.name}</p>
                                <p className="text-xs text-mp-cyan">{user.role}</p>
                            </div>
                        </div>
                    </div>
                </div>
            </header>
        );

        const StatCard = ({ label, value, subtext, trend, icon }) => (
            <div className="bg-mp-card border border-mp-border rounded-xl p-5 glow-cyan">
                <div className="flex items-start justify-between mb-3">
                    <span className="text-2xl">{icon}</span>
                    {trend && (
                        <span className={`text-xs px-2 py-1 rounded-full ${trend > 0 ? 'bg-green-500/20 text-green-400' : 'bg-red-500/20 text-red-400'}`}>
                            {trend > 0 ? 'â†‘' : 'â†“'} {Math.abs(trend)}%
                        </span>
                    )}
                </div>
                <p className="text-3xl font-bold text-white mb-1">{value}</p>
                <p className="text-sm text-gray-400">{label}</p>
                {subtext && <p className="text-xs text-mp-cyan mt-2">{subtext}</p>}
            </div>
        );

        const PipelineHealth = ({ data }) => (
            <div className="bg-mp-card border border-mp-border rounded-xl p-6 glow-cyan">
                <h3 className="text-lg font-semibold text-white mb-4 flex items-center gap-2">
                    <span>ðŸ“ˆ</span> Pipeline Health
                </h3>
                <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
                    <StatCard 
                        icon="ðŸ’°" 
                        value={`$${(data.totalValue / 1000000).toFixed(0)}M`} 
                        label="Pipeline Value" 
                        trend={12}
                    />
                    <StatCard 
                        icon="ðŸ“‹" 
                        value={data.opportunities} 
                        label="Active Opportunities" 
                        subtext={`${data.upcomingDeadlines} due this week`}
                    />
                    <StatCard 
                        icon="ðŸŽ¯" 
                        value={`${data.avgPwin}%`} 
                        label="Avg Win Probability" 
                        trend={5}
                    />
                    <StatCard 
                        icon="ðŸ†" 
                        value={`${data.wonThisQuarter}W / ${data.lostThisQuarter}L`} 
                        label="Q1 Record" 
                        subtext="67% win rate"
                    />
                </div>
            </div>
        );

        const ActionItems = ({ items, userRole }) => {
            const priorityColors = {
                critical: 'border-red-500 bg-red-500/10',
                high: 'border-orange-500 bg-orange-500/10',
                medium: 'border-yellow-500 bg-yellow-500/10',
                low: 'border-gray-500 bg-gray-500/10'
            };

            return (
                <div className="bg-mp-card border border-mp-border rounded-xl p-6 glow-cyan">
                    <div className="flex items-center justify-between mb-4">
                        <h3 className="text-lg font-semibold text-white flex items-center gap-2">
                            <span>âš¡</span> My Action Items
                        </h3>
                        <span className="bg-mp-cyan/20 text-mp-cyan text-xs px-2 py-1 rounded-full">
                            {items.length} pending
                        </span>
                    </div>
                    <div className="space-y-3 max-h-64 overflow-y-auto scrollbar-thin">
                        {items.map(item => (
                            <div key={item.id} className={`border-l-2 ${priorityColors[item.priority]} rounded-r-lg p-3`}>
                                <div className="flex items-start justify-between">
                                    <div>
                                        <p className="text-sm font-medium text-white">{item.title}</p>
                                        <p className="text-xs text-gray-400 mt-1">{item.opportunity}</p>
                                    </div>
                                    <span className="text-xs text-mp-cyan whitespace-nowrap ml-2">{item.due}</span>
                                </div>
                            </div>
                        ))}
                    </div>
                    <button className="w-full mt-4 py-2 text-sm text-mp-cyan hover:bg-mp-cyan/10 rounded-lg transition-colors">
                        View All Actions â†’
                    </button>
                </div>
            );
        };

        const RecentActivity = ({ activities }) => (
            <div className="bg-mp-card border border-mp-border rounded-xl p-6 glow-cyan">
                <h3 className="text-lg font-semibold text-white mb-4 flex items-center gap-2">
                    <span>ðŸ”„</span> Recent Activity
                </h3>
                <div className="space-y-4 max-h-64 overflow-y-auto scrollbar-thin">
                    {activities.map(activity => (
                        <div key={activity.id} className="flex items-start gap-3">
                            <div className="w-8 h-8 rounded-full bg-mp-slate flex items-center justify-center text-xs font-medium text-mp-cyan flex-shrink-0">
                                {activity.avatar}
                            </div>
                            <div className="flex-1 min-w-0">
                                <p className="text-sm text-white">
                                    <span className="font-medium">{activity.user}</span>
                                    <span className="text-gray-400"> {activity.action}</span>
                                </p>
                                <p className="text-xs text-mp-cyan truncate">{activity.target}</p>
                            </div>
                            <span className="text-xs text-gray-500 whitespace-nowrap">{activity.time}</span>
                        </div>
                    ))}
                </div>
            </div>
        );

        const ModuleGrid = ({ modules, userRole }) => {
            const categories = {
                core: { name: 'Core Operations', icon: 'ðŸŽ¯' },
                intel: { name: 'Intelligence', icon: 'ðŸ”' },
                pricing: { name: 'Pricing & Review', icon: 'ðŸ’°' },
                strategy: { name: 'Strategy', icon: 'ðŸ“Š' },
                delivery: { name: 'Delivery', icon: 'ðŸ“¦' },
                ai: { name: 'AI Agents', icon: 'ðŸ¤–' },
                admin: { name: 'Administration', icon: 'âš™ï¸' }
            };

            const groupedModules = modules.reduce((acc, module) => {
                // Check role access
                if (module.roleRequired && !module.roleRequired.includes(userRole)) {
                    return acc;
                }
                if (!acc[module.category]) acc[module.category] = [];
                acc[module.category].push(module);
                return acc;
            }, {});

            return (
                <div className="bg-mp-card border border-mp-border rounded-xl p-6 glow-cyan">
                    <h3 className="text-lg font-semibold text-white mb-4 flex items-center gap-2">
                        <span>ðŸš€</span> Quick Launch
                        <span className="text-xs text-gray-400 font-normal ml-2">({modules.length} modules)</span>
                    </h3>
                    
                    <div className="space-y-6">
                        {Object.entries(groupedModules).map(([category, categoryModules]) => (
                            <div key={category}>
                                <p className="text-xs text-gray-400 uppercase tracking-wide mb-2 flex items-center gap-2">
                                    <span>{categories[category]?.icon}</span>
                                    {categories[category]?.name || category}
                                </p>
                                <div className="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-2">
                                    {categoryModules.map(module => (
                                        <a
                                            key={module.id}
                                            href={module.href}
                                            className={`module-tile flex flex-col items-center justify-center p-3 rounded-lg border transition-all ${
                                                module.featured 
                                                    ? 'border-mp-cyan bg-mp-cyan/10 hover:bg-mp-cyan/20' 
                                                    : 'border-mp-border bg-mp-slate hover:border-mp-cyan/50 hover:bg-mp-slate/80'
                                            }`}
                                        >
                                            <span className="text-xl mb-1">{module.icon}</span>
                                            <span className="text-xs text-center text-gray-300">{module.name}</span>
                                            {module.featured && (
                                                <span className="text-[10px] text-mp-cyan mt-1">â˜… Featured</span>
                                            )}
                                        </a>
                                    ))}
                                </div>
                            </div>
                        ))}
                    </div>
                </div>
            );
        };

        const PWinTrends = () => {
            const opportunities = [
                { name: 'VA EHR Modernization', pwin: 78, value: 245, trend: 'up' },
                { name: 'DHA Telehealth', pwin: 72, value: 180, trend: 'up' },
                { name: 'CMS Data Analytics', pwin: 65, value: 156, trend: 'stable' },
                { name: 'IHS Cloud Migration', pwin: 58, value: 134, trend: 'down' },
                { name: 'DoD Health Records', pwin: 45, value: 132, trend: 'up' },
            ];

            return (
                <div className="bg-mp-card border border-mp-border rounded-xl p-6 glow-cyan">
                    <h3 className="text-lg font-semibold text-white mb-4 flex items-center gap-2">
                        <span>ðŸ“Š</span> Win Probability Trends
                    </h3>
                    <div className="space-y-3">
                        {opportunities.map((opp, idx) => (
                            <div key={idx} className="flex items-center gap-3">
                                <div className="flex-1 min-w-0">
                                    <div className="flex items-center justify-between mb-1">
                                        <span className="text-sm text-white truncate">{opp.name}</span>
                                        <div className="flex items-center gap-2">
                                            <span className={`text-xs ${
                                                opp.trend === 'up' ? 'text-green-400' : 
                                                opp.trend === 'down' ? 'text-red-400' : 'text-gray-400'
                                            }`}>
                                                {opp.trend === 'up' ? 'â†‘' : opp.trend === 'down' ? 'â†“' : 'â†’'}
                                            </span>
                                            <span className="text-sm font-medium text-mp-cyan">{opp.pwin}%</span>
                                        </div>
                                    </div>
                                    <div className="w-full bg-mp-slate rounded-full h-2">
                                        <div 
                                            className={`h-2 rounded-full transition-all ${
                                                opp.pwin >= 70 ? 'bg-green-500' :
                                                opp.pwin >= 50 ? 'bg-mp-cyan' : 'bg-orange-500'
                                            }`}
                                            style={{ width: `${opp.pwin}%` }}
                                        ></div>
                                    </div>
                                </div>
                                <span className="text-xs text-gray-400 w-16 text-right">${opp.value}M</span>
                            </div>
                        ))}
                    </div>
                </div>
            );
        };

        const UpcomingDeadlines = () => {
            const deadlines = [
                { name: 'DHA Telehealth Platform', date: 'Feb 1, 2025', daysLeft: 3, type: 'Proposal Due' },
                { name: 'VA EHR Modernization', date: 'Feb 5, 2025', daysLeft: 7, type: 'Questions Due' },
                { name: 'CMS Data Analytics', date: 'Feb 12, 2025', daysLeft: 14, type: 'Draft Review' },
                { name: 'IHS Cloud Migration', date: 'Feb 18, 2025', daysLeft: 20, type: 'Orals Prep' },
            ];

            return (
                <div className="bg-mp-card border border-mp-border rounded-xl p-6 glow-cyan">
                    <h3 className="text-lg font-semibold text-white mb-4 flex items-center gap-2">
                        <span>ðŸ“…</span> Upcoming Deadlines
                    </h3>
                    <div className="space-y-3">
                        {deadlines.map((deadline, idx) => (
                            <div key={idx} className="flex items-center justify-between p-3 bg-mp-slate rounded-lg">
                                <div>
                                    <p className="text-sm font-medium text-white">{deadline.name}</p>
                                    <p className="text-xs text-gray-400">{deadline.type}</p>
                                </div>
                                <div className="text-right">
                                    <p className={`text-sm font-medium ${
                                        deadline.daysLeft <= 3 ? 'text-red-400' :
                                        deadline.daysLeft <= 7 ? 'text-orange-400' : 'text-green-400'
                                    }`}>
                                        {deadline.daysLeft} days
                                    </p>
                                    <p className="text-xs text-gray-400">{deadline.date}</p>
                                </div>
                            </div>
                        ))}
                    </div>
                </div>
            );
        };

        // Main App
        const App = () => {
            const [user] = useState(DEMO_USER);
            const [currentTime, setCurrentTime] = useState(new Date());

            useEffect(() => {
                const timer = setInterval(() => setCurrentTime(new Date()), 60000);
                return () => clearInterval(timer);
            }, []);

            return (
                <div className="min-h-screen bg-mp-navy">
                    <Header user={user} />
                    
                    <main className="max-w-7xl mx-auto px-6 py-6">
                        {/* Welcome Banner */}
                        <div className="bg-gradient-to-r from-mp-cyan/20 to-transparent border border-mp-cyan/30 rounded-xl p-6 mb-6">
                            <div className="flex items-center justify-between">
                                <div>
                                    <h2 className="text-2xl font-bold text-white">
                                        Good {currentTime.getHours() < 12 ? 'morning' : currentTime.getHours() < 17 ? 'afternoon' : 'evening'}, {user.name.split(' ')[0]}
                                    </h2>
                                    <p className="text-gray-400 mt-1">
                                        You have <span className="text-mp-cyan font-medium">{ACTION_ITEMS.length} action items</span> requiring attention
                                    </p>
                                </div>
                                <div className="hidden md:flex items-center gap-4">
                                    <a 
                                        href="missionpulse-sprint61-warroom.html"
                                        className="flex items-center gap-2 bg-mp-cyan text-mp-navy px-4 py-2 rounded-lg font-medium hover:bg-mp-cyan-dark transition-colors"
                                    >
                                        <span>ðŸŽ¯</span> Enter War Room
                                    </a>
                                    <a 
                                        href="missionpulse-sprint55-agenthub.html"
                                        className="flex items-center gap-2 bg-mp-slate border border-mp-border px-4 py-2 rounded-lg font-medium hover:border-mp-cyan transition-colors"
                                    >
                                        <span>ðŸ¤–</span> AI Agents
                                    </a>
                                </div>
                            </div>
                        </div>

                        {/* Pipeline Health */}
                        <div className="mb-6">
                            <PipelineHealth data={PIPELINE_DATA} />
                        </div>

                        {/* Main Grid */}
                        <div className="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6">
                            <div className="lg:col-span-2 space-y-6">
                                <PWinTrends />
                                <ModuleGrid modules={MODULES} userRole={user.role} />
                            </div>
                            <div className="space-y-6">
                                <ActionItems items={ACTION_ITEMS} userRole={user.role} />
                                <UpcomingDeadlines />
                                <RecentActivity activities={RECENT_ACTIVITY} />
                            </div>
                        </div>
                    </main>

                    {/* Footer */}
                    <footer className="border-t border-mp-border py-4 mt-8">
                        <div className="max-w-7xl mx-auto px-6 flex items-center justify-between text-xs text-gray-500">
                            <p>Â© 2025 Mission Meets Tech. All rights reserved.</p>
                            <p>MissionPulse v12 â€¢ Sprint 62 â€¢ 36 Modules Active</p>
                        </div>
                    </footer>
                </div>
            );
        };

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>
