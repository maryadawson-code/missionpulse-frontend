<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MissionPulse M7 - Black Hat Intel</title>
  <!-- CORE LIBRARY - MUST BE FIRST -->
  <script src="missionpulse-core.js"></script>
  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: 'Inter', sans-serif; background: #00050F; min-height: 100vh; overflow-x: hidden; }
    .font-mono { font-family: 'JetBrains Mono', monospace; }
    
    /* Animations */
    @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
    @keyframes ping { 75%, 100% { transform: scale(2); opacity: 0; } }
    @keyframes spin { to { transform: rotate(360deg); } }
    @keyframes slideIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
    @keyframes slideInLeft { from { opacity: 0; transform: translateX(-20px); } to { opacity: 1; transform: translateX(0); } }
    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0; } }
    @keyframes shake { 0%, 100% { transform: translateX(0); } 25% { transform: translateX(-5px); } 75% { transform: translateX(5px); } }
    @keyframes attackScan { 0% { background-position: 0% 50%; } 100% { background-position: 100% 50%; } }
    @keyframes glowPulse { 0%, 100% { box-shadow: 0 0 20px rgba(239, 68, 68, 0.3); } 50% { box-shadow: 0 0 40px rgba(239, 68, 68, 0.6); } }
    @keyframes gaugeFill { from { stroke-dashoffset: 251.2; } }
    @keyframes floatUp { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-5px); } }
    @keyframes shimmer { 0% { background-position: -200% 0; } 100% { background-position: 200% 0; } }
    
    .animate-pulse { animation: pulse 2s ease-in-out infinite; }
    .animate-ping { animation: ping 1s cubic-bezier(0, 0, 0.2, 1) infinite; }
    .animate-spin { animation: spin 1s linear infinite; }
    .animate-slideIn { animation: slideIn 0.5s ease-out; }
    .animate-slideInLeft { animation: slideInLeft 0.4s ease-out; }
    .animate-fadeIn { animation: fadeIn 0.3s ease-out; }
    .animate-blink { animation: blink 1s step-end infinite; }
    .animate-shake { animation: shake 0.5s ease-in-out; }
    .animate-glowPulse { animation: glowPulse 2s ease-in-out infinite; }
    .animate-float { animation: floatUp 3s ease-in-out infinite; }
    
    /* Shimmer effect for loading skeletons */
    .animate-shimmer { 
      background: linear-gradient(90deg, rgba(30,41,59,1) 0%, rgba(51,65,85,0.5) 50%, rgba(30,41,59,1) 100%);
      background-size: 200% 100%;
      animation: shimmer 1.5s infinite;
    }
    
    /* Attack scan effect */
    .attack-scan { 
      background: linear-gradient(90deg, transparent, rgba(239, 68, 68, 0.2), transparent);
      background-size: 200% 100%;
      animation: attackScan 2s linear infinite;
    }
    
    /* Glass morphism */
    .glass { background: rgba(15, 23, 42, 0.7); backdrop-filter: blur(20px); border: 1px solid rgba(100, 116, 139, 0.2); }
    
    /* Severity indicators */
    .severity-critical { border-left: 4px solid #EF4444; background: rgba(239, 68, 68, 0.1); }
    .severity-major { border-left: 4px solid #F59E0B; background: rgba(245, 158, 11, 0.1); }
    .severity-minor { border-left: 4px solid #3B82F6; background: rgba(59, 130, 246, 0.1); }
    
    /* Competitor cards */
    .competitor-card { 
      background: linear-gradient(135deg, rgba(30, 41, 59, 0.9), rgba(15, 23, 42, 0.9));
      border: 1px solid rgba(100, 116, 139, 0.3);
      transition: all 0.3s ease;
    }
    .competitor-card:hover {
      border-color: #EF4444;
      box-shadow: 0 0 30px rgba(239, 68, 68, 0.2);
      transform: translateY(-4px);
    }
    .competitor-card.selected {
      border-color: #00E5FA;
      box-shadow: 0 0 30px rgba(0, 229, 250, 0.3);
    }
    
    /* SWOT Grid */
    .swot-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      grid-template-rows: 1fr 1fr;
      gap: 2px;
      background: rgba(100, 116, 139, 0.2);
      border-radius: 12px;
      overflow: hidden;
    }
    .swot-cell {
      padding: 16px;
      background: rgba(15, 23, 42, 0.9);
    }
    .swot-strengths { border-top-left-radius: 10px; }
    .swot-weaknesses { border-top-right-radius: 10px; }
    .swot-opportunities { border-bottom-left-radius: 10px; }
    .swot-threats { border-bottom-right-radius: 10px; }
    
    /* Evaluator Lens */
    .evaluator-lens-active {
      background: linear-gradient(135deg, rgba(168, 85, 247, 0.1), rgba(236, 72, 153, 0.1));
      border: 1px solid rgba(168, 85, 247, 0.3);
    }
    
    /* Price slider */
    .price-slider::-webkit-slider-thumb {
      -webkit-appearance: none;
      width: 20px;
      height: 20px;
      background: #00E5FA;
      border-radius: 50%;
      cursor: pointer;
      box-shadow: 0 0 15px rgba(0, 229, 250, 0.5);
    }
    .price-slider::-webkit-slider-runnable-track {
      height: 8px;
      background: linear-gradient(90deg, #10B981, #F59E0B, #EF4444);
      border-radius: 4px;
    }
    
    /* Custom scrollbar */
    ::-webkit-scrollbar { width: 6px; }
    ::-webkit-scrollbar-track { background: #0F172A; }
    ::-webkit-scrollbar-thumb { background: #334155; border-radius: 3px; }
    ::-webkit-scrollbar-thumb:hover { background: #475569; }
    
    /* Vulnerability Gauge */
    .vuln-gauge {
      transition: stroke-dashoffset 1s ease-out;
    }
    
    /* Toast container styles (for core library) */
    #mp-toast-container {
      position: fixed;
      top: 20px;
      right: 20px;
      z-index: 9999;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    
    /* Connection banner styles */
    #mp-connection-banner {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      z-index: 9998;
      background: linear-gradient(90deg, #DC2626, #B91C1C);
      color: white;
      padding: 8px 16px;
      text-align: center;
      font-size: 14px;
      font-weight: 500;
      display: none;
    }
    #mp-connection-banner.visible {
      display: block;
    }
  </style>
</head>
<body>
  <!-- Toast Container for Core Library -->
  <div id="mp-toast-container"></div>
  
  <!-- Connection Status Banner -->
  <div id="mp-connection-banner">
    ‚ö†Ô∏è Connection lost. Attempting to reconnect...
  </div>
  
  <div id="root"></div>
  
  <script type="text/babel">
    const { useState, useEffect, useRef, useCallback } = React;

    // ========== CONFIGURATION ==========
    const API_BASE = 'https://missionpulse-api.onrender.com';
    const MODULE_ID = 'blackhat';
    const ALLOWED_ROLES = ['CEO', 'COO', 'CAP']; // RESTRICTED ACCESS
    
    // ========== DESIGN TOKENS ==========
    const COLORS = {
      bg: '#00050F',
      surface: '#0F172A',
      panel: '#1E293B',
      border: '#334155',
      muted: '#64748B',
      text: '#F8FAFC',
      cyan: '#00E5FA',
      danger: '#EF4444',
      warning: '#F59E0B',
      success: '#10B981',
      info: '#3B82F6',
      purple: '#A855F7',
      pink: '#EC4899',
      orange: '#F97316',
    };

    // ========== ERROR BOUNDARY ==========
    class ErrorBoundary extends React.Component {
      constructor(props) {
        super(props);
        this.state = { hasError: false, error: null };
      }
      
      static getDerivedStateFromError(error) {
        return { hasError: true, error };
      }
      
      componentDidCatch(error, errorInfo) {
        console.error('M7 Black Hat Error:', error, errorInfo);
        // Could send to error tracking service here
      }
      
      render() {
        if (this.state.hasError) {
          return (
            <div className="min-h-screen flex items-center justify-center p-8" style={{ background: COLORS.bg }}>
              <div className="text-center max-w-md">
                <div className="w-16 h-16 mx-auto mb-6 rounded-full bg-red-500/20 flex items-center justify-center">
                  <svg className="w-8 h-8 text-red-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
                  </svg>
                </div>
                <h2 className="text-xl font-bold text-white mb-2">Something went wrong</h2>
                <p className="text-slate-400 mb-6">M7 Black Hat Intel encountered an error. Please try refreshing the page.</p>
                <button 
                  onClick={() => window.location.reload()}
                  className="px-6 py-3 bg-cyan-500 hover:bg-cyan-600 text-black font-semibold rounded-lg transition-colors"
                >
                  Refresh Page
                </button>
              </div>
            </div>
          );
        }
        return this.props.children;
      }
    }

    // ========== RBAC ACCESS CHECK ==========
    const AccessDenied = () => (
      <div className="min-h-screen flex items-center justify-center p-8" style={{ background: COLORS.bg }}>
        <div className="text-center max-w-lg">
          <div className="w-20 h-20 mx-auto mb-6 rounded-full bg-red-500/20 flex items-center justify-center animate-pulse">
            <svg className="w-10 h-10 text-red-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z" />
            </svg>
          </div>
          <h2 className="text-2xl font-bold text-white mb-3">Access Restricted</h2>
          <p className="text-slate-400 mb-4">
            M7 Black Hat Intel contains sensitive competitor intelligence and is restricted to authorized personnel only.
          </p>
          <div className="inline-flex items-center gap-2 px-4 py-2 bg-slate-800 rounded-lg mb-6">
            <span className="text-slate-500 text-sm">Required Roles:</span>
            {ALLOWED_ROLES.map(role => (
              <span key={role} className="px-2 py-1 bg-red-500/20 text-red-400 text-xs font-semibold rounded">{role}</span>
            ))}
          </div>
          <p className="text-slate-500 text-sm mb-6">
            If you believe you should have access, please contact your system administrator.
          </p>
          <a 
            href="index.html"
            className="inline-flex items-center gap-2 px-6 py-3 bg-slate-700 hover:bg-slate-600 text-white font-medium rounded-lg transition-colors"
          >
            <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M10 19l-7-7m0 0l7-7m-7 7h18" />
            </svg>
            Return to Dashboard
          </a>
        </div>
      </div>
    );

    // ========== LOADING SKELETON COMPONENTS ==========
    const SkeletonCard = ({ className = '' }) => (
      <div className={`rounded-xl p-4 ${className}`} style={{ background: COLORS.surface, border: `1px solid ${COLORS.border}` }}>
        <div className="h-4 w-24 rounded animate-shimmer mb-3"></div>
        <div className="h-8 w-full rounded animate-shimmer mb-4"></div>
        <div className="space-y-2">
          <div className="h-3 w-full rounded animate-shimmer"></div>
          <div className="h-3 w-3/4 rounded animate-shimmer"></div>
          <div className="h-3 w-5/6 rounded animate-shimmer"></div>
        </div>
      </div>
    );
    
    const SkeletonCompetitorCard = () => (
      <div className="competitor-card rounded-xl p-4">
        <div className="flex items-center gap-3 mb-4">
          <div className="w-12 h-12 rounded-lg animate-shimmer"></div>
          <div className="flex-1">
            <div className="h-5 w-32 rounded animate-shimmer mb-2"></div>
            <div className="h-3 w-48 rounded animate-shimmer"></div>
          </div>
        </div>
        <div className="space-y-3">
          <div className="h-3 w-full rounded animate-shimmer"></div>
          <div className="h-3 w-5/6 rounded animate-shimmer"></div>
          <div className="flex gap-2 mt-3">
            <div className="h-6 w-20 rounded animate-shimmer"></div>
            <div className="h-6 w-16 rounded animate-shimmer"></div>
          </div>
        </div>
      </div>
    );
    
    const LoadingState = () => (
      <div className="min-h-screen p-6" style={{ background: COLORS.bg }}>
        {/* Header Skeleton */}
        <div className="max-w-7xl mx-auto mb-8">
          <div className="flex items-center justify-between">
            <div className="flex items-center gap-4">
              <div className="w-12 h-12 rounded-xl animate-shimmer"></div>
              <div>
                <div className="h-6 w-48 rounded animate-shimmer mb-2"></div>
                <div className="h-4 w-64 rounded animate-shimmer"></div>
              </div>
            </div>
            <div className="flex gap-3">
              <div className="h-10 w-32 rounded-lg animate-shimmer"></div>
              <div className="h-10 w-32 rounded-lg animate-shimmer"></div>
            </div>
          </div>
        </div>
        
        {/* Content Skeleton */}
        <div className="max-w-7xl mx-auto grid grid-cols-12 gap-6">
          {/* Left sidebar - Competitor list */}
          <div className="col-span-3 space-y-4">
            <div className="h-8 w-full rounded animate-shimmer mb-4"></div>
            <SkeletonCompetitorCard />
            <SkeletonCompetitorCard />
            <SkeletonCompetitorCard />
          </div>
          
          {/* Main content */}
          <div className="col-span-6 space-y-4">
            <SkeletonCard className="h-48" />
            <SkeletonCard className="h-64" />
          </div>
          
          {/* Right sidebar */}
          <div className="col-span-3 space-y-4">
            <SkeletonCard className="h-40" />
            <SkeletonCard className="h-32" />
          </div>
        </div>
      </div>
    );

    // ========== MOCK RBAC CONTEXT (Replace with real auth in production) ==========
    const useAuth = () => {
      const [user, setUser] = useState(null);
      const [loading, setLoading] = useState(true);
      
      useEffect(() => {
        // Simulate auth check - replace with real API call
        const checkAuth = async () => {
          try {
            // In production: const response = await MP.get('/api/auth/me');
            // For demo, we'll simulate an authorized user
            await new Promise(resolve => setTimeout(resolve, 500));
            
            // Get user from localStorage or default to demo user
            const storedUser = localStorage.getItem('mp_user');
            if (storedUser) {
              setUser(JSON.parse(storedUser));
            } else {
              // Default demo user - CEO has access
              setUser({
                id: 'demo-ceo',
                name: 'Demo CEO',
                email: 'ceo@demo.com',
                role: 'CEO',
                avatar: 'CEO'
              });
            }
          } catch (err) {
            console.error('Auth check failed:', err);
            setUser(null);
          } finally {
            setLoading(false);
          }
        };
        
        checkAuth();
      }, []);
      
      const hasAccess = user && ALLOWED_ROLES.includes(user.role);
      
      return { user, loading, hasAccess };
    };

    // ========== COMPETITOR DATA ==========
    const COMPETITORS = [
      {
        id: 'govcorp',
        name: 'GovCorp',
        type: 'Large Business (Incumbent)',
        logo: 'G',
        logoColor: '#EF4444',
        threat: 'CRITICAL',
        vulnerabilityScore: 4,
        strengths: [
          '5-year incumbent with established relationships',
          'Deep institutional knowledge of current systems',
          'Large cleared workforce (500+ FTEs)',
          'Existing security infrastructure in place',
          'Strong past performance ratings (Exceptional)'
        ],
        weaknesses: [
          'Complacency - no innovation in last 3 years',
          'Key personnel turnover (3 leads departed Q4)',
          'Aging technical stack (legacy Java monolith)',
          'Higher overhead rates (+22% above market)',
          'Recent GAO audit findings (GAO-24-892)'
        ],
        opportunities: [
          'Attack their innovation gap with modern cloud-native approach',
          'Ghost their personnel instability in management section',
          'Highlight vendor lock-in risks of their proprietary systems',
          'Emphasize your competitive pricing against their bloated rates'
        ],
        threats: [
          'May lower price significantly to retain contract',
          'Strong government relationships could influence evaluation',
          'Could partner with SDVOSB to meet set-aside requirements'
        ],
        ghostLanguage: 'While some vendors may rely on legacy architectures that create dependencies and limit flexibility, our modern cloud-native approach ensures maximum interoperability.',
        winProbability: 35,
        priceEstimate: { low: 42, mid: 48, high: 54 },
        recentIntel: [
          { date: '2024-01-15', type: 'award', content: 'Won $12M task order on HITS-II' },
          { date: '2024-01-08', type: 'personnel', content: 'Lead architect departed for AWS' },
          { date: '2023-12-20', type: 'protest', content: 'Filed protest on DHA-EMR award' }
        ]
      },
      {
        id: 'fedtech',
        name: 'FedTech Solutions',
        type: 'Small Business (8a)',
        logo: 'F',
        logoColor: '#F59E0B',
        threat: 'MAJOR',
        vulnerabilityScore: 6,
        strengths: [
          '8(a) set-aside eligibility advantage',
          'Aggressive pricing (15-20% below market)',
          'Recent FedRAMP High ATO (September 2023)',
          'Strong technical proposal writing team'
        ],
        weaknesses: [
          'Limited past performance at this scale',
          'Key personnel spread thin across 4 active contracts',
          'No healthcare IT domain expertise',
          'Cash flow constraints limit surge capacity'
        ],
        opportunities: [
          'Question their ability to scale for this requirement',
          'Highlight lack of healthcare-specific credentials',
          'Emphasize your deeper bench and dedicated team'
        ],
        threats: [
          'Could partner with larger mentor to shore up weaknesses',
          'Price could be 20%+ below your target',
          'May get preferential evaluation as 8(a)'
        ],
        ghostLanguage: 'Our team brings deep healthcare IT expertise with over 15 years of domain experience, ensuring immediate productivity without the learning curve.',
        winProbability: 25,
        priceEstimate: { low: 34, mid: 38, high: 42 },
        recentIntel: [
          { date: '2024-01-10', type: 'award', content: 'Awarded GSA STARS III' },
          { date: '2023-11-15', type: 'personnel', content: 'Hired ex-DHA program manager' }
        ]
      },
      {
        id: 'techsys',
        name: 'TechSys Global',
        type: 'Large Business',
        logo: 'T',
        logoColor: '#8B5CF6',
        threat: 'MODERATE',
        vulnerabilityScore: 7,
        strengths: [
          'Strong AI/ML technical capabilities',
          'Recent acquisition brought healthcare talent',
          'Impressive commercial healthcare portfolio'
        ],
        weaknesses: [
          'New to federal contracting (< 3 years)',
          'No existing government relationships',
          'Commercial culture may clash with government pace',
          'CMMC certification still in progress'
        ],
        opportunities: [
          'Emphasize your proven federal track record',
          'Highlight compliance maturity vs their learning curve',
          'Question their understanding of FAR/DFARS requirements'
        ],
        threats: [
          'Could bring innovative commercial best practices',
          'Deep pockets allow aggressive pricing strategies',
          'May attract evaluators with flashy AI demos'
        ],
        ghostLanguage: 'With over a decade of federal healthcare IT experience, our team understands the unique compliance requirements and stakeholder dynamics of government programs.',
        winProbability: 15,
        priceEstimate: { low: 44, mid: 50, high: 58 },
        recentIntel: [
          { date: '2024-01-05', type: 'bid', content: 'Registered on SAM.gov for healthcare NAICS' },
          { date: '2023-12-01', type: 'partnership', content: 'Announced teaming with HealthFirst SDVOSB' }
        ]
      }
    ];

    // ========== ICON COMPONENT ==========
    const ICONS = {
      target: <svg className="w-full h-full" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" /></svg>,
      shield: <svg className="w-full h-full" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z" /></svg>,
      alert: <svg className="w-full h-full" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" /></svg>,
      chart: <svg className="w-full h-full" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" /></svg>,
      users: <svg className="w-full h-full" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z" /></svg>,
      document: <svg className="w-full h-full" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" /></svg>,
      export: <svg className="w-full h-full" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12" /></svg>,
      eye: <svg className="w-full h-full" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" /><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" /></svg>,
      chevronRight: <svg className="w-full h-full" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 5l7 7-7 7" /></svg>,
      search: <svg className="w-full h-full" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" /></svg>,
      refresh: <svg className="w-full h-full" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" /></svg>,
      home: <svg className="w-full h-full" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" /></svg>,
      lock: <svg className="w-full h-full" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z" /></svg>,
    };

    const Icon = ({ name, className = "w-4 h-4" }) => {
      return (
        <span className={`inline-block ${className}`}>
          {ICONS[name] || ICONS.shield}
        </span>
      );
    };

    // ========== REUSABLE COMPONENTS ==========
    const Card = ({ children, className = '', glow = false }) => (
      <div 
        className={`rounded-xl ${glow ? 'animate-glowPulse' : ''} ${className}`}
        style={{ 
          background: COLORS.surface, 
          border: `1px solid ${COLORS.border}` 
        }}
      >
        {children}
      </div>
    );

    const Badge = ({ children, variant = 'default', size = 'md' }) => {
      const variants = {
        default: { bg: 'rgba(100,116,139,0.2)', color: '#94A3B8' },
        danger: { bg: 'rgba(239,68,68,0.2)', color: '#EF4444' },
        warning: { bg: 'rgba(245,158,11,0.2)', color: '#F59E0B' },
        success: { bg: 'rgba(16,185,129,0.2)', color: '#10B981' },
        info: { bg: 'rgba(59,130,246,0.2)', color: '#3B82F6' },
        purple: { bg: 'rgba(168,85,247,0.2)', color: '#A855F7' },
        cyan: { bg: 'rgba(0,229,250,0.2)', color: '#00E5FA' },
      };
      const sizes = {
        xs: 'px-1.5 py-0.5 text-[10px]',
        sm: 'px-2 py-0.5 text-xs',
        md: 'px-2.5 py-1 text-xs',
        lg: 'px-3 py-1.5 text-sm',
      };
      const style = variants[variant] || variants.default;
      return (
        <span 
          className={`inline-flex items-center font-semibold rounded-full ${sizes[size]}`}
          style={{ background: style.bg, color: style.color }}
        >
          {children}
        </span>
      );
    };

    const Button = ({ children, variant = 'primary', size = 'md', icon, className = '', disabled = false, loading = false, onClick }) => {
      const variants = {
        primary: 'bg-cyan-500 hover:bg-cyan-600 text-black font-semibold',
        secondary: 'bg-slate-700 hover:bg-slate-600 text-white',
        danger: 'bg-red-500 hover:bg-red-600 text-white font-semibold',
        warning: 'bg-amber-500 hover:bg-amber-600 text-black font-semibold',
        outline: 'border border-slate-600 hover:border-slate-500 text-slate-300 hover:text-white bg-transparent',
        ghost: 'text-slate-400 hover:text-white hover:bg-slate-800',
      };
      const sizes = {
        sm: 'px-3 py-1.5 text-xs',
        md: 'px-4 py-2 text-sm',
        lg: 'px-6 py-3 text-base',
      };
      return (
        <button 
          className={`inline-flex items-center justify-center gap-2 rounded-lg transition-all duration-200 ${variants[variant]} ${sizes[size]} ${className} ${disabled || loading ? 'opacity-50 cursor-not-allowed' : ''}`}
          onClick={onClick}
          disabled={disabled || loading}
        >
          {loading ? (
            <svg className="animate-spin w-4 h-4" fill="none" viewBox="0 0 24 24">
              <circle className="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" strokeWidth="4"></circle>
              <path className="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
            </svg>
          ) : icon ? (
            <Icon name={icon} className="w-4 h-4" />
          ) : null}
          {children}
        </button>
      );
    };

    // ========== THREAT LEVEL BADGE ==========
    const ThreatBadge = ({ level }) => {
      const config = {
        CRITICAL: { color: '#EF4444', bg: 'rgba(239,68,68,0.2)', icon: 'üî¥' },
        MAJOR: { color: '#F59E0B', bg: 'rgba(245,158,11,0.2)', icon: 'üü†' },
        MODERATE: { color: '#3B82F6', bg: 'rgba(59,130,246,0.2)', icon: 'üîµ' },
        LOW: { color: '#10B981', bg: 'rgba(16,185,129,0.2)', icon: 'üü¢' },
      };
      const cfg = config[level] || config.MODERATE;
      return (
        <span 
          className="inline-flex items-center gap-1 px-2 py-1 rounded text-xs font-bold"
          style={{ background: cfg.bg, color: cfg.color }}
        >
          <span>{cfg.icon}</span>
          {level}
        </span>
      );
    };

    // ========== VULNERABILITY GAUGE ==========
    const VulnerabilityGauge = ({ score, size = 80 }) => {
      const radius = (size - 10) / 2;
      const circumference = radius * 2 * Math.PI;
      const offset = circumference - (score / 10) * circumference;
      const color = score >= 7 ? '#10B981' : score >= 4 ? '#F59E0B' : '#EF4444';
      
      return (
        <div className="relative" style={{ width: size, height: size }}>
          <svg className="transform -rotate-90" width={size} height={size}>
            <circle
              cx={size/2}
              cy={size/2}
              r={radius}
              stroke="#1E293B"
              strokeWidth="6"
              fill="none"
            />
            <circle
              cx={size/2}
              cy={size/2}
              r={radius}
              stroke={color}
              strokeWidth="6"
              fill="none"
              strokeDasharray={circumference}
              strokeDashoffset={offset}
              strokeLinecap="round"
              className="vuln-gauge"
              style={{ animation: 'gaugeFill 1s ease-out' }}
            />
          </svg>
          <div className="absolute inset-0 flex items-center justify-center">
            <span className="text-lg font-bold" style={{ color }}>{score}/10</span>
          </div>
        </div>
      );
    };

    // ========== COMPETITOR CARD ==========
    const CompetitorCard = ({ competitor, selected, onClick }) => (
      <div 
        className={`competitor-card rounded-xl p-4 cursor-pointer ${selected ? 'selected' : ''}`}
        onClick={onClick}
      >
        <div className="flex items-center gap-3 mb-3">
          <div 
            className="w-12 h-12 rounded-lg flex items-center justify-center text-xl font-bold"
            style={{ background: `${competitor.logoColor}20`, color: competitor.logoColor }}
          >
            {competitor.logo}
          </div>
          <div className="flex-1">
            <h4 className="font-semibold text-white">{competitor.name}</h4>
            <p className="text-xs text-slate-400">{competitor.type}</p>
          </div>
        </div>
        <div className="flex items-center justify-between">
          <ThreatBadge level={competitor.threat} />
          <div className="flex items-center gap-2">
            <span className="text-xs text-slate-500">Vuln:</span>
            <VulnerabilityGauge score={competitor.vulnerabilityScore} size={40} />
          </div>
        </div>
      </div>
    );

    // ========== GHOSTING STRATEGY PANEL ==========
    const GhostingStrategyPanel = ({ competitor }) => {
      const [copying, setCopying] = useState(false);
      
      const handleCopyGhostLanguage = async () => {
        setCopying(true);
        try {
          await navigator.clipboard.writeText(competitor.ghostLanguage);
          // Use core library toast if available
          if (window.MP?.success) {
            window.MP.success('Ghost language copied to clipboard');
          }
        } catch (err) {
          console.error('Failed to copy:', err);
          if (window.MP?.error) {
            window.MP.error('Failed to copy to clipboard');
          }
        }
        setTimeout(() => setCopying(false), 1000);
      };
      
      return (
        <Card className="p-5">
          <div className="flex items-center justify-between mb-4">
            <h3 className="text-lg font-semibold text-white flex items-center gap-2">
              <span className="text-2xl">üëª</span>
              Ghosting Strategy
            </h3>
            <Badge variant="danger" size="sm">CONFIDENTIAL</Badge>
          </div>
          
          <div className="p-4 rounded-lg bg-slate-800/50 border border-slate-700 mb-4">
            <p className="text-slate-300 text-sm italic leading-relaxed">
              "{competitor.ghostLanguage}"
            </p>
          </div>
          
          <div className="flex gap-2">
            <Button 
              variant="primary" 
              size="sm" 
              icon="document"
              onClick={handleCopyGhostLanguage}
              loading={copying}
            >
              {copying ? 'Copied!' : 'Copy Language'}
            </Button>
            <Button variant="outline" size="sm" icon="refresh">
              Generate Alternative
            </Button>
          </div>
          
          <div className="mt-4 p-3 rounded-lg bg-amber-500/10 border border-amber-500/30">
            <div className="flex items-start gap-2">
              <Icon name="alert" className="w-4 h-4 text-amber-400 mt-0.5" />
              <div>
                <p className="text-xs text-amber-400 font-semibold">Usage Guidelines</p>
                <p className="text-xs text-slate-400 mt-1">
                  Ghost language should subtly differentiate without naming competitors. 
                  Review with Capture Lead before including in proposal.
                </p>
              </div>
            </div>
          </div>
        </Card>
      );
    };

    // ========== SWOT MATRIX ==========
    const SWOTMatrix = ({ competitor }) => (
      <Card className="p-5">
        <h3 className="text-lg font-semibold text-white mb-4 flex items-center gap-2">
          <Icon name="chart" className="w-5 h-5 text-cyan-400" />
          SWOT Analysis: {competitor.name}
        </h3>
        <div className="swot-grid">
          <div className="swot-cell swot-strengths">
            <h4 className="text-sm font-semibold text-red-400 mb-2">Their Strengths</h4>
            <ul className="space-y-1.5">
              {competitor.strengths.slice(0, 3).map((s, i) => (
                <li key={i} className="text-xs text-slate-300 flex items-start gap-2">
                  <span className="text-red-400">‚Ä¢</span>
                  {s}
                </li>
              ))}
            </ul>
          </div>
          <div className="swot-cell swot-weaknesses">
            <h4 className="text-sm font-semibold text-emerald-400 mb-2">Their Weaknesses</h4>
            <ul className="space-y-1.5">
              {competitor.weaknesses.slice(0, 3).map((w, i) => (
                <li key={i} className="text-xs text-slate-300 flex items-start gap-2">
                  <span className="text-emerald-400">‚Ä¢</span>
                  {w}
                </li>
              ))}
            </ul>
          </div>
          <div className="swot-cell swot-opportunities">
            <h4 className="text-sm font-semibold text-cyan-400 mb-2">Our Opportunities</h4>
            <ul className="space-y-1.5">
              {competitor.opportunities.slice(0, 3).map((o, i) => (
                <li key={i} className="text-xs text-slate-300 flex items-start gap-2">
                  <span className="text-cyan-400">‚Ä¢</span>
                  {o}
                </li>
              ))}
            </ul>
          </div>
          <div className="swot-cell swot-threats">
            <h4 className="text-sm font-semibold text-amber-400 mb-2">Our Threats</h4>
            <ul className="space-y-1.5">
              {competitor.threats.slice(0, 3).map((t, i) => (
                <li key={i} className="text-xs text-slate-300 flex items-start gap-2">
                  <span className="text-amber-400">‚Ä¢</span>
                  {t}
                </li>
              ))}
            </ul>
          </div>
        </div>
      </Card>
    );

    // ========== PRICE TO WIN PANEL ==========
    const PriceToWinPanel = ({ competitor }) => {
      const [sliderValue, setSliderValue] = useState(competitor.priceEstimate.mid);
      
      return (
        <Card className="p-5">
          <h3 className="text-lg font-semibold text-white mb-4 flex items-center gap-2">
            <span className="text-xl">üí∞</span>
            Price-to-Win Analysis
          </h3>
          
          <div className="grid grid-cols-3 gap-4 mb-6">
            <div className="p-3 rounded-lg bg-emerald-500/10 border border-emerald-500/30 text-center">
              <p className="text-xs text-emerald-400 mb-1">Aggressive</p>
              <p className="text-xl font-bold text-emerald-400">${competitor.priceEstimate.low}M</p>
            </div>
            <div className="p-3 rounded-lg bg-amber-500/10 border border-amber-500/30 text-center">
              <p className="text-xs text-amber-400 mb-1">Expected</p>
              <p className="text-xl font-bold text-amber-400">${competitor.priceEstimate.mid}M</p>
            </div>
            <div className="p-3 rounded-lg bg-red-500/10 border border-red-500/30 text-center">
              <p className="text-xs text-red-400 mb-1">Conservative</p>
              <p className="text-xl font-bold text-red-400">${competitor.priceEstimate.high}M</p>
            </div>
          </div>
          
          <div className="mb-4">
            <label className="block text-sm text-slate-400 mb-2">Adjust Estimate</label>
            <input 
              type="range" 
              min={competitor.priceEstimate.low - 5}
              max={competitor.priceEstimate.high + 5}
              value={sliderValue}
              onChange={(e) => setSliderValue(Number(e.target.value))}
              className="w-full price-slider appearance-none bg-transparent cursor-pointer"
            />
            <div className="flex justify-between text-xs text-slate-500 mt-1">
              <span>${competitor.priceEstimate.low - 5}M</span>
              <span className="text-cyan-400 font-bold">${sliderValue}M</span>
              <span>${competitor.priceEstimate.high + 5}M</span>
            </div>
          </div>
          
          <div className="p-3 rounded-lg bg-slate-800/50">
            <p className="text-xs text-slate-400">
              <span className="text-cyan-400 font-semibold">AI Analysis:</span> Based on {competitor.name}'s 
              historical pricing and recent win rates, their most likely bid falls between 
              ${competitor.priceEstimate.low}M and ${competitor.priceEstimate.mid}M.
            </p>
          </div>
        </Card>
      );
    };

    // ========== INTEL TIMELINE ==========
    const IntelTimeline = ({ competitor }) => (
      <Card className="p-4">
        <h4 className="text-sm font-semibold text-white mb-3 flex items-center gap-2">
          <Icon name="chart" className="w-4 h-4 text-cyan-400" />
          Recent Intelligence
        </h4>
        <div className="space-y-3">
          {competitor.recentIntel.map((intel, i) => (
            <div key={i} className="flex items-start gap-3 text-xs">
              <div className={`w-2 h-2 rounded-full mt-1.5 ${
                intel.type === 'award' ? 'bg-emerald-500' :
                intel.type === 'personnel' ? 'bg-amber-500' :
                intel.type === 'protest' ? 'bg-red-500' :
                intel.type === 'bid' ? 'bg-blue-500' :
                'bg-purple-500'
              }`} />
              <div className="flex-1">
                <p className="text-slate-300">{intel.content}</p>
                <p className="text-slate-500 mt-0.5">{intel.date}</p>
              </div>
            </div>
          ))}
        </div>
      </Card>
    );

    // ========== MAIN APPLICATION ==========
    const BlackHatIntel = () => {
      const { user, loading, hasAccess } = useAuth();
      const [selectedCompetitor, setSelectedCompetitor] = useState(null);
      const [activeView, setActiveView] = useState('intel');
      const [evaluatorLensEnabled, setEvaluatorLensEnabled] = useState(false);
      const [searchQuery, setSearchQuery] = useState('');
      const [apiLoading, setApiLoading] = useState(false);
      
      // Initialize connection monitor if core library available
      useEffect(() => {
        if (window.MP?.ConnectionMonitor) {
          window.MP.ConnectionMonitor.init(API_BASE);
        }
      }, []);
      
      // Auto-select first competitor on load
      useEffect(() => {
        if (hasAccess && COMPETITORS.length > 0) {
          setSelectedCompetitor(COMPETITORS[0]);
        }
      }, [hasAccess]);
      
      // Show loading state
      if (loading) {
        return <LoadingState />;
      }
      
      // Check access - STRICT RBAC for Black Hat
      if (!hasAccess) {
        return <AccessDenied />;
      }
      
      const filteredCompetitors = COMPETITORS.filter(c => 
        c.name.toLowerCase().includes(searchQuery.toLowerCase()) ||
        c.type.toLowerCase().includes(searchQuery.toLowerCase())
      );

      return (
        <div className="min-h-screen" style={{ background: COLORS.bg }}>
          {/* Header */}
          <header className="border-b" style={{ borderColor: COLORS.border, background: 'rgba(15,23,42,0.8)', backdropFilter: 'blur(20px)' }}>
            <div className="max-w-7xl mx-auto px-6 py-4">
              <div className="flex items-center justify-between">
                <div className="flex items-center gap-4">
                  <a href="index.html" className="p-2 rounded-lg bg-slate-800 hover:bg-slate-700 transition-colors">
                    <Icon name="home" className="w-5 h-5 text-slate-400" />
                  </a>
                  <div className="flex items-center gap-3">
                    <div className="w-10 h-10 rounded-xl bg-red-500/20 flex items-center justify-center animate-glowPulse">
                      <span className="text-xl">üéØ</span>
                    </div>
                    <div>
                      <div className="flex items-center gap-2">
                        <h1 className="text-xl font-bold text-white">M7: Black Hat Intel</h1>
                        <Badge variant="danger" size="xs">RESTRICTED</Badge>
                      </div>
                      <p className="text-xs text-slate-400">Competitor Intelligence & Ghosting Strategy</p>
                    </div>
                  </div>
                </div>
                
                <div className="flex items-center gap-3">
                  <div className="flex items-center gap-2 px-3 py-1.5 rounded-lg bg-slate-800">
                    <Icon name="lock" className="w-4 h-4 text-amber-400" />
                    <span className="text-xs text-slate-400">Access:</span>
                    <span className="text-xs text-amber-400 font-semibold">{user?.role}</span>
                  </div>
                  <Button 
                    variant={evaluatorLensEnabled ? 'warning' : 'outline'} 
                    size="sm"
                    icon="eye"
                    onClick={() => setEvaluatorLensEnabled(!evaluatorLensEnabled)}
                  >
                    Evaluator Lens
                  </Button>
                  <Button variant="danger" size="sm" icon="export">
                    Export Intel
                  </Button>
                </div>
              </div>
            </div>
          </header>

          {/* Main Content */}
          <main className="max-w-7xl mx-auto px-6 py-6">
            <div className="grid grid-cols-12 gap-6">
              {/* Left Sidebar - Competitor List */}
              <div className="col-span-3 space-y-4">
                <div className="relative">
                  <Icon name="search" className="w-4 h-4 absolute left-3 top-1/2 -translate-y-1/2 text-slate-500" />
                  <input
                    type="text"
                    placeholder="Search competitors..."
                    value={searchQuery}
                    onChange={(e) => setSearchQuery(e.target.value)}
                    className="w-full pl-10 pr-4 py-2.5 rounded-lg bg-slate-800 border border-slate-700 text-white text-sm placeholder:text-slate-500 focus:outline-none focus:border-cyan-500"
                  />
                </div>
                
                <div className="space-y-3">
                  {filteredCompetitors.map(competitor => (
                    <CompetitorCard 
                      key={competitor.id}
                      competitor={competitor}
                      selected={selectedCompetitor?.id === competitor.id}
                      onClick={() => setSelectedCompetitor(competitor)}
                    />
                  ))}
                </div>
                
                <Button variant="outline" className="w-full" icon="users">
                  Add Competitor
                </Button>
              </div>

              {/* Main Content Area */}
              <div className="col-span-5 space-y-4">
                {selectedCompetitor && (
                  <>
                    {/* View Toggle */}
                    <div className="flex gap-2 p-1 rounded-lg bg-slate-800">
                      {['intel', 'swot', 'pricing'].map(view => (
                        <button
                          key={view}
                          onClick={() => setActiveView(view)}
                          className={`flex-1 px-4 py-2 rounded-md text-sm font-medium transition-all ${
                            activeView === view 
                              ? 'bg-cyan-500 text-black' 
                              : 'text-slate-400 hover:text-white'
                          }`}
                        >
                          {view === 'intel' && 'üéØ Intel'}
                          {view === 'swot' && 'üìä SWOT'}
                          {view === 'pricing' && 'üí∞ Pricing'}
                        </button>
                      ))}
                    </div>

                    {/* View Content */}
                    {activeView === 'intel' && (
                      <>
                        {/* Strengths & Weaknesses Grid */}
                        <div className="grid grid-cols-2 gap-4">
                          <Card className="p-4">
                            <h4 className="text-sm font-semibold text-red-400 mb-3 flex items-center gap-2">
                              <Icon name="alert" className="w-4 h-4" />
                              Their Strengths (Our Threats)
                            </h4>
                            <ul className="space-y-2">
                              {selectedCompetitor.strengths.map((s, i) => (
                                <li key={i} className="flex items-start gap-2 text-sm text-slate-300">
                                  <span className="text-red-400 mt-1">‚Ä¢</span>
                                  {s}
                                </li>
                              ))}
                            </ul>
                          </Card>
                          
                          <Card className="p-4">
                            <h4 className="text-sm font-semibold text-emerald-400 mb-3 flex items-center gap-2">
                              <Icon name="target" className="w-4 h-4" />
                              Their Weaknesses (Attack Points)
                            </h4>
                            <ul className="space-y-2">
                              {selectedCompetitor.weaknesses.map((w, i) => (
                                <li key={i} className="flex items-start gap-2 text-sm text-slate-300">
                                  <span className="text-emerald-400 mt-1">‚Ä¢</span>
                                  {w}
                                </li>
                              ))}
                            </ul>
                          </Card>
                        </div>

                        {/* Ghosting Strategy */}
                        <GhostingStrategyPanel competitor={selectedCompetitor} />
                      </>
                    )}

                    {activeView === 'swot' && (
                      <SWOTMatrix competitor={selectedCompetitor} />
                    )}

                    {activeView === 'pricing' && (
                      <PriceToWinPanel competitor={selectedCompetitor} />
                    )}
                  </>
                )}
              </div>

              {/* Right Sidebar - Stats & Actions */}
              <div className="col-span-4 space-y-4">
                {/* Win Probability */}
                <Card className="p-4">
                  <h4 className="text-sm font-semibold text-white mb-4">Win Probability Analysis</h4>
                  <div className="space-y-3">
                    {COMPETITORS.map(comp => (
                      <div key={comp.id} className="flex items-center gap-3">
                        <div 
                          className="w-8 h-8 rounded flex items-center justify-center text-sm font-bold"
                          style={{ background: `${comp.logoColor}20`, color: comp.logoColor }}
                        >
                          {comp.logo}
                        </div>
                        <div className="flex-1">
                          <div className="flex items-center justify-between mb-1">
                            <span className="text-xs text-slate-400">{comp.name}</span>
                            <span className="text-xs font-semibold" style={{ 
                              color: comp.winProbability > 30 ? COLORS.danger : 
                                     comp.winProbability > 20 ? COLORS.warning : COLORS.success 
                            }}>{comp.winProbability}%</span>
                          </div>
                          <div className="h-1.5 bg-slate-700 rounded-full overflow-hidden">
                            <div 
                              className="h-full rounded-full transition-all duration-500"
                              style={{ 
                                width: `${comp.winProbability}%`,
                                background: comp.winProbability > 30 ? COLORS.danger : 
                                           comp.winProbability > 20 ? COLORS.warning : COLORS.success
                              }}
                            />
                          </div>
                        </div>
                      </div>
                    ))}
                    <div className="pt-3 border-t border-slate-700">
                      <div className="flex items-center justify-between">
                        <span className="text-xs text-slate-400">Your Team</span>
                        <span className="text-sm font-bold text-cyan-400">25%</span>
                      </div>
                      <div className="h-2 bg-slate-700 rounded-full mt-1 overflow-hidden">
                        <div 
                          className="h-full rounded-full"
                          style={{ width: '25%', background: 'linear-gradient(90deg, #00E5FA, #A855F7)' }}
                        />
                      </div>
                    </div>
                  </div>
                </Card>

                {/* Intel Timeline */}
                {selectedCompetitor && (
                  <IntelTimeline competitor={selectedCompetitor} />
                )}

                {/* Quick Actions */}
                <Card className="p-4">
                  <h4 className="text-sm font-semibold text-white mb-3">Quick Actions</h4>
                  <div className="space-y-2">
                    <Button variant="primary" icon="document" className="w-full justify-start">
                      Generate Ghost Language
                    </Button>
                    <Button variant="outline" icon="chart" className="w-full justify-start">
                      Full Competitor Report
                    </Button>
                    <Button variant="outline" icon="users" className="w-full justify-start">
                      Add to Capture Plan
                    </Button>
                  </div>
                </Card>

                {/* Intel Alert */}
                <Card className="p-4 border-amber-500/30 bg-amber-500/5">
                  <div className="flex items-start gap-3">
                    <div className="p-2 rounded-lg bg-amber-500/20">
                      <Icon name="alert" className="w-5 h-5 text-amber-400" />
                    </div>
                    <div>
                      <h5 className="text-sm font-semibold text-amber-400">Intel Alert</h5>
                      <p className="text-xs text-slate-400 mt-1">
                        GovCorp filed a protest on similar contract last month. Monitor for bid protest risk.
                      </p>
                      <Button variant="warning" size="sm" className="mt-3">
                        View Details
                      </Button>
                    </div>
                  </div>
                </Card>
              </div>
            </div>
          </main>

          {/* Footer */}
          <footer className="border-t mt-8 py-4" style={{ borderColor: COLORS.border }}>
            <div className="max-w-7xl mx-auto px-6 flex items-center justify-between">
              <span className="text-xs text-slate-500">MissionPulse v12 ‚Ä¢ M7 Black Hat Intel ‚Ä¢ INTERNAL USE ONLY</span>
              <Badge variant="warning" size="xs">AI GENERATED - REQUIRES HUMAN REVIEW</Badge>
            </div>
          </footer>
        </div>
      );
    };

    // ========== RENDER WITH ERROR BOUNDARY ==========
    ReactDOM.render(
      <ErrorBoundary>
        <BlackHatIntel />
      </ErrorBoundary>,
      document.getElementById('root')
    );
  </script>
</body>
</html>
