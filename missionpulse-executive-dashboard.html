<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MissionPulse - Executive Dashboard</title>
  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: 'Inter', sans-serif; background: #00050F; min-height: 100vh; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }
    @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
    @keyframes spin { to { transform: rotate(360deg); } }
    @keyframes slideIn { from { opacity: 0; transform: translateX(-10px); } to { opacity: 1; transform: translateX(0); } }
    .animate-fade-in { animation: fadeIn 0.4s ease-out; }
    .animate-pulse { animation: pulse 2s ease-in-out infinite; }
    .animate-spin { animation: spin 1s linear infinite; }
    .animate-slide-in { animation: slideIn 0.3s ease-out; }
    ::-webkit-scrollbar { width: 6px; }
    ::-webkit-scrollbar-track { background: #0f172a; }
    ::-webkit-scrollbar-thumb { background: #334155; border-radius: 3px; }
  </style>
  <script src="rbac-guard.js"></script>
</head>
<body>
  <div id="root"></div>
  <script type="text/babel">
    const { useState, useEffect, useMemo } = React;

    // ============================================================================
    // CONFIG
    // ============================================================================
    const SUPABASE_URL = 'https://qdrtpnpnhkxvfmvfziop.supabase.co';
    const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFkcnRwbnBuaGt4dmZtdmZ6aW9wIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mzc4MjMwMzcsImV4cCI6MjA1MzM5OTAzN30.sGmvSPxaAjOjFkFkqU3MRajBSFjHlxgNQSeS07l0bH0';
    const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

    // ============================================================================
    // ICONS
    // ============================================================================
    const Icons = {
      home: () => <svg className="w-full h-full" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" /></svg>,
      trendingUp: () => <svg className="w-full h-full" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6" /></svg>,
      users: () => <svg className="w-full h-full" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z" /></svg>,
      clipboard: () => <svg className="w-full h-full" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2" /></svg>,
      dollarSign: () => <svg className="w-full h-full" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>,
      shield: () => <svg className="w-full h-full" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z" /></svg>,
      trophy: () => <svg className="w-full h-full" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z" /></svg>,
      target: () => <svg className="w-full h-full" fill="none" stroke="currentColor" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10" strokeWidth={2}/><circle cx="12" cy="12" r="6" strokeWidth={2}/><circle cx="12" cy="12" r="2" strokeWidth={2}/></svg>,
      activity: () => <svg className="w-full h-full" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M22 12h-4l-3 9L9 3l-3 9H2" /></svg>,
      clock: () => <svg className="w-full h-full" fill="none" stroke="currentColor" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10" strokeWidth={2}/><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 6v6l4 2" /></svg>,
      alertCircle: () => <svg className="w-full h-full" fill="none" stroke="currentColor" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10" strokeWidth={2}/><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 8v4m0 4h.01" /></svg>,
      checkCircle: () => <svg className="w-full h-full" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>,
      arrowRight: () => <svg className="w-full h-full" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M14 5l7 7m0 0l-7 7m7-7H3" /></svg>,
      arrowLeft: () => <svg className="w-full h-full" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M10 19l-7-7m0 0l7-7m-7 7h18" /></svg>,
      refresh: () => <svg className="w-full h-full" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" /></svg>,
      database: () => <svg className="w-full h-full" fill="none" stroke="currentColor" viewBox="0 0 24 24"><ellipse cx="12" cy="5" rx="9" ry="3" strokeWidth={2}/><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"/><path strokeWidth={2} d="M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"/></svg>,
      eye: () => <svg className="w-full h-full" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" /><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" /></svg>,
      book: () => <svg className="w-full h-full" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253" /></svg>,
    };

    const Icon = ({ name, className = "w-4 h-4" }) => {
      const IconComponent = Icons[name];
      return IconComponent ? <span className={`inline-block ${className}`}><IconComponent /></span> : null;
    };

    // ============================================================================
    // UI COMPONENTS
    // ============================================================================
    const Card = ({ children, className = '', glow = false, onClick }) => (
      <div 
        onClick={onClick}
        className={`bg-slate-800/50 backdrop-blur-sm border border-slate-700/50 rounded-xl transition-all ${glow ? 'shadow-lg shadow-cyan-500/20 border-cyan-500/30' : ''} ${onClick ? 'cursor-pointer hover:border-slate-600' : ''} ${className}`}
      >
        {children}
      </div>
    );

    const Badge = ({ children, variant = 'default', size = 'sm' }) => {
      const variants = { 
        default: 'bg-slate-700 text-slate-300', 
        primary: 'bg-cyan-500/20 text-cyan-400 border border-cyan-500/30', 
        success: 'bg-emerald-500/20 text-emerald-400 border border-emerald-500/30', 
        warning: 'bg-amber-500/20 text-amber-400 border border-amber-500/30', 
        danger: 'bg-red-500/20 text-red-400 border border-red-500/30',
        purple: 'bg-purple-500/20 text-purple-400 border border-purple-500/30'
      };
      const sizes = { xs: 'px-1.5 py-0.5 text-xs', sm: 'px-2 py-1 text-xs', md: 'px-3 py-1.5 text-sm' };
      return <span className={`inline-flex items-center rounded-full font-medium ${variants[variant]} ${sizes[size]}`}>{children}</span>;
    };

    const Button = ({ children, variant = 'primary', size = 'md', icon, className = '', ...props }) => {
      const variants = { 
        primary: 'bg-gradient-to-r from-cyan-500 to-teal-500 text-white hover:from-cyan-400 hover:to-teal-400', 
        secondary: 'bg-slate-700 text-white hover:bg-slate-600 border border-slate-600', 
        ghost: 'bg-transparent text-slate-400 hover:text-white hover:bg-slate-700/50'
      };
      const sizes = { sm: 'px-3 py-1.5 text-sm', md: 'px-4 py-2 text-sm' };
      return (
        <button className={`inline-flex items-center justify-center gap-2 font-semibold rounded-lg transition-all ${variants[variant]} ${sizes[size]} ${className}`} {...props}>
          {icon && <Icon name={icon} className="w-4 h-4" />}{children}
        </button>
      );
    };

    // ============================================================================
    // DEMO DATA
    // ============================================================================
    const DEMO_METRICS = {
      total_opportunities: 12,
      capture_stage: 5,
      proposal_stage: 4,
      total_pipeline: 847000000,
      hitl_pending: 8,
      sections_approved: 24,
      competitors_tracked: 15,
      themes_approved: 5,
      lessons_count: 12,
      team_members: 8
    };

    const DEMO_OPPORTUNITIES = [
      { id: 1, title: 'DHA Healthcare Data Platform', nickname: 'Horizon', ceiling: 125000000, stage: 'Proposal', pwin: 72, due_date: '2026-02-15' },
      { id: 2, title: 'VA EHR Modernization', nickname: 'Phoenix', ceiling: 89000000, stage: 'Capture', pwin: 45, due_date: '2026-03-01' },
      { id: 3, title: 'CMS Cloud Migration', nickname: 'Nimbus', ceiling: 156000000, stage: 'Proposal', pwin: 68, due_date: '2026-02-28' },
      { id: 4, title: 'IHS Telehealth Expansion', nickname: 'Bridge', ceiling: 42000000, stage: 'Capture', pwin: 55, due_date: '2026-04-15' },
    ];

    const DEMO_ACTIVITY = [
      { id: 1, action_type: 'section_approved', description: 'Technical Approach L.4.1 approved by M. Womack', created_at: new Date(Date.now() - 3600000).toISOString() },
      { id: 2, action_type: 'competitor_added', description: 'Added Leidos as competitor for DHA Opportunity', created_at: new Date(Date.now() - 7200000).toISOString() },
      { id: 3, action_type: 'hitl_review', description: 'Compliance section sent to HITL queue', created_at: new Date(Date.now() - 10800000).toISOString() },
      { id: 4, action_type: 'theme_created', description: 'New win theme: FedRAMP cost savings discriminator', created_at: new Date(Date.now() - 14400000).toISOString() },
      { id: 5, action_type: 'lesson_added', description: 'Captured orals prep lesson from VA contract', created_at: new Date(Date.now() - 18000000).toISOString() },
    ];

    // ============================================================================
    // MAIN COMPONENT
    // ============================================================================
    const ExecutiveDashboard = () => {
      const [metrics, setMetrics] = useState(DEMO_METRICS);
      const [opportunities, setOpportunities] = useState(DEMO_OPPORTUNITIES);
      const [activity, setActivity] = useState(DEMO_ACTIVITY);
      const [loading, setLoading] = useState(true);
      const [dbConnected, setDbConnected] = useState(false);

      useEffect(() => { loadData(); }, []);

      const loadData = async () => {
        setLoading(true);
        try {
          // Load opportunities
          const { data: oppData, error: oppError } = await supabase
            .from('opportunities')
            .select('*')
            .order('ceiling', { ascending: false })
            .limit(6);
          
          // Load activity
          const { data: actData, error: actError } = await supabase
            .from('activity_log')
            .select('*')
            .order('created_at', { ascending: false })
            .limit(10);

          // Load counts
          const [hitlRes, sectionsRes, competitorsRes, themesRes, lessonsRes, profilesRes] = await Promise.all([
            supabase.from('hitl_queue').select('id', { count: 'exact' }).eq('status', 'pending'),
            supabase.from('proposal_sections').select('id', { count: 'exact' }).eq('status', 'approved'),
            supabase.from('competitors').select('id', { count: 'exact' }),
            supabase.from('win_themes').select('id', { count: 'exact' }).eq('status', 'approved'),
            supabase.from('lessons_learned').select('id', { count: 'exact' }),
            supabase.from('profiles').select('id', { count: 'exact' })
          ]);

          if (!oppError && oppData?.length) {
            setOpportunities(oppData);
            const totalPipeline = oppData.reduce((sum, o) => sum + (o.ceiling || 0), 0);
            setMetrics(prev => ({
              ...prev,
              total_opportunities: oppData.length,
              total_pipeline: totalPipeline,
              hitl_pending: hitlRes.count || 0,
              sections_approved: sectionsRes.count || 0,
              competitors_tracked: competitorsRes.count || 0,
              themes_approved: themesRes.count || 0,
              lessons_count: lessonsRes.count || 0,
              team_members: profilesRes.count || 0
            }));
            setDbConnected(true);
          }

          if (!actError && actData?.length) {
            setActivity(actData);
          }
        } catch (err) {
          console.warn('Using demo data:', err);
        }
        setLoading(false);
      };

      const formatCurrency = (value) => {
        if (value >= 1000000000) return `$${(value / 1000000000).toFixed(1)}B`;
        if (value >= 1000000) return `$${(value / 1000000).toFixed(0)}M`;
        if (value >= 1000) return `$${(value / 1000).toFixed(0)}K`;
        return `$${value}`;
      };

      const formatTimeAgo = (timestamp) => {
        const diff = Date.now() - new Date(timestamp).getTime();
        const mins = Math.floor(diff / 60000);
        const hours = Math.floor(diff / 3600000);
        const days = Math.floor(diff / 86400000);
        if (days > 0) return `${days}d ago`;
        if (hours > 0) return `${hours}h ago`;
        return `${mins}m ago`;
      };

      const getActivityIcon = (type) => {
        const icons = {
          section_approved: { icon: 'checkCircle', color: 'text-emerald-400' },
          competitor_added: { icon: 'target', color: 'text-red-400' },
          hitl_review: { icon: 'clipboard', color: 'text-amber-400' },
          theme_created: { icon: 'trophy', color: 'text-yellow-400' },
          lesson_added: { icon: 'book', color: 'text-purple-400' },
          pricing_updated: { icon: 'dollarSign', color: 'text-green-400' },
          user_invited: { icon: 'users', color: 'text-cyan-400' },
          opportunity_created: { icon: 'target', color: 'text-cyan-400' }
        };
        return icons[type] || { icon: 'activity', color: 'text-slate-400' };
      };

      const getPwinColor = (pwin) => {
        if (pwin >= 70) return 'text-emerald-400';
        if (pwin >= 50) return 'text-amber-400';
        return 'text-red-400';
      };

      // ========================================================================
      // RENDER
      // ========================================================================
      return (
        <div className="min-h-screen bg-gradient-to-br from-slate-900 via-slate-900 to-slate-800 text-white p-6">
          <div className="max-w-7xl mx-auto">
            {/* Header */}
            <div className="flex items-center justify-between mb-8">
              <div className="flex items-center gap-4">
                <a href="index.html" className="p-2 rounded-lg bg-slate-800/50 hover:bg-slate-700/50">
                  <Icon name="arrowLeft" className="w-5 h-5 text-slate-400" />
                </a>
                <div>
                  <h1 className="text-3xl font-bold flex items-center gap-3">
                    <div className="w-12 h-12 rounded-xl bg-gradient-to-br from-cyan-500 to-teal-500 flex items-center justify-center">
                      <Icon name="home" className="w-6 h-6 text-white" />
                    </div>
                    Executive Dashboard
                  </h1>
                  <p className="text-slate-400 mt-1">Mission Meets Tech â€¢ Pipeline Overview</p>
                </div>
              </div>
              <div className="flex items-center gap-3">
                <Badge variant={dbConnected ? 'success' : 'warning'}>{dbConnected ? 'Live Data' : 'Demo Mode'}</Badge>
                <Button variant="ghost" size="sm" icon="refresh" onClick={loadData}>Refresh</Button>
              </div>
            </div>

            {/* Key Metrics */}
            <div className="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-4 mb-8">
              <Card className="p-5" glow>
                <div className="flex items-center justify-between mb-2">
                  <Icon name="dollarSign" className="w-5 h-5 text-emerald-400" />
                  <Badge variant="success" size="xs">Pipeline</Badge>
                </div>
                <div className="text-3xl font-bold text-white">{formatCurrency(metrics.total_pipeline)}</div>
                <div className="text-xs text-slate-400 mt-1">{metrics.total_opportunities} opportunities</div>
              </Card>
              
              <Card className="p-5">
                <div className="flex items-center justify-between mb-2">
                  <Icon name="target" className="w-5 h-5 text-cyan-400" />
                </div>
                <div className="text-3xl font-bold text-cyan-400">{metrics.capture_stage}</div>
                <div className="text-xs text-slate-400 mt-1">In Capture</div>
              </Card>

              <Card className="p-5">
                <div className="flex items-center justify-between mb-2">
                  <Icon name="clipboard" className="w-5 h-5 text-amber-400" />
                </div>
                <div className="text-3xl font-bold text-amber-400">{metrics.hitl_pending}</div>
                <div className="text-xs text-slate-400 mt-1">HITL Pending</div>
              </Card>

              <Card className="p-5">
                <div className="flex items-center justify-between mb-2">
                  <Icon name="trophy" className="w-5 h-5 text-yellow-400" />
                </div>
                <div className="text-3xl font-bold text-yellow-400">{metrics.themes_approved}</div>
                <div className="text-xs text-slate-400 mt-1">Win Themes</div>
              </Card>

              <Card className="p-5">
                <div className="flex items-center justify-between mb-2">
                  <Icon name="users" className="w-5 h-5 text-purple-400" />
                </div>
                <div className="text-3xl font-bold text-purple-400">{metrics.team_members}</div>
                <div className="text-xs text-slate-400 mt-1">Team Members</div>
              </Card>
            </div>

            <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
              {/* Pipeline Overview */}
              <div className="lg:col-span-2">
                <Card className="p-5">
                  <div className="flex items-center justify-between mb-4">
                    <h2 className="text-lg font-semibold flex items-center gap-2">
                      <Icon name="trendingUp" className="w-5 h-5 text-cyan-400" />
                      Active Pipeline
                    </h2>
                    <a href="missionpulse-m1-enhanced.html" className="text-xs text-cyan-400 hover:underline flex items-center gap-1">
                      View All <Icon name="arrowRight" className="w-3 h-3" />
                    </a>
                  </div>
                  
                  <div className="space-y-3">
                    {opportunities.map((opp, idx) => (
                      <div 
                        key={opp.id} 
                        className="p-4 bg-slate-900/50 rounded-lg border border-slate-700/50 hover:border-slate-600 transition-all animate-fade-in"
                        style={{ animationDelay: `${idx * 100}ms` }}
                      >
                        <div className="flex items-center justify-between mb-2">
                          <div>
                            <h3 className="font-medium">{opp.title}</h3>
                            <span className="text-xs text-slate-500">"{opp.nickname}"</span>
                          </div>
                          <div className="text-right">
                            <div className="text-lg font-bold text-emerald-400">{formatCurrency(opp.ceiling)}</div>
                            <Badge variant={opp.stage === 'Proposal' ? 'warning' : 'primary'} size="xs">{opp.stage}</Badge>
                          </div>
                        </div>
                        <div className="flex items-center justify-between">
                          <div className="flex items-center gap-4 text-xs text-slate-400">
                            <span className="flex items-center gap-1">
                              <Icon name="clock" className="w-3 h-3" />
                              Due: {opp.due_date || 'TBD'}
                            </span>
                          </div>
                          <div className="flex items-center gap-2">
                            <span className="text-xs text-slate-400">pWin:</span>
                            <span className={`font-bold ${getPwinColor(opp.pwin || 50)}`}>{opp.pwin || 50}%</span>
                          </div>
                        </div>
                        {/* pWin Bar */}
                        <div className="mt-2 h-1.5 bg-slate-700 rounded-full overflow-hidden">
                          <div 
                            className={`h-full transition-all ${opp.pwin >= 70 ? 'bg-emerald-500' : opp.pwin >= 50 ? 'bg-amber-500' : 'bg-red-500'}`}
                            style={{ width: `${opp.pwin || 50}%` }}
                          />
                        </div>
                      </div>
                    ))}
                  </div>
                </Card>

                {/* Quick Stats Row */}
                <div className="grid grid-cols-4 gap-4 mt-6">
                  <Card className="p-4 text-center" onClick={() => window.location.href='missionpulse-m10-writer-live.html'}>
                    <div className="text-2xl font-bold text-cyan-400">{metrics.sections_approved}</div>
                    <div className="text-xs text-slate-400">Sections Approved</div>
                  </Card>
                  <Card className="p-4 text-center" onClick={() => window.location.href='missionpulse-m7-blackhat-live.html'}>
                    <div className="text-2xl font-bold text-red-400">{metrics.competitors_tracked}</div>
                    <div className="text-xs text-slate-400">Competitors</div>
                  </Card>
                  <Card className="p-4 text-center" onClick={() => window.location.href='missionpulse-m13-lessons-live.html'}>
                    <div className="text-2xl font-bold text-purple-400">{metrics.lessons_count}</div>
                    <div className="text-xs text-slate-400">Lessons</div>
                  </Card>
                  <Card className="p-4 text-center" onClick={() => window.location.href='missionpulse-m9-hitl-live.html'}>
                    <div className="text-2xl font-bold text-amber-400">{metrics.hitl_pending}</div>
                    <div className="text-xs text-slate-400">HITL Queue</div>
                  </Card>
                </div>
              </div>

              {/* Activity Feed */}
              <div>
                <Card className="p-5">
                  <div className="flex items-center justify-between mb-4">
                    <h2 className="text-lg font-semibold flex items-center gap-2">
                      <Icon name="activity" className="w-5 h-5 text-cyan-400" />
                      Recent Activity
                    </h2>
                    <Badge variant="primary" size="xs">{activity.length} events</Badge>
                  </div>
                  
                  <div className="space-y-3 max-h-96 overflow-y-auto">
                    {activity.map((item, idx) => {
                      const actIcon = getActivityIcon(item.action_type);
                      return (
                        <div 
                          key={item.id} 
                          className="flex items-start gap-3 p-3 bg-slate-900/30 rounded-lg animate-slide-in"
                          style={{ animationDelay: `${idx * 50}ms` }}
                        >
                          <div className={`p-2 rounded-lg bg-slate-800 ${actIcon.color}`}>
                            <Icon name={actIcon.icon} className="w-4 h-4" />
                          </div>
                          <div className="flex-1 min-w-0">
                            <p className="text-sm text-slate-300">{item.description}</p>
                            <span className="text-xs text-slate-500">{formatTimeAgo(item.created_at)}</span>
                          </div>
                        </div>
                      );
                    })}
                  </div>
                </Card>

                {/* Quick Actions */}
                <Card className="p-5 mt-6">
                  <h3 className="font-semibold mb-4">Quick Actions</h3>
                  <div className="grid grid-cols-2 gap-2">
                    <a href="missionpulse-m9-hitl-live.html" className="p-3 bg-amber-500/10 border border-amber-500/30 rounded-lg text-center hover:bg-amber-500/20 transition-all">
                      <Icon name="clipboard" className="w-5 h-5 text-amber-400 mx-auto mb-1" />
                      <div className="text-xs text-amber-400">Review Queue</div>
                    </a>
                    <a href="missionpulse-m10-writer-live.html" className="p-3 bg-cyan-500/10 border border-cyan-500/30 rounded-lg text-center hover:bg-cyan-500/20 transition-all">
                      <Icon name="clipboard" className="w-5 h-5 text-cyan-400 mx-auto mb-1" />
                      <div className="text-xs text-cyan-400">Write Section</div>
                    </a>
                    <a href="missionpulse-m12-winthemes-live.html" className="p-3 bg-yellow-500/10 border border-yellow-500/30 rounded-lg text-center hover:bg-yellow-500/20 transition-all">
                      <Icon name="trophy" className="w-5 h-5 text-yellow-400 mx-auto mb-1" />
                      <div className="text-xs text-yellow-400">Win Themes</div>
                    </a>
                    <a href="missionpulse-m11-orals-live.html" className="p-3 bg-purple-500/10 border border-purple-500/30 rounded-lg text-center hover:bg-purple-500/20 transition-all">
                      <Icon name="users" className="w-5 h-5 text-purple-400 mx-auto mb-1" />
                      <div className="text-xs text-purple-400">Orals Prep</div>
                    </a>
                  </div>
                </Card>
              </div>
            </div>

            {/* Footer */}
            <div className="mt-8 text-center text-xs text-slate-600">
              AI GENERATED CONTENT - REQUIRES HUMAN REVIEW | MissionPulse v12 | Executive Dashboard Sprint 24
            </div>
          </div>
        </div>
      );
    };

    ReactDOM.render(<ExecutiveDashboard />, document.getElementById('root'));
  </script>
</body>
</html>
