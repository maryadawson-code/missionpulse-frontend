<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MissionPulse v12.0 - Navigation Hub</title>
  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: 'Inter', sans-serif; background: #00050F; min-height: 100vh; }
    
    /* Shield & Pulse Design System v8.0 */
    :root {
      --deep-navy: #00050F;
      --navy-900: #0A1628;
      --navy-800: #111C2E;
      --navy-700: #1A2942;
      --navy-600: #243656;
      --primary-cyan: #00E5FA;
      --primary-cyan-glow: rgba(0, 229, 250, 0.25);
      --success-teal: #00BDAE;
      --warning-amber: #F59E0B;
      --risk-coral: #EF4444;
      --purple-500: #8B5CF6;
      --text-primary: #FFFFFF;
      --text-secondary: #94A3B8;
      --text-tertiary: #64748B;
    }
    
    @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
    @keyframes ping { 75%, 100% { transform: scale(2); opacity: 0; } }
    @keyframes spin { to { transform: rotate(360deg); } }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    @keyframes slideInUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
    @keyframes shimmer { 0% { background-position: -200% 0; } 100% { background-position: 200% 0; } }
    @keyframes glowPulse { 0%, 100% { box-shadow: 0 0 10px var(--primary-cyan-glow); } 50% { box-shadow: 0 0 30px var(--primary-cyan-glow), 0 0 60px rgba(0, 229, 250, 0.1); } }
    @keyframes countdownPulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.02); } }
    
    .animate-pulse { animation: pulse 2s ease-in-out infinite; }
    .animate-ping { animation: ping 1s cubic-bezier(0, 0, 0.2, 1) infinite; }
    .animate-spin { animation: spin 1s linear infinite; }
    .animate-fadeIn { animation: fadeIn 0.4s ease-out forwards; }
    .animate-slideInUp { animation: slideInUp 0.5s ease-out forwards; }
    .shimmer { background: linear-gradient(90deg, transparent 0%, rgba(0,229,250,0.1) 50%, transparent 100%); background-size: 200% 100%; animation: shimmer 2s infinite; }
    .glow-pulse { animation: glowPulse 3s ease-in-out infinite; }
    .countdown-pulse { animation: countdownPulse 1s ease-in-out infinite; }
    
    /* Custom scrollbar */
    ::-webkit-scrollbar { width: 8px; height: 8px; }
    ::-webkit-scrollbar-track { background: var(--navy-900); border-radius: 4px; }
    ::-webkit-scrollbar-thumb { background: var(--navy-600); border-radius: 4px; }
    ::-webkit-scrollbar-thumb:hover { background: var(--primary-cyan); }
    
    /* Card hover effect */
    .module-card { transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); }
    .module-card:hover { transform: translateY(-4px); box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3), 0 0 30px rgba(0, 229, 250, 0.1); }
  </style>
</head>
<body>
  <div id="root"></div>
  <script type="text/babel">
    const { useState, useEffect } = React;

    // ============================================
    // ICON LIBRARY
    // ============================================
    const Icons = {
      shield: () => <svg className="w-full h-full" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z" /></svg>,
      target: () => <svg className="w-full h-full" fill="none" stroke="currentColor" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10" strokeWidth={2}/><circle cx="12" cy="12" r="6" strokeWidth={2}/><circle cx="12" cy="12" r="2" strokeWidth={2}/></svg>,
      users: () => <svg className="w-full h-full" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z" /></svg>,
      edit: () => <svg className="w-full h-full" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" /></svg>,
      fileText: () => <svg className="w-full h-full" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" /></svg>,
      lock: () => <svg className="w-full h-full" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z" /></svg>,
      eye: () => <svg className="w-full h-full" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" /><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" /></svg>,
      zap: () => <svg className="w-full h-full" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M13 10V3L4 14h7v7l9-11h-7z" /></svg>,
      rocket: () => <svg className="w-full h-full" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M13 10V3L4 14h7v7l9-11h-7z" /></svg>,
      mic: () => <svg className="w-full h-full" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z" /></svg>,
      upload: () => <svg className="w-full h-full" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12" /></svg>,
      calculator: () => <svg className="w-full h-full" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z" /></svg>,
      presentation: () => <svg className="w-full h-full" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z" /></svg>,
      alert: () => <svg className="w-full h-full" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" /></svg>,
      handshake: () => <svg className="w-full h-full" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0z" /></svg>,
      trophy: () => <svg className="w-full h-full" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z" /></svg>,
      book: () => <svg className="w-full h-full" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253" /></svg>,
      settings: () => <svg className="w-full h-full" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" /><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" /></svg>,
      clipboard: () => <svg className="w-full h-full" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4" /></svg>,
      chevronLeft: () => <svg className="w-full h-full" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 19l-7-7 7-7" /></svg>,
      chevronRight: () => <svg className="w-full h-full" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 5l7 7-7 7" /></svg>,
      chevronDown: () => <svg className="w-full h-full" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 9l-7 7-7-7" /></svg>,
      menu: () => <svg className="w-full h-full" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M4 6h16M4 12h16M4 18h16" /></svg>,
      home: () => <svg className="w-full h-full" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" /></svg>,
      check: () => <svg className="w-full h-full" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 13l4 4L19 7" /></svg>,
      play: () => <svg className="w-full h-full" fill="currentColor" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>,
      sparkles: () => <svg className="w-full h-full" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z" /></svg>,
    };

    const Icon = ({ name, className = "w-4 h-4" }) => {
      const IconComponent = Icons[name];
      return IconComponent ? <span className={`inline-block ${className}`}><IconComponent /></span> : null;
    };

    // ============================================
    // DATA
    // ============================================
    const ROLES = [
      { id: 'ceo', label: 'CEO', access: 'admin', canView: ['all'] },
      { id: 'coo', label: 'COO', access: 'admin', canView: ['all'] },
      { id: 'cap', label: 'CAP (Capture Manager)', access: 'advanced', canView: ['all'] },
      { id: 'pm', label: 'PM (Program Manager)', access: 'standard', canView: ['pipeline', 'warroom', 'swimlane', 'writer', 'contracts', 'partners', 'postaward'] },
      { id: 'sa', label: 'SA (Solutions Architect)', access: 'standard', canView: ['pipeline', 'warroom', 'swimlane', 'writer', 'contracts'] },
      { id: 'fin', label: 'FIN (Financial Analyst)', access: 'standard', canView: ['pipeline', 'swimlane', 'pricing'] },
      { id: 'con', label: 'CON (Contracts)', access: 'standard', canView: ['pipeline', 'swimlane', 'contracts', 'irondome'] },
      { id: 'del', label: 'DEL (Delivery)', access: 'standard', canView: ['swimlane', 'postaward'] },
      { id: 'qa', label: 'QA (Quality)', access: 'simplified', canView: ['swimlane', 'irondome'] },
      { id: 'partner', label: 'Partner', access: 'simplified', canView: ['swimlane', 'partners'] },
      { id: 'admin', label: 'Admin', access: 'admin', canView: ['all'] },
    ];

    const MODULES = [
      { id: 'pipeline', name: 'Pipeline Intel', icon: 'target', href: 'missionpulse-m1-enhanced.html', category: 'strategy', description: 'DAFE scoring & opportunity pipeline', scene: 1 },
      { id: 'warroom', name: 'War Room', icon: 'users', href: 'missionpulse-m2-warroom-enhanced.html', category: 'strategy', description: 'Real-time collaboration hub', scene: 2 },
      { id: 'swimlane', name: 'Swimlane Board', icon: 'clipboard', href: 'missionpulse-m3-swimlane-board.html', category: 'workflow', description: 'Kanban-style task management', scene: 3 },
      { id: 'writer', name: 'Proposal Writer', icon: 'edit', href: 'missionpulse-m4-proposal-writer.html', category: 'drafting', description: 'AI-assisted section drafting', scene: 4 },
      { id: 'contracts', name: 'Contract Scanner', icon: 'fileText', href: 'missionpulse-m5-contracts-enhanced.html', category: 'compliance', description: 'RFP shredding & compliance matrix', scene: 5 },
      { id: 'irondome', name: 'Iron Dome', icon: 'shield', href: 'missionpulse-m6-iron-dome.html', category: 'compliance', description: 'CUI marking & security review', badge: 'CUI', scene: 6 },
      { id: 'blackhat', name: 'Black Hat', icon: 'eye', href: 'missionpulse-m7-blackhat-enhanced.html', category: 'intelligence', description: 'Competitive intelligence analysis', badge: 'PRIVATE', restricted: true, scene: 7 },
      { id: 'pricing', name: 'Pricing Engine', icon: 'calculator', href: 'missionpulse-m8-pricing.html', category: 'pricing', description: 'BOE & LCAT cost modeling', badge: 'CUI', scene: 8 },
      { id: 'orals', name: 'Orals Coach', icon: 'presentation', href: 'missionpulse-m9-hitl-enhanced.html', category: 'intelligence', description: 'Presentation prep & coaching', badge: 'PRIVATE', restricted: true, scene: 9 },
      { id: 'partners', name: 'Partner Wall', icon: 'handshake', href: 'missionpulse-m11-frenemy-protocol.html', category: 'partners', description: 'Teaming partner management', scene: 10 },
      { id: 'launch', name: 'Launch & ROI', icon: 'rocket', href: 'missionpulse-m13-launch-roi.html', category: 'delivery', description: 'Submission tracking & metrics', scene: 11 },
      { id: 'postaward', name: 'Post-Award', icon: 'trophy', href: 'missionpulse-m14-post-award.html', category: 'delivery', description: 'Transition & project kickoff', scene: 12 },
      { id: 'lessons', name: 'Lessons Playbook', icon: 'book', href: 'missionpulse-m15-lessons-playbook.html', category: 'knowledge', description: 'Capture best practices', scene: 13 },
      { id: 'rbac', name: 'RBAC Config', icon: 'settings', href: 'missionpulse-task16-rbac.html', category: 'admin', description: 'Role & permission settings', badge: 'ADMIN', restricted: true, scene: 14 },
    ];

    const CATEGORIES = [
      { id: 'all', label: 'All Modules', color: '#00E5FA' },
      { id: 'strategy', label: 'Strategy', color: '#8B5CF6' },
      { id: 'workflow', label: 'Workflow', color: '#00D29F' },
      { id: 'drafting', label: 'Drafting', color: '#00E5FA' },
      { id: 'compliance', label: 'Compliance', color: '#F59E0B' },
      { id: 'intelligence', label: 'Intelligence', color: '#EF4444' },
      { id: 'pricing', label: 'Pricing', color: '#00BDAE' },
      { id: 'partners', label: 'Partners', color: '#EC4899' },
      { id: 'delivery', label: 'Delivery', color: '#FFD700' },
      { id: 'knowledge', label: 'Knowledge', color: '#94A3B8' },
      { id: 'admin', label: 'Admin', color: '#64748B' },
    ];

    const OPPORTUNITY = {
      name: "DHA MHS GENESIS Cloud Migration",
      solicitation: "HT0011-26-R-0042",
      agency: "Defense Health Agency (DHA)",
      value: "$98,450,210",
      period: "5-Year IDIQ",
      dueDate: new Date('2026-03-01T17:00:00'),
      pWin: 72,
      gateStatus: 'CONDITIONAL GO'
    };

    // ============================================
    // UI COMPONENTS
    // ============================================
    const Badge = ({ children, variant = 'default', size = 'sm', icon, pulse }) => {
      const variants = {
        default: 'bg-slate-700/50 text-slate-300 border-slate-600',
        primary: 'bg-cyan-500/20 text-cyan-400 border-cyan-500/30',
        success: 'bg-emerald-500/20 text-emerald-400 border-emerald-500/30',
        warning: 'bg-amber-500/20 text-amber-400 border-amber-500/30',
        danger: 'bg-red-500/20 text-red-400 border-red-500/30',
        purple: 'bg-purple-500/20 text-purple-400 border-purple-500/30',
        gold: 'bg-amber-400/20 text-amber-300 border-amber-400/30',
      };
      const sizes = { xs: 'px-1.5 py-0.5 text-[10px]', sm: 'px-2 py-0.5 text-xs', md: 'px-3 py-1 text-sm' };
      return (
        <span className={`inline-flex items-center gap-1 rounded font-semibold border ${variants[variant]} ${sizes[size]} ${pulse ? 'animate-pulse' : ''}`}>
          {icon && <Icon name={icon} className="w-3 h-3" />}
          {children}
        </span>
      );
    };

    const Button = ({ children, variant = 'primary', size = 'md', icon, onClick, disabled, className = '' }) => {
      const variants = {
        primary: 'bg-gradient-to-r from-cyan-500 to-teal-500 hover:from-cyan-400 hover:to-teal-400 text-white shadow-lg shadow-cyan-500/25',
        secondary: 'bg-slate-700 hover:bg-slate-600 text-white border border-slate-600',
        ghost: 'bg-transparent hover:bg-slate-800 text-slate-300 hover:text-white',
        gold: 'bg-gradient-to-r from-amber-400 to-yellow-500 hover:from-amber-300 hover:to-yellow-400 text-slate-900 shadow-lg shadow-amber-500/25',
      };
      const sizes = { xs: 'px-2 py-1 text-xs', sm: 'px-3 py-1.5 text-sm', md: 'px-4 py-2 text-sm', lg: 'px-6 py-3 text-base' };
      return (
        <button onClick={onClick} disabled={disabled} className={`inline-flex items-center justify-center gap-2 rounded-lg font-medium transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed ${variants[variant]} ${sizes[size]} ${className}`}>
          {icon && <Icon name={icon} className="w-4 h-4" />}
          {children}
        </button>
      );
    };

    // ============================================
    // SIDEBAR
    // ============================================
    const Sidebar = ({ isOpen, onToggle, currentRole, modules }) => {
      const visibleModules = modules.filter(m => {
        if (currentRole.canView.includes('all')) return true;
        return currentRole.canView.includes(m.id);
      });

      return (
        <>
          {isOpen && <div className="fixed inset-0 bg-black/50 z-40 lg:hidden" onClick={onToggle} />}
          <aside className={`fixed top-0 left-0 h-full bg-slate-900/95 backdrop-blur-sm border-r border-slate-700/50 z-50 transition-all duration-300 ${isOpen ? 'w-64' : 'w-16'} flex flex-col`}>
            <div className="p-4 border-b border-slate-700/50">
              <div className="flex items-center gap-3">
                <div className="w-10 h-10 rounded-xl bg-gradient-to-br from-cyan-500 to-teal-500 flex items-center justify-center flex-shrink-0 glow-pulse">
                  <Icon name="shield" className="w-6 h-6 text-white" />
                </div>
                {isOpen && (
                  <div>
                    <span className="font-bold text-white">MissionPulse</span>
                    <p className="text-xs text-cyan-400">v12.0 Ultimate</p>
                  </div>
                )}
              </div>
            </div>

            <nav className="flex-1 overflow-y-auto py-4">
              <a href="#" className="flex items-center gap-3 px-4 py-2.5 mx-2 rounded-lg bg-cyan-500/20 text-cyan-400 border border-cyan-500/30 mb-2">
                <Icon name="home" className="w-5 h-5 flex-shrink-0" />
                {isOpen && <span className="text-sm">Dashboard</span>}
              </a>
              
              {isOpen && <p className="px-4 py-2 text-xs text-slate-500 font-semibold uppercase tracking-wider">Modules</p>}
              
              {visibleModules.map(module => (
                <a
                  key={module.id}
                  href={module.href}
                  className="flex items-center gap-3 px-4 py-2 mx-2 rounded-lg text-slate-400 hover:text-white hover:bg-slate-800 transition-all"
                >
                  <Icon name={module.icon} className="w-5 h-5 flex-shrink-0" />
                  {isOpen && (
                    <>
                      <span className="flex-1 text-sm truncate">{module.name}</span>
                      {module.badge === 'CUI' && <Badge variant="warning" size="xs">CUI</Badge>}
                      {module.badge === 'PRIVATE' && <Badge variant="danger" size="xs">PRIVATE</Badge>}
                      {module.badge === 'ADMIN' && <Badge variant="default" size="xs">ADMIN</Badge>}
                    </>
                  )}
                </a>
              ))}
            </nav>

            <div className="p-4 border-t border-slate-700/50">
              <button onClick={onToggle} className="w-full flex items-center justify-center gap-2 px-3 py-2 rounded-lg bg-slate-800 hover:bg-slate-700 text-slate-400 hover:text-white transition-all">
                <Icon name={isOpen ? 'chevronLeft' : 'chevronRight'} className="w-4 h-4" />
                {isOpen && <span className="text-sm">Collapse</span>}
              </button>
            </div>
          </aside>
        </>
      );
    };

    // ============================================
    // COUNTDOWN TIMER
    // ============================================
    const CountdownTimer = ({ targetDate }) => {
      const [timeLeft, setTimeLeft] = useState({ days: 0, hours: 0, minutes: 0, seconds: 0 });

      useEffect(() => {
        const timer = setInterval(() => {
          const now = new Date();
          const diff = targetDate - now;
          
          if (diff > 0) {
            setTimeLeft({
              days: Math.floor(diff / (1000 * 60 * 60 * 24)),
              hours: Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60)),
              minutes: Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60)),
              seconds: Math.floor((diff % (1000 * 60)) / 1000)
            });
          }
        }, 1000);
        return () => clearInterval(timer);
      }, [targetDate]);

      const isUrgent = timeLeft.days < 30;

      return (
        <div className={`flex items-center gap-4 ${isUrgent ? 'countdown-pulse' : ''}`}>
          {[
            { value: timeLeft.days, label: 'DAYS' },
            { value: timeLeft.hours, label: 'HRS' },
            { value: timeLeft.minutes, label: 'MIN' },
            { value: timeLeft.seconds, label: 'SEC' }
          ].map((unit, i) => (
            <div key={unit.label} className="flex items-center gap-2">
              <div className="text-center">
                <div className={`text-2xl font-bold font-mono ${isUrgent ? 'text-red-400' : 'text-white'}`}>
                  {String(unit.value).padStart(2, '0')}
                </div>
                <div className="text-[10px] text-slate-500 font-medium tracking-wider">{unit.label}</div>
              </div>
              {i < 3 && <span className="text-slate-600 text-xl animate-pulse">:</span>}
            </div>
          ))}
        </div>
      );
    };

    // ============================================
    // MODULE CARD
    // ============================================
    const ModuleCard = ({ module, category }) => (
      <a
        href={module.href}
        className="module-card block p-5 rounded-xl bg-slate-800/50 border border-slate-700/50 hover:border-cyan-500/30"
        style={{ animationDelay: `${module.scene * 50}ms` }}
      >
        <div className="flex items-start justify-between mb-3">
          <div className="w-12 h-12 rounded-xl flex items-center justify-center" style={{ backgroundColor: `${category?.color || '#00E5FA'}20` }}>
            <Icon name={module.icon} className="w-6 h-6" style={{ color: category?.color || '#00E5FA' }} />
          </div>
          <div className="flex gap-1">
            {module.badge === 'CUI' && <Badge variant="warning" size="xs">CUI</Badge>}
            {module.badge === 'PRIVATE' && <Badge variant="danger" size="xs">PRIVATE</Badge>}
            {module.badge === 'ADMIN' && <Badge variant="default" size="xs">ADMIN</Badge>}
          </div>
        </div>
        <h3 className="font-semibold text-white mb-1">{module.name}</h3>
        <p className="text-sm text-slate-400 mb-3">{module.description}</p>
        <div className="flex items-center justify-between">
          <Badge variant="default" size="xs">{category?.label || 'Module'}</Badge>
          <span className="text-xs text-slate-500">Scene {module.scene}</span>
        </div>
      </a>
    );

    // ============================================
    // MAIN APP
    // ============================================
    function NavigationHub() {
      const [sidebarOpen, setSidebarOpen] = useState(true);
      const [selectedRole, setSelectedRole] = useState(ROLES[2]); // CAP by default
      const [selectedCategory, setSelectedCategory] = useState('all');

      // Filter modules based on role and category
      const visibleModules = MODULES.filter(module => {
        // Role-based filtering (invisible RBAC)
        if (!selectedRole.canView.includes('all') && !selectedRole.canView.includes(module.id)) {
          return false;
        }
        // Category filtering
        if (selectedCategory !== 'all' && module.category !== selectedCategory) {
          return false;
        }
        return true;
      });

      return (
        <div className="min-h-screen bg-[#00050F]">
          {/* Background effects */}
          <div className="fixed inset-0 overflow-hidden pointer-events-none">
            <div className="absolute top-1/4 left-1/4 w-96 h-96 bg-cyan-500/5 rounded-full blur-3xl" />
            <div className="absolute bottom-1/4 right-1/4 w-96 h-96 bg-purple-500/5 rounded-full blur-3xl" />
          </div>

          {/* Sidebar */}
          <Sidebar 
            isOpen={sidebarOpen} 
            onToggle={() => setSidebarOpen(!sidebarOpen)}
            currentRole={selectedRole}
            modules={MODULES}
          />

          {/* Main Content */}
          <div className={`transition-all duration-300 ${sidebarOpen ? 'ml-64' : 'ml-16'}`}>
            {/* Header */}
            <header className="sticky top-0 z-30 bg-slate-900/80 backdrop-blur-sm border-b border-slate-700/50">
              <div className="flex items-center justify-between px-6 py-4">
                <div className="flex items-center gap-4">
                  <button onClick={() => setSidebarOpen(!sidebarOpen)} className="lg:hidden p-2 rounded-lg bg-slate-800 hover:bg-slate-700 text-slate-400">
                    <Icon name="menu" className="w-5 h-5" />
                  </button>
                  <div>
                    <h1 className="text-xl font-bold text-white">Mission Control</h1>
                    <p className="text-sm text-slate-500">Mission. Technology. Transformation.</p>
                  </div>
                </div>

                {/* Role Selector */}
                <div className="flex items-center gap-4">
                  <div className="relative">
                    <select
                      value={selectedRole.id}
                      onChange={(e) => setSelectedRole(ROLES.find(r => r.id === e.target.value))}
                      className="appearance-none bg-slate-800 border border-slate-700 rounded-lg px-4 py-2 pr-10 text-sm text-white cursor-pointer hover:border-cyan-500/50 transition-all"
                    >
                      {ROLES.map(role => (
                        <option key={role.id} value={role.id}>{role.label}</option>
                      ))}
                    </select>
                    <Icon name="chevronDown" className="w-4 h-4 absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 pointer-events-none" />
                  </div>
                  <Badge variant={selectedRole.access === 'admin' ? 'purple' : selectedRole.access === 'advanced' ? 'primary' : 'default'} size="sm">
                    {selectedRole.access.toUpperCase()}
                  </Badge>
                </div>
              </div>
            </header>

            <main className="p-6 pb-24">
              {/* Hero Card - Opportunity */}
              <div className="mb-8 p-6 rounded-2xl bg-gradient-to-br from-slate-800/80 to-slate-900/80 border border-slate-700/50 glow-pulse">
                <div className="flex flex-col lg:flex-row lg:items-center justify-between gap-6">
                  <div>
                    <div className="flex items-center gap-3 mb-2">
                      <Badge variant="gold" size="md" icon="target">P-0 MUST WIN</Badge>
                      <Badge variant={OPPORTUNITY.pWin >= 70 ? 'success' : 'warning'} size="md">
                        pWin: {OPPORTUNITY.pWin}%
                      </Badge>
                      <Badge variant="primary" size="md">{OPPORTUNITY.gateStatus}</Badge>
                    </div>
                    <h2 className="text-2xl font-bold text-white mb-1">{OPPORTUNITY.name}</h2>
                    <p className="text-slate-400 mb-2">{OPPORTUNITY.agency} • {OPPORTUNITY.solicitation}</p>
                    <div className="flex items-center gap-4 text-sm">
                      <span className="text-emerald-400 font-semibold">{OPPORTUNITY.value}</span>
                      <span className="text-slate-500">•</span>
                      <span className="text-slate-400">{OPPORTUNITY.period}</span>
                    </div>
                  </div>
                  
                  {/* Countdown */}
                  <div className="text-center lg:text-right">
                    <p className="text-xs text-slate-500 uppercase tracking-wider mb-2">Time to Submission</p>
                    <CountdownTimer targetDate={OPPORTUNITY.dueDate} />
                    <p className="text-xs text-slate-500 mt-2">March 1, 2026 @ 5:00 PM EST</p>
                  </div>
                </div>
              </div>

              {/* Category Filter */}
              <div className="mb-6 flex items-center gap-2 overflow-x-auto pb-2">
                {CATEGORIES.map(cat => (
                  <button
                    key={cat.id}
                    onClick={() => setSelectedCategory(cat.id)}
                    className={`px-4 py-2 rounded-lg text-sm font-medium whitespace-nowrap transition-all ${selectedCategory === cat.id ? 'text-white' : 'text-slate-400 hover:text-white hover:bg-slate-800'}`}
                    style={selectedCategory === cat.id ? { backgroundColor: `${cat.color}20`, border: `1px solid ${cat.color}40`, color: cat.color } : {}}
                  >
                    {cat.label}
                  </button>
                ))}
              </div>

              {/* Module Grid */}
              <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4">
                {visibleModules.map(module => (
                  <ModuleCard 
                    key={module.id} 
                    module={module}
                    category={CATEGORIES.find(c => c.id === module.category)}
                  />
                ))}
              </div>

              {visibleModules.length === 0 && (
                <div className="text-center py-16">
                  <Icon name="lock" className="w-16 h-16 text-slate-600 mx-auto mb-4" />
                  <h3 className="text-lg font-semibold text-slate-400 mb-2">No Modules Available</h3>
                  <p className="text-sm text-slate-500">Your current role doesn't have access to modules in this category.</p>
                </div>
              )}

              {/* Demo Flow Visualization */}
              <div className="mt-12">
                <h3 className="text-lg font-semibold text-white mb-4 flex items-center gap-2">
                  <Icon name="play" className="w-5 h-5 text-cyan-400" />
                  Demo Flow (Shipley Methodology)
                </h3>
                <div className="flex items-center gap-2 overflow-x-auto pb-4">
                  {MODULES.slice(0, 10).map((module, i) => {
                    const category = CATEGORIES.find(c => c.id === module.category);
                    const isAccessible = selectedRole.canView.includes('all') || selectedRole.canView.includes(module.id);
                    return (
                      <div key={module.id} className="flex items-center gap-2">
                        <a
                          href={isAccessible ? module.href : '#'}
                          className={`flex flex-col items-center p-3 rounded-xl transition-all ${isAccessible ? 'hover:scale-105' : 'opacity-40 cursor-not-allowed'}`}
                          style={{ backgroundColor: `${category?.color || '#00E5FA'}10`, border: `1px solid ${category?.color || '#00E5FA'}30` }}
                        >
                          <div className="w-8 h-8 rounded-lg flex items-center justify-center mb-1" style={{ backgroundColor: `${category?.color || '#00E5FA'}20` }}>
                            <Icon name={module.icon} className="w-4 h-4" style={{ color: category?.color || '#00E5FA' }} />
                          </div>
                          <span className="text-[10px] text-slate-400 text-center whitespace-nowrap">{module.name}</span>
                          <span className="text-[9px] text-slate-500">Scene {i + 1}</span>
                        </a>
                        {i < 9 && <Icon name="chevronRight" className="w-4 h-4 text-slate-600" />}
                      </div>
                    );
                  })}
                </div>
              </div>

              {/* Quick Stats */}
              <div className="mt-8 grid grid-cols-2 md:grid-cols-4 gap-4">
                {[
                  { label: 'Total Modules', value: visibleModules.length, icon: 'clipboard', color: '#00E5FA' },
                  { label: 'Current Role', value: selectedRole.label.split(' ')[0], icon: 'users', color: '#8B5CF6' },
                  { label: 'Access Level', value: selectedRole.access.toUpperCase(), icon: 'shield', color: '#00D29F' },
                  { label: 'AI Agents', value: '8 Active', icon: 'sparkles', color: '#F59E0B' },
                ].map(stat => (
                  <div key={stat.label} className="p-4 rounded-xl bg-slate-800/50 border border-slate-700/50">
                    <div className="flex items-center gap-3">
                      <div className="w-10 h-10 rounded-lg flex items-center justify-center" style={{ backgroundColor: `${stat.color}20` }}>
                        <Icon name={stat.icon} className="w-5 h-5" style={{ color: stat.color }} />
                      </div>
                      <div>
                        <p className="text-xs text-slate-500">{stat.label}</p>
                        <p className="text-lg font-bold text-white">{stat.value}</p>
                      </div>
                    </div>
                  </div>
                ))}
              </div>
            </main>

            {/* Footer */}
            <footer className="fixed bottom-0 left-0 right-0 bg-slate-900/95 border-t border-slate-700/50 px-6 py-3 z-20" style={{ marginLeft: sidebarOpen ? '16rem' : '4rem' }}>
              <div className="flex items-center justify-between">
                <div className="flex items-center gap-4">
                  <span className="text-sm font-semibold text-slate-400">Mission Meets Tech</span>
                  <span className="text-slate-600">•</span>
                  <span className="text-xs text-slate-500">MissionPulse v12.0 Ultimate</span>
                </div>
                <span className="text-xs text-amber-500 font-medium">AI GENERATED - REQUIRES HUMAN REVIEW</span>
              </div>
            </footer>
          </div>
        </div>
      );
    }

    ReactDOM.createRoot(document.getElementById('root')).render(<NavigationHub />);
  </script>
</body>
</html>
