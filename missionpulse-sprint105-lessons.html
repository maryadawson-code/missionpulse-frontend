<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lessons Learned Library - MissionPulse</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'mp-navy': '#00050F',
                        'mp-cyan': '#00E5FA',
                        'mp-slate': '#0A1628',
                        'mp-dark': '#020817'
                    },
                    fontFamily: {
                        'inter': ['Inter', 'sans-serif']
                    }
                }
            }
        }
    </script>
    <style>
        * { font-family: 'Inter', sans-serif; }
        .glow-cyan { box-shadow: 0 0 20px rgba(0, 229, 250, 0.3); }
        .lesson-card:hover { transform: translateY(-2px); transition: all 0.2s ease; }
    </style>
</head>
<body class="bg-mp-navy text-white min-h-screen">
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useMemo } = React;

        // Lesson categories
        const categories = [
            { id: 'capture', name: 'Capture Strategy', icon: 'üéØ' },
            { id: 'technical', name: 'Technical Approach', icon: '‚öôÔ∏è' },
            { id: 'pricing', name: 'Pricing & Cost', icon: 'üí∞' },
            { id: 'management', name: 'Management', icon: 'üìä' },
            { id: 'teaming', name: 'Teaming', icon: 'ü§ù' },
            { id: 'process', name: 'Proposal Process', icon: 'üìã' },
            { id: 'compliance', name: 'Compliance', icon: '‚úÖ' },
            { id: 'orals', name: 'Orals/Presentations', icon: 'üé§' }
        ];

        // Outcome types
        const outcomes = [
            { id: 'win', label: 'Win', color: 'bg-green-500/20 text-green-400' },
            { id: 'loss', label: 'Loss', color: 'bg-red-500/20 text-red-400' },
            { id: 'no_bid', label: 'No Bid', color: 'bg-slate-500/20 text-slate-400' }
        ];

        // Impact levels
        const impacts = [
            { id: 'high', label: 'High Impact', color: 'text-red-400' },
            { id: 'medium', label: 'Medium Impact', color: 'text-yellow-400' },
            { id: 'low', label: 'Low Impact', color: 'text-slate-400' }
        ];

        // Demo lessons learned
        const initialLessons = [
            {
                id: 1,
                title: 'Early Customer Engagement Critical for DHA Pursuits',
                opportunity: 'DHA T2 Healthcare IT',
                customer: 'DHA',
                outcome: 'win',
                category: 'capture',
                impact: 'high',
                date: '2024-08-15',
                summary: 'Started customer engagement 18 months before RFP release, resulting in requirements that aligned with our capabilities.',
                details: 'Key success factors: (1) Attended all industry days and submitted detailed RFI responses, (2) Requested and held 3 pre-solicitation meetings, (3) Positioned key personnel for customer visibility through conference presentations, (4) Built relationships with program office staff through relevant past performance work.',
                actionItems: [
                    'Start pre-capture activities minimum 12 months before expected RFP',
                    'Develop customer engagement plan for every Tier 1 opportunity',
                    'Track customer touchpoints in CRM systematically'
                ],
                applicableTo: ['DHA', 'VA', 'DoD Healthcare'],
                tags: ['customer engagement', 'pre-RFP', 'relationship building'],
                author: 'Sarah Chen',
                votes: 12
            },
            {
                id: 2,
                title: 'Insufficient Page Count Allocation for Technical Volume',
                opportunity: 'CMS Data Analytics Platform',
                customer: 'CMS',
                outcome: 'loss',
                category: 'technical',
                impact: 'high',
                date: '2024-06-20',
                summary: 'Debriefing revealed our technical approach lacked sufficient detail compared to winner, partially due to poor page allocation.',
                details: 'Root cause analysis: (1) Allocated only 60% of allowed pages to technical approach vs. 85% by winner, (2) Executive summary consumed too many pages with redundant content, (3) Graphics were text-heavy, reducing space for technical depth. Debriefing specifically noted our architecture section "lacked the detail to demonstrate full understanding."',
                actionItems: [
                    'Implement page budget template requiring 80%+ utilization of technical volume',
                    'Mandate graphic-to-text ratio review during Pink Team',
                    'Create detailed outline mapping each requirement to page allocation'
                ],
                applicableTo: ['All agencies', 'Technical evaluations'],
                tags: ['page count', 'technical writing', 'debriefing'],
                author: 'Michael Brown',
                votes: 18
            },
            {
                id: 3,
                title: 'Teaming Agreement Delays Almost Caused No-Bid',
                opportunity: 'VA Enterprise Cloud',
                customer: 'VA',
                outcome: 'win',
                category: 'teaming',
                impact: 'medium',
                date: '2024-09-10',
                summary: 'Legal review of teaming agreements took 6 weeks, leaving only 3 weeks for actual proposal development.',
                details: 'Contributing factors: (1) Started teaming discussions only after RFP release, (2) Partner required non-standard IP provisions, (3) Workshare negotiations delayed due to unclear scope. Solution: Created "rapid teaming" templates pre-approved by legal for common scenarios.',
                actionItems: [
                    'Maintain library of pre-negotiated teaming agreement templates',
                    'Begin teaming discussions during capture phase, not after RFP',
                    'Establish maximum 2-week legal review SLA for teaming agreements'
                ],
                applicableTo: ['All teaming situations'],
                tags: ['teaming', 'legal', 'timeline management'],
                author: 'Jennifer Taylor',
                votes: 15
            },
            {
                id: 4,
                title: 'Compliance Matrix Gaps Identified Late in Gold Team',
                opportunity: 'NIH Research IT Support',
                customer: 'NIH',
                outcome: 'loss',
                category: 'compliance',
                impact: 'high',
                date: '2024-04-25',
                summary: 'Gold Team discovered 8 unanswered RFP requirements 48 hours before submission. Rush to address resulted in weak responses.',
                details: 'Investigation revealed: (1) Compliance matrix not updated after Amendment 2 requirements changes, (2) No formal compliance review at Pink Team, (3) Volume leads worked in silos without cross-referencing. Debriefing confirmed 3 of 8 gaps contributed to "unacceptable" rating in key areas.',
                actionItems: [
                    'Implement automated compliance matrix tool with amendment tracking',
                    'Require compliance checkpoint at every color team review',
                    'Assign dedicated compliance reviewer separate from volume leads'
                ],
                applicableTo: ['All proposals'],
                tags: ['compliance', 'color teams', 'amendments'],
                author: 'Lisa Anderson',
                votes: 22
            },
            {
                id: 5,
                title: 'Win Theme Consistency Praised in Debrief',
                opportunity: 'DHA EHR Support Services',
                customer: 'DHA',
                outcome: 'win',
                category: 'capture',
                impact: 'medium',
                date: '2024-11-05',
                summary: 'Evaluator specifically noted our consistent win themes across all volumes as a distinguishing strength.',
                details: 'Approach: (1) Developed 3 core win themes during capture with specific proof points, (2) Created theme integration matrix mapping themes to each section, (3) Required theme reference in opening paragraph of every major section, (4) Conducted theme consistency review at each color team.',
                actionItems: [
                    'Limit win themes to 3-4 maximum per proposal',
                    'Create theme style guide with approved language for consistency',
                    'Add "theme compliance" as explicit review criteria'
                ],
                applicableTo: ['All proposals', 'Technical evaluations'],
                tags: ['win themes', 'consistency', 'evaluation criteria'],
                author: 'Robert Kim',
                votes: 14
            },
            {
                id: 6,
                title: 'Oral Presentation Rehearsal Time Underestimated',
                opportunity: 'FEMA Disaster Response IT',
                customer: 'FEMA',
                outcome: 'loss',
                category: 'orals',
                impact: 'high',
                date: '2024-07-30',
                summary: 'Only 2 rehearsals before orals resulted in inconsistent messaging and poor Q&A performance.',
                details: 'Debriefing feedback: (1) Technical lead responses conflicted with PM responses, (2) Scenario response "lacked confidence", (3) Backup slides not well organized. Competitor reportedly had 6+ full rehearsals including outside red team.',
                actionItems: [
                    'Mandate minimum 4 full rehearsals for any oral presentation',
                    'Include external "hostile" Q&A session in rehearsal schedule',
                    'Create standardized backup slide deck organized by likely question categories'
                ],
                applicableTo: ['Orals-required procurements'],
                tags: ['orals', 'rehearsal', 'Q&A preparation'],
                author: 'David Wilson',
                votes: 19
            },
            {
                id: 7,
                title: 'LPTA Pricing Strategy Success',
                opportunity: 'GSA IT Schedule Task Order',
                customer: 'GSA',
                outcome: 'win',
                category: 'pricing',
                impact: 'medium',
                date: '2024-10-12',
                summary: 'Won LPTA competition by 3% through strategic labor category optimization.',
                details: 'Strategy: (1) Analyzed incumbent pricing through FPDS data, (2) Optimized labor mix using junior staff with senior oversight model, (3) Proposed fixed-price CLINS where possible to reduce perceived risk, (4) Used actual GSA schedule rates rather than building from scratch.',
                actionItems: [
                    'Always pull FPDS data on incumbent contract for pricing intelligence',
                    'Develop "LPTA optimization" checklist for applicable competitions',
                    'Consider hybrid fixed-price/T&M structures for risk mitigation'
                ],
                applicableTo: ['LPTA competitions', 'Task orders'],
                tags: ['LPTA', 'pricing strategy', 'competitive intelligence'],
                author: 'Emily Davis',
                votes: 11
            },
            {
                id: 8,
                title: 'Process Improvement: Storyboard Approach Reduced Rework',
                opportunity: 'Multiple',
                customer: 'Various',
                outcome: 'win',
                category: 'process',
                impact: 'medium',
                date: '2024-12-01',
                summary: 'Implementing mandatory storyboards before writing reduced Pink Team rewrites by 60%.',
                details: 'New process: (1) Authors complete storyboard template showing section flow, graphics, and key points, (2) Capture lead approves storyboard before writing begins, (3) Storyboards reviewed at "White Team" 1 week before Pink, (4) Writing proceeds only after storyboard approval.',
                actionItems: [
                    'Create storyboard template for all major proposal sections',
                    'Add White Team (storyboard review) to standard proposal schedule',
                    'Train all proposal staff on storyboard methodology'
                ],
                applicableTo: ['All proposals'],
                tags: ['storyboard', 'process improvement', 'color teams'],
                author: 'Sarah Chen',
                votes: 25
            }
        ];

        function LessonsLearnedLibrary() {
            const [lessons, setLessons] = useState(initialLessons);
            const [searchTerm, setSearchTerm] = useState('');
            const [selectedCategory, setSelectedCategory] = useState('all');
            const [selectedOutcome, setSelectedOutcome] = useState('all');
            const [showDetail, setShowDetail] = useState(null);
            const [showAddForm, setShowAddForm] = useState(false);

            const filteredLessons = useMemo(() => {
                return lessons.filter(lesson => {
                    if (selectedCategory !== 'all' && lesson.category !== selectedCategory) return false;
                    if (selectedOutcome !== 'all' && lesson.outcome !== selectedOutcome) return false;
                    if (searchTerm) {
                        const search = searchTerm.toLowerCase();
                        return lesson.title.toLowerCase().includes(search) ||
                               lesson.summary.toLowerCase().includes(search) ||
                               lesson.tags.some(t => t.toLowerCase().includes(search));
                    }
                    return true;
                });
            }, [lessons, searchTerm, selectedCategory, selectedOutcome]);

            const upvoteLesson = (id) => {
                setLessons(lessons.map(l => 
                    l.id === id ? { ...l, votes: l.votes + 1 } : l
                ));
            };

            const stats = useMemo(() => ({
                total: lessons.length,
                wins: lessons.filter(l => l.outcome === 'win').length,
                losses: lessons.filter(l => l.outcome === 'loss').length,
                highImpact: lessons.filter(l => l.impact === 'high').length
            }), [lessons]);

            const getCategoryInfo = (categoryId) => {
                return categories.find(c => c.id === categoryId) || { name: 'Unknown', icon: 'üìå' };
            };

            return (
                <div className="min-h-screen bg-mp-navy">
                    {/* Header */}
                    <header className="bg-mp-slate/50 border-b border-mp-cyan/20 px-6 py-4">
                        <div className="flex flex-col md:flex-row md:items-center justify-between gap-4">
                            <div>
                                <h1 className="text-2xl font-bold text-white">Lessons Learned Library</h1>
                                <p className="text-sm text-slate-400 mt-1">Organizational Knowledge ‚Ä¢ Continuous Improvement</p>
                            </div>
                            <button 
                                onClick={() => setShowAddForm(true)}
                                className="bg-mp-cyan text-mp-navy font-semibold px-4 py-2 rounded-lg hover:bg-mp-cyan/90 flex items-center gap-2"
                            >
                                <span>+</span> Add Lesson
                            </button>
                        </div>
                    </header>

                    <main className="p-6">
                        {/* Stats Bar */}
                        <div className="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
                            <div className="bg-mp-slate/50 border border-mp-cyan/20 rounded-lg p-4">
                                <div className="text-2xl font-bold text-white">{stats.total}</div>
                                <div className="text-xs text-slate-400">Total Lessons</div>
                            </div>
                            <div className="bg-mp-slate/50 border border-mp-cyan/20 rounded-lg p-4">
                                <div className="text-2xl font-bold text-green-400">{stats.wins}</div>
                                <div className="text-xs text-slate-400">From Wins</div>
                            </div>
                            <div className="bg-mp-slate/50 border border-mp-cyan/20 rounded-lg p-4">
                                <div className="text-2xl font-bold text-red-400">{stats.losses}</div>
                                <div className="text-xs text-slate-400">From Losses</div>
                            </div>
                            <div className="bg-mp-slate/50 border border-mp-cyan/20 rounded-lg p-4">
                                <div className="text-2xl font-bold text-yellow-400">{stats.highImpact}</div>
                                <div className="text-xs text-slate-400">High Impact</div>
                            </div>
                        </div>

                        {/* Search & Filters */}
                        <div className="flex flex-wrap gap-3 mb-6">
                            <div className="flex-1 min-w-64">
                                <input
                                    type="text"
                                    value={searchTerm}
                                    onChange={(e) => setSearchTerm(e.target.value)}
                                    placeholder="Search lessons, tags..."
                                    className="w-full bg-mp-slate border border-mp-cyan/30 rounded-lg px-4 py-2 text-sm focus:outline-none focus:border-mp-cyan"
                                />
                            </div>
                            <select 
                                value={selectedCategory}
                                onChange={(e) => setSelectedCategory(e.target.value)}
                                className="bg-mp-slate border border-mp-cyan/30 rounded-lg px-3 py-2 text-sm focus:outline-none focus:border-mp-cyan"
                            >
                                <option value="all">All Categories</option>
                                {categories.map(cat => (
                                    <option key={cat.id} value={cat.id}>{cat.icon} {cat.name}</option>
                                ))}
                            </select>
                            <select 
                                value={selectedOutcome}
                                onChange={(e) => setSelectedOutcome(e.target.value)}
                                className="bg-mp-slate border border-mp-cyan/30 rounded-lg px-3 py-2 text-sm focus:outline-none focus:border-mp-cyan"
                            >
                                <option value="all">All Outcomes</option>
                                {outcomes.map(out => (
                                    <option key={out.id} value={out.id}>{out.label}</option>
                                ))}
                            </select>
                        </div>

                        {/* Category Quick Filters */}
                        <div className="flex flex-wrap gap-2 mb-6">
                            {categories.map(cat => (
                                <button
                                    key={cat.id}
                                    onClick={() => setSelectedCategory(selectedCategory === cat.id ? 'all' : cat.id)}
                                    className={`px-3 py-1.5 rounded-lg text-sm flex items-center gap-1 ${
                                        selectedCategory === cat.id 
                                            ? 'bg-mp-cyan text-mp-navy font-medium' 
                                            : 'bg-mp-slate/50 text-slate-400 hover:bg-mp-cyan/10'
                                    }`}
                                >
                                    <span>{cat.icon}</span>
                                    <span>{cat.name}</span>
                                </button>
                            ))}
                        </div>

                        {/* Lessons Grid */}
                        <div className="grid grid-cols-1 lg:grid-cols-2 gap-4">
                            {filteredLessons.map((lesson) => {
                                const categoryInfo = getCategoryInfo(lesson.category);
                                const outcomeInfo = outcomes.find(o => o.id === lesson.outcome);
                                const impactInfo = impacts.find(i => i.id === lesson.impact);
                                
                                return (
                                    <div
                                        key={lesson.id}
                                        className="bg-mp-slate/50 border border-mp-cyan/20 rounded-xl p-5 lesson-card cursor-pointer"
                                        onClick={() => setShowDetail(lesson)}
                                    >
                                        {/* Header */}
                                        <div className="flex items-start justify-between gap-3 mb-3">
                                            <div className="flex items-center gap-2">
                                                <span className="text-xl">{categoryInfo.icon}</span>
                                                <div>
                                                    <span className={`text-xs px-2 py-0.5 rounded ${outcomeInfo?.color}`}>
                                                        {outcomeInfo?.label}
                                                    </span>
                                                    <span className={`text-xs ml-2 ${impactInfo?.color}`}>
                                                        {impactInfo?.label}
                                                    </span>
                                                </div>
                                            </div>
                                            <button
                                                onClick={(e) => { e.stopPropagation(); upvoteLesson(lesson.id); }}
                                                className="flex items-center gap-1 text-sm text-slate-400 hover:text-mp-cyan"
                                            >
                                                <span>üëç</span>
                                                <span>{lesson.votes}</span>
                                            </button>
                                        </div>

                                        {/* Title & Summary */}
                                        <h3 className="text-lg font-semibold text-white mb-2">{lesson.title}</h3>
                                        <p className="text-sm text-slate-300 mb-3">{lesson.summary}</p>

                                        {/* Meta */}
                                        <div className="flex flex-wrap gap-2 mb-3">
                                            <span className="text-xs bg-mp-cyan/10 text-mp-cyan px-2 py-0.5 rounded">
                                                {lesson.customer}
                                            </span>
                                            <span className="text-xs bg-mp-navy text-slate-400 px-2 py-0.5 rounded">
                                                {categoryInfo.name}
                                            </span>
                                        </div>

                                        {/* Tags */}
                                        <div className="flex flex-wrap gap-1 mb-3">
                                            {lesson.tags.slice(0, 3).map((tag, idx) => (
                                                <span key={idx} className="text-xs text-slate-500">#{tag}</span>
                                            ))}
                                        </div>

                                        {/* Footer */}
                                        <div className="flex justify-between items-center text-xs text-slate-500 pt-3 border-t border-mp-cyan/10">
                                            <span>{lesson.author}</span>
                                            <span>{lesson.date}</span>
                                        </div>
                                    </div>
                                );
                            })}
                        </div>

                        {filteredLessons.length === 0 && (
                            <div className="text-center py-12">
                                <div className="text-4xl mb-3">üìö</div>
                                <p className="text-slate-400">No lessons found matching your criteria</p>
                            </div>
                        )}
                    </main>

                    {/* Detail Modal */}
                    {showDetail && (
                        <div className="fixed inset-0 bg-black/70 flex items-start justify-center z-50 p-4 overflow-y-auto" onClick={() => setShowDetail(null)}>
                            <div className="bg-mp-slate border border-mp-cyan/30 rounded-xl p-6 max-w-2xl w-full my-8" onClick={e => e.stopPropagation()}>
                                {/* Modal Header */}
                                <div className="flex justify-between items-start mb-4">
                                    <div>
                                        <div className="flex items-center gap-2 mb-2">
                                            <span className="text-2xl">{getCategoryInfo(showDetail.category).icon}</span>
                                            <span className={`text-xs px-2 py-0.5 rounded ${outcomes.find(o => o.id === showDetail.outcome)?.color}`}>
                                                {outcomes.find(o => o.id === showDetail.outcome)?.label}
                                            </span>
                                            <span className={`text-xs ${impacts.find(i => i.id === showDetail.impact)?.color}`}>
                                                {impacts.find(i => i.id === showDetail.impact)?.label}
                                            </span>
                                        </div>
                                        <h2 className="text-xl font-bold text-white">{showDetail.title}</h2>
                                    </div>
                                    <button 
                                        onClick={() => setShowDetail(null)}
                                        className="text-slate-400 hover:text-white text-xl"
                                    >
                                        √ó
                                    </button>
                                </div>

                                {/* Opportunity Info */}
                                <div className="bg-mp-navy/50 rounded-lg p-3 mb-4">
                                    <div className="grid grid-cols-2 gap-4">
                                        <div>
                                            <div className="text-xs text-slate-500">Opportunity</div>
                                            <div className="text-white">{showDetail.opportunity}</div>
                                        </div>
                                        <div>
                                            <div className="text-xs text-slate-500">Customer</div>
                                            <div className="text-mp-cyan">{showDetail.customer}</div>
                                        </div>
                                    </div>
                                </div>

                                {/* Summary */}
                                <div className="mb-4">
                                    <h4 className="text-xs uppercase text-slate-500 tracking-wide mb-2">Summary</h4>
                                    <p className="text-slate-300">{showDetail.summary}</p>
                                </div>

                                {/* Details */}
                                <div className="mb-4">
                                    <h4 className="text-xs uppercase text-slate-500 tracking-wide mb-2">Details & Analysis</h4>
                                    <p className="text-slate-300 whitespace-pre-wrap">{showDetail.details}</p>
                                </div>

                                {/* Action Items */}
                                <div className="bg-mp-cyan/10 border border-mp-cyan/20 rounded-lg p-4 mb-4">
                                    <h4 className="text-mp-cyan font-medium mb-2">üìã Action Items</h4>
                                    <ul className="space-y-2">
                                        {showDetail.actionItems.map((item, idx) => (
                                            <li key={idx} className="flex items-start gap-2 text-sm text-slate-300">
                                                <span className="text-mp-cyan">‚Ä¢</span>
                                                <span>{item}</span>
                                            </li>
                                        ))}
                                    </ul>
                                </div>

                                {/* Applicable To */}
                                <div className="mb-4">
                                    <h4 className="text-xs uppercase text-slate-500 tracking-wide mb-2">Applicable To</h4>
                                    <div className="flex flex-wrap gap-2">
                                        {showDetail.applicableTo.map((item, idx) => (
                                            <span key={idx} className="text-xs bg-mp-cyan/10 text-mp-cyan px-2 py-1 rounded">
                                                {item}
                                            </span>
                                        ))}
                                    </div>
                                </div>

                                {/* Tags */}
                                <div className="mb-4">
                                    <h4 className="text-xs uppercase text-slate-500 tracking-wide mb-2">Tags</h4>
                                    <div className="flex flex-wrap gap-2">
                                        {showDetail.tags.map((tag, idx) => (
                                            <span key={idx} className="text-xs bg-mp-navy text-slate-400 px-2 py-1 rounded">
                                                #{tag}
                                            </span>
                                        ))}
                                    </div>
                                </div>

                                {/* Footer */}
                                <div className="flex justify-between items-center pt-4 border-t border-mp-cyan/10">
                                    <div className="text-sm text-slate-400">
                                        <span>By {showDetail.author}</span>
                                        <span className="mx-2">‚Ä¢</span>
                                        <span>{showDetail.date}</span>
                                    </div>
                                    <div className="flex items-center gap-4">
                                        <button
                                            onClick={() => upvoteLesson(showDetail.id)}
                                            className="flex items-center gap-1 text-slate-400 hover:text-mp-cyan"
                                        >
                                            <span>üëç</span>
                                            <span>{showDetail.votes} helpful</span>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}

                    {/* Footer */}
                    <footer className="bg-mp-slate/30 border-t border-mp-cyan/10 px-6 py-4 mt-8">
                        <div className="flex flex-col md:flex-row justify-between items-center gap-2 text-xs text-slate-500">
                            <span>AI GENERATED - REQUIRES HUMAN REVIEW</span>
                            <span>MissionPulse Lessons Learned Library v1.0</span>
                        </div>
                    </footer>
                </div>
            );
        }

        ReactDOM.render(<LessonsLearnedLibrary />, document.getElementById('root'));
    </script>
</body>
</html>
