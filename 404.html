<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MissionPulse â€” Page Not Found</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: 'Inter', sans-serif; background: #00050F; min-height: 100vh; overflow-x: hidden; }

    /* Shield & Pulse Animations */
    @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
    @keyframes ping { 75%, 100% { transform: scale(2); opacity: 0; } }
    @keyframes float { 0%, 100% { transform: translateY(0px); } 50% { transform: translateY(-12px); } }
    @keyframes scanline { 0% { top: -10%; } 100% { top: 110%; } }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(16px); } to { opacity: 1; transform: translateY(0); } }
    @keyframes glitch { 0%, 100% { text-shadow: 2px 0 #00E5FA, -2px 0 #EF4444; } 25% { text-shadow: -2px 0 #00E5FA, 2px 0 #EF4444; } 50% { text-shadow: 2px 2px #00E5FA, -2px -2px #EF4444; } 75% { text-shadow: -2px 2px #00E5FA, 2px -2px #EF4444; } }
    @keyframes shieldPulse { 0%, 100% { filter: drop-shadow(0 0 8px rgba(0,229,250,0.3)); } 50% { filter: drop-shadow(0 0 20px rgba(0,229,250,0.6)); } }

    .animate-float { animation: float 4s ease-in-out infinite; }
    .animate-fadeIn { animation: fadeIn 0.6s ease-out forwards; }
    .animate-glitch { animation: glitch 3s ease-in-out infinite; }
    .animate-shieldPulse { animation: shieldPulse 3s ease-in-out infinite; }

    .scanline::after {
      content: ''; position: absolute; left: 0; width: 100%; height: 2px;
      background: linear-gradient(90deg, transparent, rgba(0,229,250,0.15), transparent);
      animation: scanline 4s linear infinite;
    }

    .glass-card {
      background: rgba(255,255,255,0.03);
      border: 1px solid rgba(255,255,255,0.06);
      backdrop-filter: blur(20px);
    }

    .module-link {
      transition: all 0.2s ease;
      border: 1px solid rgba(255,255,255,0.06);
    }
    .module-link:hover {
      background: rgba(0,229,250,0.08);
      border-color: rgba(0,229,250,0.3);
      transform: translateY(-1px);
    }

    .search-input:focus { outline: none; box-shadow: 0 0 0 2px rgba(0,229,250,0.3); }

    .grid-bg {
      background-image:
        linear-gradient(rgba(0,229,250,0.03) 1px, transparent 1px),
        linear-gradient(90deg, rgba(0,229,250,0.03) 1px, transparent 1px);
      background-size: 60px 60px;
    }
  </style>
  <script src="rbac-guard.js"></script>
</head>
<body class="grid-bg scanline relative">

  <!-- Connection Status Indicator -->
  <div id="connectionIndicator" style="position:fixed;top:16px;right:16px;z-index:100;display:flex;align-items:center;gap:8px;padding:6px 14px;border-radius:9999px;font-size:12px;font-weight:500;background:rgba(0,189,174,0.12);border:1px solid rgba(0,189,174,0.25);color:#00BDAE;">
    <span id="connDot" style="width:8px;height:8px;border-radius:50%;background:#00BDAE;display:inline-block;"></span>
    <span id="connText">Systems Online</span>
  </div>

  <div style="min-height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:24px;">

    <!-- Shield Icon -->
    <div class="animate-float animate-shieldPulse" style="margin-bottom:32px;">
      <svg width="80" height="92" viewBox="0 0 80 92" fill="none">
        <path d="M40 4L8 20V44C8 66 22 82 40 88C58 82 72 66 72 44V20L40 4Z" stroke="#00E5FA" stroke-width="2" fill="rgba(0,229,250,0.06)"/>
        <path d="M40 20L24 28V40C24 52 30 60 40 64C50 60 56 52 56 40V28L40 20Z" stroke="#00E5FA" stroke-width="1.5" fill="rgba(0,229,250,0.04)" opacity="0.6"/>
        <!-- Pulse line inside shield -->
        <polyline points="28,46 34,46 37,38 40,54 43,42 46,46 52,46" stroke="#00E5FA" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
    </div>

    <!-- 404 Display -->
    <div class="animate-fadeIn" style="text-align:center;animation-delay:0.1s;opacity:0;">
      <h1 class="animate-glitch" style="font-size:96px;font-weight:800;color:#00E5FA;letter-spacing:-4px;line-height:1;">404</h1>
      <p style="font-size:20px;font-weight:600;color:#FFFFFF;margin-top:8px;">Sector Not Found</p>
      <p style="font-size:14px;color:#94A3B8;margin-top:8px;max-width:420px;">
        The requested mission coordinate doesn't exist or has been reclassified. Use the module navigator below to return to operations.
      </p>
    </div>

    <!-- Module Search -->
    <div class="animate-fadeIn" style="margin-top:40px;width:100%;max-width:560px;animation-delay:0.3s;opacity:0;">
      <div style="position:relative;">
        <svg style="position:absolute;left:14px;top:50%;transform:translateY(-50%);pointer-events:none;" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#64748B" stroke-width="2" stroke-linecap="round"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
        <input
          id="moduleSearch"
          type="text"
          placeholder="Search modules... (Pipeline, War Room, Pricing)"
          class="search-input"
          style="width:100%;padding:14px 16px 14px 44px;border-radius:12px;background:rgba(255,255,255,0.04);border:1px solid rgba(255,255,255,0.08);color:#FFFFFF;font-size:14px;font-family:inherit;"
          autocomplete="off"
        />
      </div>

      <!-- Module Grid -->
      <div id="moduleGrid" style="margin-top:16px;display:grid;grid-template-columns:repeat(auto-fill,minmax(160px,1fr));gap:10px;">
      </div>

      <!-- Quick Actions -->
      <div class="animate-fadeIn" style="margin-top:24px;display:flex;gap:12px;justify-content:center;flex-wrap:wrap;animation-delay:0.5s;opacity:0;">
        <a href="/" style="display:inline-flex;align-items:center;gap:8px;padding:10px 20px;border-radius:10px;background:rgba(0,229,250,0.12);border:1px solid rgba(0,229,250,0.3);color:#00E5FA;font-size:13px;font-weight:600;text-decoration:none;transition:all 0.2s;" onmouseover="this.style.background='rgba(0,229,250,0.2)'" onmouseout="this.style.background='rgba(0,229,250,0.12)'">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><path d="M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>
          Dashboard
        </a>
        <a href="/missionpulse-m2-warroom-enhanced.html" style="display:inline-flex;align-items:center;gap:8px;padding:10px 20px;border-radius:10px;background:rgba(255,255,255,0.04);border:1px solid rgba(255,255,255,0.08);color:#94A3B8;font-size:13px;font-weight:600;text-decoration:none;transition:all 0.2s;" onmouseover="this.style.background='rgba(255,255,255,0.08)';this.style.color='#FFFFFF'" onmouseout="this.style.background='rgba(255,255,255,0.04)';this.style.color='#94A3B8'">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><rect x="3" y="3" width="18" height="18" rx="2"/><line x1="9" y1="3" x2="9" y2="21"/></svg>
          War Room
        </a>
        <a href="/missionpulse-m1-enhanced.html" style="display:inline-flex;align-items:center;gap:8px;padding:10px 20px;border-radius:10px;background:rgba(255,255,255,0.04);border:1px solid rgba(255,255,255,0.08);color:#94A3B8;font-size:13px;font-weight:600;text-decoration:none;transition:all 0.2s;" onmouseover="this.style.background='rgba(255,255,255,0.08)';this.style.color='#FFFFFF'" onmouseout="this.style.background='rgba(255,255,255,0.04)';this.style.color='#94A3B8'">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/></svg>
          Pipeline
        </a>
      </div>
    </div>
  </div>

  <!-- AI Disclaimer Footer -->
  <footer style="position:fixed;bottom:0;left:0;right:0;text-align:center;padding:12px 16px;background:linear-gradient(transparent,rgba(0,5,15,0.95));z-index:50;">
    <div style="display:flex;align-items:center;justify-content:center;gap:8px;flex-wrap:wrap;">
      <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="#F59E0B" stroke-width="2" stroke-linecap="round"><path d="M12 2L2 7l10 5 10-5-10-5z"/><path d="M2 17l10 5 10-5"/><path d="M2 12l10 5 10-5"/></svg>
      <span style="font-size:11px;color:#64748B;">AI GENERATED â€” REQUIRES HUMAN REVIEW</span>
      <span style="font-size:11px;color:#475569;">|</span>
      <span style="font-size:11px;color:#475569;">MissionPulse v12.0 â€” Mission Meets Tech</span>
      <span style="font-size:11px;color:#475569;">|</span>
      <span style="font-size:11px;color:#475569;">CMMC 2.0 L2 Compliant</span>
    </div>
  </footer>

  <script>
    // â”€â”€â”€ Module Registry (Demo Data Fallback) â”€â”€â”€
    const MODULES = [
      { id: 'dashboard', name: 'Dashboard', icon: 'ðŸ“Š', path: '/', desc: 'Mission command center' },
      { id: 'm1', name: 'Pipeline Intelligence', icon: 'ðŸŽ¯', path: '/missionpulse-m1-enhanced.html', desc: 'Opportunity tracking' },
      { id: 'm2', name: 'War Room', icon: 'âš”ï¸', path: '/missionpulse-m2-warroom-enhanced.html', desc: 'Pursuit command' },
      { id: 'm3', name: 'Swimlane Board', icon: 'ðŸŠ', path: '/missionpulse-m3-swimlane-board.html', desc: 'Workflow kanban' },
      { id: 'm4', name: 'RFP Shredder', icon: 'ðŸ“„', path: '/index__13_.html', desc: 'Requirements extraction' },
      { id: 'm5', name: 'Contract Scanner', icon: 'ðŸ“‹', path: '/missionpulse-m5-contracts-enhanced.html', desc: 'FAR/DFARS analysis' },
      { id: 'm6', name: 'Iron Dome', icon: 'ðŸ›¡ï¸', path: '/missionpulse-m6-iron-dome.html', desc: 'Compliance enforcement' },
      { id: 'm7', name: 'Black Hat', icon: 'ðŸŽ©', path: '/missionpulse-m7-blackhat-enhanced.html', desc: 'Competitive intel' },
      { id: 'm8', name: 'Pricing Engine', icon: 'ðŸ’°', path: '/missionpulse-m8-pricing.html', desc: 'BOE & pricing (CUI)' },
      { id: 'm9', name: 'HITL Review', icon: 'ðŸ‘¤', path: '/missionpulse-m9-hitl-enhanced.html', desc: 'Human-in-the-loop' },
      { id: 'm10', name: 'Orals Studio', icon: 'ðŸŽ¤', path: '/m10-orals-studio-enhanced.jsx', desc: 'Presentation prep' },
      { id: 'm11', name: 'Frenemy Protocol', icon: 'ðŸ¤', path: '/missionpulse-m11-frenemy-protocol.html', desc: 'Teaming analysis' },
      { id: 'm13', name: 'Launch & ROI', icon: 'ðŸš€', path: '/missionpulse-m13-launch-roi.html', desc: 'Go-live tracking' },
      { id: 'm14', name: 'Post-Award', icon: 'ðŸ“¦', path: '/missionpulse-m14-post-award.html', desc: 'Transition management' },
      { id: 'm15', name: 'Lessons Playbook', icon: 'ðŸ“–', path: '/missionpulse-m15-lessons-playbook.html', desc: 'Knowledge capture' },
      { id: 'm16', name: 'RBAC Admin', icon: 'ðŸ”', path: '/missionpulse-task16-rbac.html', desc: 'Roles & permissions' },
    ];

    const grid = document.getElementById('moduleGrid');
    const searchInput = document.getElementById('moduleSearch');

    function renderModules(filter = '') {
      const q = filter.toLowerCase();
      const filtered = MODULES.filter(m =>
        m.name.toLowerCase().includes(q) ||
        m.desc.toLowerCase().includes(q) ||
        m.id.toLowerCase().includes(q)
      );

      grid.innerHTML = filtered.length === 0
        ? '<div style="grid-column:1/-1;text-align:center;padding:24px;color:#64748B;font-size:13px;">No modules match "<span style="color:#00E5FA;">' + filter + '</span>"</div>'
        : filtered.map(m => `
          <a href="${m.path}" class="module-link" style="display:flex;align-items:center;gap:10px;padding:12px;border-radius:10px;background:rgba(255,255,255,0.02);text-decoration:none;">
            <span style="font-size:20px;flex-shrink:0;">${m.icon}</span>
            <div>
              <div style="font-size:13px;font-weight:600;color:#FFFFFF;">${m.name}</div>
              <div style="font-size:11px;color:#64748B;margin-top:2px;">${m.desc}</div>
            </div>
          </a>
        `).join('');
    }

    searchInput.addEventListener('input', (e) => renderModules(e.target.value));
    renderModules();

    // â”€â”€â”€ Connection Status Check â”€â”€â”€
    const connDot = document.getElementById('connDot');
    const connText = document.getElementById('connText');
    const connInd = document.getElementById('connectionIndicator');

    async function checkConnection() {
      try {
        const res = await fetch('/agents/asksage/status', { method: 'GET', cache: 'no-store' });
        if (res.ok) {
          connDot.style.background = '#00BDAE';
          connText.textContent = 'Systems Online';
          connInd.style.background = 'rgba(0,189,174,0.12)';
          connInd.style.borderColor = 'rgba(0,189,174,0.25)';
          connInd.style.color = '#00BDAE';
        } else { throw new Error(); }
      } catch {
        connDot.style.background = '#F59E0B';
        connText.textContent = 'Degraded';
        connInd.style.background = 'rgba(245,158,11,0.12)';
        connInd.style.borderColor = 'rgba(245,158,11,0.25)';
        connInd.style.color = '#F59E0B';
      }
    }

    checkConnection();
    setInterval(checkConnection, 30000);

    // Focus search on load
    setTimeout(() => searchInput.focus(), 600);
  </script>
</body>
</html>
