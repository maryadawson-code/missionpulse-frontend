<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>M3 Swimlane Board | MissionPulse</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'mp-cyan': '#00E5FA',
                        'mp-cyan-dark': '#00B8C8',
                        'mp-navy': '#00050F',
                        'mp-navy-light': '#0A1628',
                        'mp-navy-mid': '#152238',
                        'mp-success': '#10B981',
                        'mp-warning': '#F59E0B',
                        'mp-danger': '#EF4444',
                        'mp-purple': '#8B5CF6',
                        'mp-pink': '#EC4899',
                        'mp-orange': '#F97316'
                    },
                    fontFamily: {
                        'inter': ['Inter', 'sans-serif']
                    }
                }
            }
        }
    </script>
    <style>
        body { font-family: 'Inter', sans-serif; }
        .glow-cyan { box-shadow: 0 0 20px rgba(0, 229, 250, 0.3); }
        .glow-cyan-sm { box-shadow: 0 0 10px rgba(0, 229, 250, 0.2); }
        .card-hover:hover { transform: translateY(-2px); box-shadow: 0 4px 20px rgba(0, 229, 250, 0.15); }
        .drag-over { background: rgba(0, 229, 250, 0.1); border: 2px dashed #00E5FA; }
        .dragging { opacity: 0.5; transform: rotate(3deg); }
        .pulse-dot { animation: pulse 2s infinite; }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        .scrollbar-thin::-webkit-scrollbar { width: 6px; }
        .scrollbar-thin::-webkit-scrollbar-track { background: #152238; }
        .scrollbar-thin::-webkit-scrollbar-thumb { background: #00E5FA; border-radius: 3px; }
    </style>
</head>
<body class="bg-mp-navy min-h-screen text-white">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // Demo task data
        const initialTasks = [
            // Pink Team (30%)
            { id: 't1', title: 'Draft Executive Summary', assignee: 'SA', volume: 'Tech', priority: 'P-0', dueDate: '2026-01-24', status: 'pink', aiGenerated: true },
            { id: 't2', title: 'Compliance Matrix - Section L', assignee: 'CON', volume: 'Mgmt', priority: 'P-0', dueDate: '2026-01-25', status: 'pink', aiGenerated: false },
            { id: 't3', title: 'Technical Approach Outline', assignee: 'SA', volume: 'Tech', priority: 'P-1', dueDate: '2026-01-27', status: 'pink', aiGenerated: true },
            
            // Red Team (70%)
            { id: 't4', title: 'Past Performance Vol III', assignee: 'PM', volume: 'Mgmt', priority: 'P-0', dueDate: '2026-01-23', status: 'red', aiGenerated: false },
            { id: 't5', title: 'Staffing Plan Matrix', assignee: 'DEL', volume: 'Mgmt', priority: 'P-1', dueDate: '2026-01-26', status: 'red', aiGenerated: false },
            { id: 't6', title: 'Labor Category Justification', assignee: 'FIN', volume: 'Price', priority: 'P-0', dueDate: '2026-01-25', status: 'red', aiGenerated: true },
            
            // Gold Team (90%)
            { id: 't7', title: 'Final Pricing Review', assignee: 'FIN', volume: 'Price', priority: 'P-0', dueDate: '2026-01-28', status: 'gold', aiGenerated: false },
            { id: 't8', title: 'Section M Eval Criteria Check', assignee: 'CON', volume: 'Mgmt', priority: 'P-1', dueDate: '2026-01-29', status: 'gold', aiGenerated: false },
            
            // White Glove
            { id: 't9', title: 'Final Format & Pagination', assignee: 'PM', volume: 'Tech', priority: 'P-0', dueDate: '2026-01-30', status: 'whiteglove', aiGenerated: false },
            
            // Submitted
            { id: 't10', title: 'DHA-2024-0892 Submitted', assignee: 'PM', volume: 'Tech', priority: 'P-0', dueDate: '2026-01-15', status: 'submitted', aiGenerated: false },
        ];

        const columns = [
            { id: 'pink', name: 'Pink Team', percent: '30%', color: 'mp-pink', icon: 'üìù' },
            { id: 'red', name: 'Red Team', percent: '70%', color: 'mp-danger', icon: 'üî¥' },
            { id: 'gold', name: 'Gold Team', percent: '90%', color: 'mp-warning', icon: 'ü•á' },
            { id: 'whiteglove', name: 'White Glove', percent: '95%', color: 'mp-purple', icon: 'üß§' },
            { id: 'submitted', name: 'Submitted', percent: '100%', color: 'mp-success', icon: '‚úÖ' }
        ];

        const assignees = ['PM', 'SA', 'FIN', 'CON', 'DEL'];
        const volumes = ['Tech', 'Mgmt', 'Price'];
        const priorities = ['P-0', 'P-1', 'P-2'];

        const assigneeColors = {
            'PM': 'bg-blue-500',
            'SA': 'bg-purple-500',
            'FIN': 'bg-green-500',
            'CON': 'bg-yellow-500',
            'DEL': 'bg-orange-500'
        };

        const priorityColors = {
            'P-0': 'bg-red-500 text-white',
            'P-1': 'bg-yellow-500 text-black',
            'P-2': 'bg-gray-500 text-white'
        };

        // Header Component
        function Header({ proposalName }) {
            return (
                <header className="bg-mp-navy-light border-b border-mp-navy-mid px-6 py-4">
                    <div className="flex items-center justify-between">
                        <div className="flex items-center gap-4">
                            <div className="w-10 h-10 rounded-lg bg-gradient-to-br from-mp-cyan to-mp-cyan-dark flex items-center justify-center glow-cyan-sm">
                                <span className="text-xl">üéØ</span>
                            </div>
                            <div>
                                <h1 className="text-xl font-bold text-white">M3 Swimlane Board</h1>
                                <p className="text-sm text-gray-400">Proposal Workflow Tracker</p>
                            </div>
                        </div>
                        <div className="flex items-center gap-4">
                            <div className="bg-mp-navy-mid px-4 py-2 rounded-lg border border-mp-navy-mid">
                                <span className="text-gray-400 text-sm">Active Proposal:</span>
                                <span className="text-mp-cyan font-semibold ml-2">{proposalName}</span>
                            </div>
                            <div className="flex items-center gap-2 bg-mp-navy-mid px-3 py-2 rounded-lg">
                                <span className="w-2 h-2 rounded-full bg-mp-success pulse-dot"></span>
                                <span className="text-sm text-gray-300">COO View</span>
                            </div>
                        </div>
                    </div>
                </header>
            );
        }

        // Progress Bar Component
        function ProgressBar({ tasks }) {
            const statusWeights = { pink: 0.3, red: 0.7, gold: 0.9, whiteglove: 0.95, submitted: 1.0 };
            const totalWeight = tasks.reduce((sum, t) => sum + statusWeights[t.status], 0);
            const maxWeight = tasks.length * 1.0;
            const progress = Math.round((totalWeight / maxWeight) * 100);

            return (
                <div className="bg-mp-navy-light rounded-xl p-4 border border-mp-navy-mid">
                    <div className="flex items-center justify-between mb-2">
                        <span className="text-sm font-medium text-gray-300">Overall Proposal Completion</span>
                        <span className="text-2xl font-bold text-mp-cyan">{progress}%</span>
                    </div>
                    <div className="w-full bg-mp-navy rounded-full h-3 overflow-hidden">
                        <div 
                            className="h-full rounded-full bg-gradient-to-r from-mp-pink via-mp-warning to-mp-success transition-all duration-500"
                            style={{ width: `${progress}%` }}
                        />
                    </div>
                    <div className="flex justify-between mt-2 text-xs text-gray-500">
                        <span>Pink 30%</span>
                        <span>Red 70%</span>
                        <span>Gold 90%</span>
                        <span>Submit 100%</span>
                    </div>
                </div>
            );
        }

        // Filter Bar Component
        function FilterBar({ filters, setFilters }) {
            return (
                <div className="bg-mp-navy-light rounded-xl p-4 border border-mp-navy-mid">
                    <div className="flex flex-wrap items-center gap-4">
                        <div className="flex items-center gap-2">
                            <span className="text-sm text-gray-400">Volume:</span>
                            <select 
                                value={filters.volume}
                                onChange={(e) => setFilters({...filters, volume: e.target.value})}
                                className="bg-mp-navy-mid border border-mp-navy-mid rounded-lg px-3 py-1.5 text-sm text-white focus:border-mp-cyan focus:outline-none"
                            >
                                <option value="all">All Volumes</option>
                                {volumes.map(v => <option key={v} value={v}>{v}</option>)}
                            </select>
                        </div>
                        
                        <div className="flex items-center gap-2">
                            <span className="text-sm text-gray-400">Assignee:</span>
                            <select 
                                value={filters.assignee}
                                onChange={(e) => setFilters({...filters, assignee: e.target.value})}
                                className="bg-mp-navy-mid border border-mp-navy-mid rounded-lg px-3 py-1.5 text-sm text-white focus:border-mp-cyan focus:outline-none"
                            >
                                <option value="all">All Assignees</option>
                                {assignees.map(a => <option key={a} value={a}>{a}</option>)}
                            </select>
                        </div>
                        
                        <div className="flex items-center gap-2">
                            <span className="text-sm text-gray-400">Priority:</span>
                            <select 
                                value={filters.priority}
                                onChange={(e) => setFilters({...filters, priority: e.target.value})}
                                className="bg-mp-navy-mid border border-mp-navy-mid rounded-lg px-3 py-1.5 text-sm text-white focus:border-mp-cyan focus:outline-none"
                            >
                                <option value="all">All Priorities</option>
                                {priorities.map(p => <option key={p} value={p}>{p}</option>)}
                            </select>
                        </div>

                        <div className="flex items-center gap-2 ml-auto">
                            <label className="flex items-center gap-2 text-sm text-gray-400 cursor-pointer">
                                <input 
                                    type="checkbox"
                                    checked={filters.aiOnly}
                                    onChange={(e) => setFilters({...filters, aiOnly: e.target.checked})}
                                    className="w-4 h-4 rounded bg-mp-navy-mid border-mp-navy-mid text-mp-cyan focus:ring-mp-cyan"
                                />
                                AI Generated Only
                            </label>
                        </div>

                        <button 
                            onClick={() => setFilters({ volume: 'all', assignee: 'all', priority: 'all', aiOnly: false })}
                            className="text-sm text-mp-cyan hover:text-mp-cyan-dark transition-colors"
                        >
                            Reset Filters
                        </button>
                    </div>
                </div>
            );
        }

        // Task Card Component
        function TaskCard({ task, onDragStart, onDragEnd }) {
            const today = new Date().toISOString().split('T')[0];
            const isOverdue = task.dueDate < today;
            const isToday = task.dueDate === today;
            
            const dueDateColor = task.status === 'submitted' ? 'text-gray-500' :
                                 isOverdue ? 'text-red-400' : 
                                 isToday ? 'text-yellow-400' : 'text-green-400';
            
            const dueDateBg = task.status === 'submitted' ? 'bg-gray-800' :
                              isOverdue ? 'bg-red-500/20' : 
                              isToday ? 'bg-yellow-500/20' : 'bg-green-500/20';

            return (
                <div 
                    draggable
                    onDragStart={(e) => onDragStart(e, task)}
                    onDragEnd={onDragEnd}
                    className="bg-mp-navy-mid rounded-lg p-3 border border-mp-navy-mid hover:border-mp-cyan/30 cursor-grab active:cursor-grabbing card-hover transition-all duration-200"
                >
                    <div className="flex items-start justify-between gap-2 mb-2">
                        <h4 className="text-sm font-medium text-white leading-tight flex-1">{task.title}</h4>
                        <span className={`text-xs px-2 py-0.5 rounded-full font-medium ${priorityColors[task.priority]}`}>
                            {task.priority}
                        </span>
                    </div>
                    
                    <div className="flex items-center gap-2 mb-2">
                        <span className={`text-xs px-2 py-0.5 rounded ${assigneeColors[task.assignee]} text-white font-medium`}>
                            {task.assignee}
                        </span>
                        <span className="text-xs px-2 py-0.5 rounded bg-mp-navy text-gray-400">
                            {task.volume}
                        </span>
                        {task.aiGenerated && (
                            <span className="text-xs px-2 py-0.5 rounded bg-mp-cyan/20 text-mp-cyan flex items-center gap-1">
                                <svg className="w-3 h-3" fill="currentColor" viewBox="0 0 20 20">
                                    <path d="M10 2a8 8 0 100 16 8 8 0 000-16zM8 12a2 2 0 114 0H8zm1-3a1 1 0 112 0v1H9V9z"/>
                                </svg>
                                AI
                            </span>
                        )}
                    </div>
                    
                    <div className={`text-xs px-2 py-1 rounded inline-flex items-center gap-1 ${dueDateBg} ${dueDateColor}`}>
                        <svg className="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                        </svg>
                        {task.status === 'submitted' ? 'Submitted' : isOverdue ? 'Overdue' : isToday ? 'Due Today' : task.dueDate}
                    </div>
                </div>
            );
        }

        // Column Component
        function Column({ column, tasks, onDragStart, onDragEnd, onDrop, draggedOver, setDraggedOver }) {
            const columnColors = {
                'pink': 'border-t-pink-500',
                'red': 'border-t-red-500',
                'gold': 'border-t-yellow-500',
                'whiteglove': 'border-t-purple-500',
                'submitted': 'border-t-green-500'
            };

            const handleDragOver = (e) => {
                e.preventDefault();
                setDraggedOver(column.id);
            };

            const handleDragLeave = () => {
                setDraggedOver(null);
            };

            const handleDrop = (e) => {
                e.preventDefault();
                onDrop(column.id);
                setDraggedOver(null);
            };

            return (
                <div 
                    className={`flex-1 min-w-[240px] bg-mp-navy-light rounded-xl border border-mp-navy-mid ${columnColors[column.id]} border-t-4 flex flex-col ${draggedOver === column.id ? 'drag-over' : ''}`}
                    onDragOver={handleDragOver}
                    onDragLeave={handleDragLeave}
                    onDrop={handleDrop}
                >
                    <div className="p-4 border-b border-mp-navy-mid">
                        <div className="flex items-center justify-between">
                            <div className="flex items-center gap-2">
                                <span className="text-lg">{column.icon}</span>
                                <h3 className="font-semibold text-white">{column.name}</h3>
                            </div>
                            <div className="flex items-center gap-2">
                                <span className="text-xs text-gray-500">{column.percent}</span>
                                <span className="bg-mp-navy px-2 py-0.5 rounded-full text-xs text-mp-cyan font-medium">
                                    {tasks.length}
                                </span>
                            </div>
                        </div>
                    </div>
                    
                    <div className="p-3 flex-1 overflow-y-auto max-h-[500px] scrollbar-thin space-y-3">
                        {tasks.length === 0 ? (
                            <div className="text-center py-8 text-gray-500 text-sm">
                                <div className="text-2xl mb-2">üìã</div>
                                Drop tasks here
                            </div>
                        ) : (
                            tasks.map(task => (
                                <TaskCard 
                                    key={task.id} 
                                    task={task} 
                                    onDragStart={onDragStart}
                                    onDragEnd={onDragEnd}
                                />
                            ))
                        )}
                    </div>
                </div>
            );
        }

        // Stats Summary Component
        function StatsSummary({ tasks }) {
            const stats = {
                total: tasks.length,
                overdue: tasks.filter(t => t.dueDate < new Date().toISOString().split('T')[0] && t.status !== 'submitted').length,
                aiGenerated: tasks.filter(t => t.aiGenerated).length,
                mustWin: tasks.filter(t => t.priority === 'P-0').length
            };

            return (
                <div className="grid grid-cols-4 gap-4">
                    <div className="bg-mp-navy-light rounded-xl p-4 border border-mp-navy-mid">
                        <div className="text-2xl font-bold text-white">{stats.total}</div>
                        <div className="text-sm text-gray-400">Total Tasks</div>
                    </div>
                    <div className="bg-mp-navy-light rounded-xl p-4 border border-mp-navy-mid">
                        <div className="text-2xl font-bold text-red-400">{stats.overdue}</div>
                        <div className="text-sm text-gray-400">Overdue</div>
                    </div>
                    <div className="bg-mp-navy-light rounded-xl p-4 border border-mp-navy-mid">
                        <div className="text-2xl font-bold text-mp-cyan">{stats.aiGenerated}</div>
                        <div className="text-sm text-gray-400">AI Generated</div>
                    </div>
                    <div className="bg-mp-navy-light rounded-xl p-4 border border-mp-navy-mid">
                        <div className="text-2xl font-bold text-yellow-400">{stats.mustWin}</div>
                        <div className="text-sm text-gray-400">Must-Win (P-0)</div>
                    </div>
                </div>
            );
        }

        // Main App Component
        function App() {
            const [tasks, setTasks] = useState(initialTasks);
            const [filters, setFilters] = useState({ volume: 'all', assignee: 'all', priority: 'all', aiOnly: false });
            const [draggedTask, setDraggedTask] = useState(null);
            const [draggedOver, setDraggedOver] = useState(null);

            const filteredTasks = tasks.filter(task => {
                if (filters.volume !== 'all' && task.volume !== filters.volume) return false;
                if (filters.assignee !== 'all' && task.assignee !== filters.assignee) return false;
                if (filters.priority !== 'all' && task.priority !== filters.priority) return false;
                if (filters.aiOnly && !task.aiGenerated) return false;
                return true;
            });

            const handleDragStart = (e, task) => {
                setDraggedTask(task);
                e.target.classList.add('dragging');
            };

            const handleDragEnd = (e) => {
                e.target.classList.remove('dragging');
                setDraggedTask(null);
            };

            const handleDrop = (columnId) => {
                if (draggedTask) {
                    setTasks(tasks.map(t => 
                        t.id === draggedTask.id ? { ...t, status: columnId } : t
                    ));
                    setDraggedTask(null);
                }
            };

            return (
                <div className="min-h-screen flex flex-col">
                    <Header proposalName="DHA-2025-EHRM-0147" />
                    
                    <main className="flex-1 p-6 space-y-6">
                        {/* Stats Row */}
                        <StatsSummary tasks={tasks} />

                        {/* Progress Bar */}
                        <ProgressBar tasks={tasks} />

                        {/* Filter Bar */}
                        <FilterBar filters={filters} setFilters={setFilters} />

                        {/* Swimlane Board */}
                        <div className="flex gap-4 overflow-x-auto pb-4">
                            {columns.map(column => (
                                <Column 
                                    key={column.id}
                                    column={column}
                                    tasks={filteredTasks.filter(t => t.status === column.id)}
                                    onDragStart={handleDragStart}
                                    onDragEnd={handleDragEnd}
                                    onDrop={handleDrop}
                                    draggedOver={draggedOver}
                                    setDraggedOver={setDraggedOver}
                                />
                            ))}
                        </div>

                        {/* Legend */}
                        <div className="bg-mp-navy-light rounded-xl p-4 border border-mp-navy-mid">
                            <h4 className="text-sm font-medium text-gray-400 mb-3">Legend</h4>
                            <div className="flex flex-wrap gap-4 text-xs">
                                <div className="flex items-center gap-2">
                                    <span className="font-medium text-gray-300">Assignees:</span>
                                    {assignees.map(a => (
                                        <span key={a} className={`px-2 py-0.5 rounded ${assigneeColors[a]} text-white`}>{a}</span>
                                    ))}
                                </div>
                                <div className="flex items-center gap-2">
                                    <span className="font-medium text-gray-300">Priority:</span>
                                    {priorities.map(p => (
                                        <span key={p} className={`px-2 py-0.5 rounded ${priorityColors[p]}`}>{p}</span>
                                    ))}
                                </div>
                                <div className="flex items-center gap-2">
                                    <span className="font-medium text-gray-300">Due Dates:</span>
                                    <span className="px-2 py-0.5 rounded bg-red-500/20 text-red-400">Overdue</span>
                                    <span className="px-2 py-0.5 rounded bg-yellow-500/20 text-yellow-400">Today</span>
                                    <span className="px-2 py-0.5 rounded bg-green-500/20 text-green-400">Future</span>
                                </div>
                            </div>
                        </div>
                    </main>

                    {/* Footer */}
                    <footer className="bg-mp-navy-light border-t border-mp-navy-mid px-6 py-4">
                        <div className="flex items-center justify-between">
                            <div className="flex items-center gap-2 text-xs text-gray-500">
                                <span className="w-2 h-2 rounded-full bg-mp-cyan pulse-dot"></span>
                                <span>MissionPulse v12 ‚Ä¢ Shield & Pulse UX</span>
                            </div>
                            <div className="text-xs text-yellow-500 bg-yellow-500/10 px-3 py-1 rounded-full">
                                ‚ö†Ô∏è AI GENERATED - REQUIRES HUMAN REVIEW
                            </div>
                            <div className="text-xs text-gray-500">
                                ¬© 2026 Mission Meets Tech
                            </div>
                        </div>
                    </footer>
                </div>
            );
        }

        ReactDOM.createRoot(document.getElementById('root')).render(<App />);
    </script>
</body>
</html>
