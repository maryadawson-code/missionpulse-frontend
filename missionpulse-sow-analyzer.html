<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MissionPulse ‚Äî SOW Analyzer</title>
  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <style>*{margin:0;padding:0;box-sizing:border-box}body{font-family:'Inter',sans-serif;background:#00050F;min-height:100vh;color:#e2e8f0}::-webkit-scrollbar{width:6px}::-webkit-scrollbar-track{background:transparent}::-webkit-scrollbar-thumb{background:rgba(0,229,250,0.2);border-radius:3px}</style>
</head>
<body>
  <div id="missionpulse-sidebar"></div>
  <div class="main-content"><div id="root"></div></div>
  <script src="missionpulse-nav.js"></script>
  <script type="text/babel">
    const{useState,useEffect,useMemo}=React;
    const SB_URL='https://qdrtpnpnhkxvfmvfziop.supabase.co';const SB_KEY='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFkcnRwbnBuaGt4dmZtdmZ6aW9wIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mzc5MjMxNDMsImV4cCI6MjA1MzQ5OTE0M30.GFbjgRMgVhMMcnNaJMrLVnJI_u6yBGJOhO-LHKE8sZQ';
    var sbClient;try{sbClient=supabase.createClient(SB_URL,SB_KEY)}catch(e){sbClient=null}
    const ROLES_ALLOWED=['*'];

    const DEMO_SOW_TASKS=[
      {id:1,sowRef:'C.3.1',title:'EHR System Administration',category:'Technical',priority:'CRITICAL',
        extractedReqs:['Manage MHS GENESIS platform across 12 MTFs','24/7 system monitoring with 99.5% uptime SLA','Configuration management and patch deployment','Database administration and performance tuning'],
        clinMapping:'CLIN 0002',responseRef:'Vol II ¬ß2.1',staffing:'SA + Sr-Dev + DSO',hoursEst:8320,
        aiInsights:['High complexity ‚Äî requires Azure Gov IL5 expertise','Cross-reference with C.5.1 help desk for escalation path','SLA language implies liquidated damages ‚Äî verify with CON'],
        gapStatus:'COVERED',compliance:100},
      {id:2,sowRef:'C.3.2',title:'Help Desk Operations (Tier 1-3)',category:'Support',priority:'HIGH',
        extractedReqs:['Tier 1: First contact resolution within 15 minutes','Tier 2: Application support within 2 hours','Tier 3: Engineering escalation within 4 hours','ServiceNow ticket management','Knowledge base maintenance','Monthly SLA reporting'],
        clinMapping:'CLIN 0006',responseRef:'Vol II ¬ß2.6',staffing:'HD-Lead + HD-T1 (x2)',hoursEst:12480,
        aiInsights:['‚ö†Ô∏è Tier 3 escalation procedures need more detail','SLA thresholds are aggressive ‚Äî build buffer into staffing','ServiceNow licensing not included in PWS ‚Äî confirm Gov-furnished'],
        gapStatus:'PARTIAL',compliance:60},
      {id:3,sowRef:'C.3.3',title:'DevSecOps Pipeline',category:'Technical',priority:'CRITICAL',
        extractedReqs:['Implement CI/CD pipeline with security gates','Automated SAST/DAST scanning','Container orchestration (Kubernetes)','Infrastructure as Code (Terraform)','STIG automation and compliance validation'],
        clinMapping:'CLIN 0002',responseRef:'Vol II ¬ß2.2',staffing:'DSO + Sr-Dev',hoursEst:4160,
        aiInsights:['Strong discriminator ‚Äî few competitors have mature DevSecOps','Reference DHA contract where we achieved 22-min deployments','Include SBOM generation for supply chain compliance'],
        gapStatus:'COVERED',compliance:100},
      {id:4,sowRef:'C.3.4',title:'Data Analytics & Reporting',category:'Technical',priority:'HIGH',
        extractedReqs:['Build real-time analytics dashboards','Implement data lake architecture','Automated weekly/monthly reporting','Data quality governance framework','Executive decision support tools'],
        clinMapping:'CLIN 0005',responseRef:'Vol II ¬ß2.5.2',staffing:'DE + AI-Lead',hoursEst:3600,
        aiInsights:['Leverage CMS analytics past performance (2M+ claims daily)','Data lake architecture should reference Azure Synapse','Reporting cadence matches DHA J-6 standard PMR requirements'],
        gapStatus:'COVERED',compliance:100},
      {id:5,sowRef:'C.3.5',title:'AI/ML Integration',category:'Technical',priority:'HIGH',
        extractedReqs:['Implement AI-assisted clinical workflow automation','Predictive analytics for resource optimization','NLP-based document processing','Responsible AI governance aligned with NIST AI RMF','Model performance monitoring and bias testing'],
        clinMapping:'CLIN 0003',responseRef:'Vol II ¬ß2.5',staffing:'AI-Lead',hoursEst:3600,
        aiInsights:['‚òÖ Strongest discriminator ‚Äî AskSage partnership is unique','NIST AI 600-1 reference strengthens compliance posture','Evaluators will want to see bias testing methodology'],
        gapStatus:'COVERED',compliance:100},
      {id:6,sowRef:'C.4.1',title:'Cybersecurity Operations',category:'Security',priority:'CRITICAL',
        extractedReqs:['Achieve ATO within 90 days of contract start','Implement continuous monitoring (ConMon)','Vulnerability management and remediation','Incident response within 1 hour for critical events','Quarterly security assessments'],
        clinMapping:'CLIN 0004',responseRef:'Vol II ¬ß2.3',staffing:'Cyber + ISSO',hoursEst:3120,
        aiInsights:['‚ö†Ô∏è ConMon tool selection pending ‚Äî use "FedRAMP-authorized SIEM" language','90-day ATO target is aggressive ‚Äî leverage FedRAMP inheritance narrative','Cross-reference 72-day ATO achievement on VA contract'],
        gapStatus:'PARTIAL',compliance:85},
      {id:7,sowRef:'C.5.1',title:'Training & Knowledge Transfer',category:'Support',priority:'MEDIUM',
        extractedReqs:['Develop training materials for end users','Conduct instructor-led and virtual training','Maintain LMS with course tracking','Provide train-the-trainer program','Quarterly skills assessment'],
        clinMapping:'CLIN 0007',responseRef:'Vol III ¬ß3.5',staffing:'TS + TW',hoursEst:2080,
        aiInsights:['Low complexity ‚Äî can leverage existing training templates','LMS requirement may be Gov-furnished ‚Äî verify','508 compliance required for all training materials'],
        gapStatus:'COVERED',compliance:100},
      {id:8,sowRef:'C.6.1',title:'Quality Assurance',category:'Quality',priority:'HIGH',
        extractedReqs:['Implement QA program aligned with ISO 9001:2015','Automated testing (unit, integration, regression)','Code coverage minimum 80%','508 accessibility testing per release','Monthly quality metrics reporting'],
        clinMapping:'CLIN 0002',responseRef:'Vol III ¬ß3.5',staffing:'QA',hoursEst:3600,
        aiInsights:['ISO 9001:2015 alignment is straightforward ‚Äî reference our QCP','80% code coverage is achievable with current Jest/Selenium stack','508 testing can be automated with Axe-core + manual VPAT'],
        gapStatus:'COVERED',compliance:100},
      {id:9,sowRef:'C.7.1',title:'Transition-In Support',category:'Management',priority:'CRITICAL',
        extractedReqs:['90-day transition period','Knowledge transfer from incumbent','Parallel operations with graduated workload assumption','Zero service disruption during transition','Post-transition assessment report'],
        clinMapping:'CLIN 0001',responseRef:'Vol III ¬ß3.4',staffing:'PM + DPM',hoursEst:2080,
        aiInsights:['‚ö†Ô∏è Phase 3 acceptance criteria needs detail ‚Äî flagged in Pink Team','Zero disruption is our differentiator ‚Äî reference DHA transition success','Incumbent cooperation clause in PWS is our safety net'],
        gapStatus:'PARTIAL',compliance:75},
    ];

    const catColor={Technical:'#00E5FA',Security:'#ef4444',Support:'#f59e0b',Quality:'#00ff88',Management:'#a78bfa'};
    const gapColor={COVERED:'#00ff88',PARTIAL:'#f59e0b',GAP:'#ef4444'};
    const prioColor={CRITICAL:'#ef4444',HIGH:'#f59e0b',MEDIUM:'#00E5FA',LOW:'#94a3b8'};
    const ConnectionDot=({c})=>(<div style={{display:'flex',alignItems:'center',gap:'6px',fontSize:'11px',color:c?'#00ff88':'#f59e0b'}}><div style={{width:'8px',height:'8px',borderRadius:'50%',background:c?'#00ff88':'#f59e0b',boxShadow:`0 0 6px ${c?'#00ff88':'#f59e0b'}`}}/>{c?'LIVE':'DEMO'}</div>);

    const App=()=>{
      const[connected,setConnected]=useState(false);
      const[tab,setTab]=useState('tasks');
      const[catFilter,setCatFilter]=useState('All');
      const[expanded,setExpanded]=useState(null);

      useEffect(()=>{if(!sbClient)return;(async()=>{try{const{data,error}=await sbClient.from('compliance_items').select('id');if(!error&&data&&data.length>0)setConnected(true)}catch{}})()},[]);

      const filtered=useMemo(()=>catFilter==='All'?DEMO_SOW_TASKS:DEMO_SOW_TASKS.filter(t=>t.category===catFilter),[catFilter]);
      const totalReqs=DEMO_SOW_TASKS.reduce((s,t)=>s+t.extractedReqs.length,0);
      const covered=DEMO_SOW_TASKS.filter(t=>t.gapStatus==='COVERED').length;
      const partial=DEMO_SOW_TASKS.filter(t=>t.gapStatus==='PARTIAL').length;
      const totalHours=DEMO_SOW_TASKS.reduce((s,t)=>s+t.hoursEst,0);
      const avgCompliance=Math.round(DEMO_SOW_TASKS.reduce((s,t)=>s+t.compliance,0)/DEMO_SOW_TASKS.length);
      const categories=[...new Set(DEMO_SOW_TASKS.map(t=>t.category))];

      return(
        <div style={{padding:'24px 32px',maxWidth:'1400px'}}>
          <div style={{display:'flex',justifyContent:'space-between',alignItems:'flex-start',marginBottom:'24px'}}>
            <div>
              <div style={{fontSize:'10px',fontWeight:700,color:'rgba(0,229,250,0.5)',letterSpacing:'2px',textTransform:'uppercase',marginBottom:'4px'}}>AI-ASSISTED ANALYSIS</div>
              <h1 style={{fontSize:'26px',fontWeight:800,color:'white',letterSpacing:'-0.5px',margin:0}}>SOW Analyzer</h1>
              <div style={{fontSize:'12px',color:'#5a7a9a',marginTop:'4px'}}>Section C parsing ‚Ä¢ Task identification ‚Ä¢ CLIN mapping ‚Ä¢ Gap detection</div>
            </div>
            <ConnectionDot c={connected}/>
          </div>

          <div style={{display:'flex',gap:'10px',flexWrap:'wrap',marginBottom:'20px'}}>
            {[
              {label:'SOW Tasks',value:DEMO_SOW_TASKS.length,color:'#00E5FA'},
              {label:'Requirements',value:totalReqs,color:'#a78bfa'},
              {label:'Fully Covered',value:covered,color:'#00ff88'},
              {label:'Partial/Gaps',value:partial,color:partial>0?'#f59e0b':'#00ff88'},
              {label:'Compliance',value:`${avgCompliance}%`,color:avgCompliance>=90?'#00ff88':'#f59e0b'},
              {label:'Est. Hours',value:`${(totalHours/1000).toFixed(1)}K`,color:'#94a3b8'},
            ].map(s=>(
              <div key={s.label} style={{background:'rgba(10,22,40,0.7)',border:'1px solid rgba(0,229,250,0.08)',borderRadius:'10px',padding:'10px 16px',minWidth:'120px'}}>
                <div style={{fontSize:'9px',fontWeight:700,color:'#5a7a9a',letterSpacing:'0.5px',textTransform:'uppercase'}}>{s.label}</div>
                <div style={{fontSize:'22px',fontWeight:800,color:s.color,letterSpacing:'-0.5px'}}>{s.value}</div>
              </div>
            ))}
          </div>

          <div style={{display:'flex',gap:'4px',marginBottom:'16px',alignItems:'center'}}>
            {[{k:'tasks',l:'Task Breakdown'},{k:'gaps',l:'Gap Analysis'},{k:'clins',l:'CLIN Mapping'}].map(t=>(
              <button key={t.k} onClick={()=>setTab(t.k)} style={{padding:'7px 16px',fontSize:'12px',fontWeight:600,borderRadius:'8px',border:'none',cursor:'pointer',background:tab===t.k?'rgba(0,229,250,0.15)':'rgba(10,22,40,0.5)',color:tab===t.k?'#00E5FA':'#5a7a9a'}}>{t.l}</button>
            ))}
            <div style={{marginLeft:'auto',display:'flex',gap:'3px'}}>
              {['All',...categories].map(c=>(
                <button key={c} onClick={()=>setCatFilter(c)} style={{padding:'5px 10px',fontSize:'10px',fontWeight:600,borderRadius:'6px',border:'none',cursor:'pointer',background:catFilter===c?`${catColor[c]||'rgba(0,229,250,0.12)'}20`:'transparent',color:catFilter===c?(catColor[c]||'#00E5FA'):'#5a7a9a'}}>{c}</button>
              ))}
            </div>
          </div>

          {/* TASKS */}
          {tab==='tasks'&&(
            <div style={{display:'flex',flexDirection:'column',gap:'6px'}}>
              {filtered.map(t=>(
                <div key={t.id} style={{background:'rgba(10,22,40,0.5)',border:`1px solid ${catColor[t.category]}10`,borderRadius:'10px',overflow:'hidden'}}>
                  <div onClick={()=>setExpanded(expanded===t.id?null:t.id)} style={{padding:'12px 16px',cursor:'pointer',display:'flex',alignItems:'center',gap:'12px'}}>
                    <div style={{flex:1}}>
                      <div style={{display:'flex',alignItems:'center',gap:'6px',marginBottom:'3px'}}>
                        <span style={{fontFamily:'monospace',fontSize:'11px',fontWeight:700,color:'#00E5FA'}}>{t.sowRef}</span>
                        <span style={{fontSize:'13px',fontWeight:600,color:'white'}}>{t.title}</span>
                        <span style={{fontSize:'9px',fontWeight:700,padding:'1px 5px',borderRadius:'3px',background:`${prioColor[t.priority]}12`,color:prioColor[t.priority]}}>{t.priority}</span>
                        <span style={{fontSize:'9px',padding:'1px 5px',borderRadius:'3px',background:`${catColor[t.category]}12`,color:catColor[t.category]}}>{t.category}</span>
                      </div>
                      <div style={{display:'flex',gap:'10px',fontSize:'10px',color:'#5a7a9a'}}>
                        <span>‚Üí {t.responseRef}</span>
                        <span>{t.clinMapping}</span>
                        <span>{t.staffing}</span>
                        <span>{t.hoursEst.toLocaleString()} hrs</span>
                      </div>
                    </div>
                    <div style={{display:'flex',alignItems:'center',gap:'6px'}}>
                      <div style={{width:'50px',height:'5px',background:'rgba(255,255,255,0.04)',borderRadius:'3px',overflow:'hidden'}}>
                        <div style={{width:`${t.compliance}%`,height:'100%',background:gapColor[t.gapStatus],borderRadius:'3px'}}/>
                      </div>
                      <span style={{fontSize:'10px',fontWeight:700,color:gapColor[t.gapStatus]}}>{t.compliance}%</span>
                    </div>
                    <span style={{color:'#5a7a9a',fontSize:'16px',transform:expanded===t.id?'rotate(180deg)':'rotate(0)',transition:'transform 0.2s'}}>‚ñæ</span>
                  </div>
                  {expanded===t.id&&(
                    <div style={{padding:'0 16px 14px',borderTop:'1px solid rgba(0,229,250,0.06)'}}>
                      <div style={{display:'grid',gridTemplateColumns:'1fr 1fr',gap:'14px',padding:'10px 0'}}>
                        <div>
                          <div style={{fontSize:'9px',fontWeight:700,color:'#5a7a9a',letterSpacing:'0.5px',marginBottom:'6px'}}>EXTRACTED REQUIREMENTS</div>
                          {t.extractedReqs.map(r=><div key={r} style={{fontSize:'11px',color:'#94a3b8',padding:'2px 0'}}>‚ñ∏ {r}</div>)}
                        </div>
                        <div>
                          <div style={{fontSize:'9px',fontWeight:700,color:'#a78bfa',letterSpacing:'0.5px',marginBottom:'6px'}}>ü§ñ AI INSIGHTS</div>
                          {t.aiInsights.map(a=><div key={a} style={{fontSize:'11px',color:a.includes('‚ö†Ô∏è')?'#fbbf24':a.includes('‚òÖ')?'#86efac':'#c4b5fd',padding:'2px 0',lineHeight:'1.5'}}>{a}</div>)}
                        </div>
                      </div>
                    </div>
                  )}
                </div>
              ))}
            </div>
          )}

          {/* GAPS */}
          {tab==='gaps'&&(
            <div style={{display:'flex',flexDirection:'column',gap:'8px'}}>
              {DEMO_SOW_TASKS.filter(t=>t.gapStatus!=='COVERED').length===0?(
                <div style={{textAlign:'center',padding:'40px',color:'#00ff88',fontSize:'14px',fontWeight:600}}>‚úì All SOW tasks fully covered</div>
              ):(
                DEMO_SOW_TASKS.filter(t=>t.gapStatus!=='COVERED').sort((a,b)=>a.compliance-b.compliance).map(t=>(
                  <div key={t.id} style={{background:'rgba(10,22,40,0.5)',border:`1px solid ${gapColor[t.gapStatus]}20`,borderRadius:'10px',padding:'14px 18px',borderLeft:`3px solid ${gapColor[t.gapStatus]}`}}>
                    <div style={{display:'flex',alignItems:'center',gap:'8px',marginBottom:'6px'}}>
                      <span style={{fontFamily:'monospace',fontSize:'11px',fontWeight:700,color:'#00E5FA'}}>{t.sowRef}</span>
                      <span style={{fontSize:'13px',fontWeight:700,color:'white'}}>{t.title}</span>
                      <span style={{fontSize:'10px',fontWeight:700,color:gapColor[t.gapStatus]}}>{t.compliance}%</span>
                    </div>
                    <div style={{fontSize:'12px',color:'#94a3b8',lineHeight:'1.5',marginBottom:'6px'}}>
                      {t.aiInsights.filter(a=>a.includes('‚ö†Ô∏è')).map(a=><div key={a} style={{color:'#fbbf24'}}>{a}</div>)}
                    </div>
                    <div style={{fontSize:'10px',color:'#5a7a9a'}}>Response: {t.responseRef} | CLIN: {t.clinMapping} | Staffing: {t.staffing}</div>
                  </div>
                ))
              )}
            </div>
          )}

          {/* CLIN MAPPING */}
          {tab==='clins'&&(
            <div style={{background:'rgba(10,22,40,0.5)',border:'1px solid rgba(0,229,250,0.08)',borderRadius:'12px',overflow:'auto'}}>
              <table style={{width:'100%',borderCollapse:'collapse',fontSize:'12px'}}>
                <thead><tr style={{borderBottom:'1px solid rgba(0,229,250,0.1)'}}>
                  {['SOW','Task','CLIN','Response','Category','Priority','Hours','Coverage'].map(h=>(
                    <th key={h} style={{padding:'10px 10px',textAlign:'left',color:'#5a7a9a',fontWeight:700,fontSize:'10px',letterSpacing:'0.5px'}}>{h}</th>
                  ))}
                </tr></thead>
                <tbody>
                  {DEMO_SOW_TASKS.map(t=>(
                    <tr key={t.id} style={{borderBottom:'1px solid rgba(0,229,250,0.04)'}} onMouseOver={e=>e.currentTarget.style.background='rgba(0,229,250,0.03)'} onMouseOut={e=>e.currentTarget.style.background='transparent'}>
                      <td style={{padding:'8px 10px',fontFamily:'monospace',fontSize:'11px',color:'#00E5FA',fontWeight:700}}>{t.sowRef}</td>
                      <td style={{padding:'8px 10px',color:'white',fontWeight:500}}>{t.title}</td>
                      <td style={{padding:'8px 10px',fontFamily:'monospace',fontSize:'10px',color:'#a78bfa',fontWeight:600}}>{t.clinMapping}</td>
                      <td style={{padding:'8px 10px',fontFamily:'monospace',fontSize:'10px',color:'#94a3b8'}}>{t.responseRef}</td>
                      <td style={{padding:'8px 10px'}}><span style={{fontSize:'9px',padding:'1px 5px',borderRadius:'3px',background:`${catColor[t.category]}12`,color:catColor[t.category]}}>{t.category}</span></td>
                      <td style={{padding:'8px 10px'}}><span style={{fontSize:'9px',fontWeight:600,color:prioColor[t.priority]}}>{t.priority}</span></td>
                      <td style={{padding:'8px 10px',fontFamily:'monospace',fontSize:'10px',color:'#94a3b8'}}>{t.hoursEst.toLocaleString()}</td>
                      <td style={{padding:'8px 10px'}}><span style={{fontSize:'10px',fontWeight:700,color:gapColor[t.gapStatus]}}>{t.compliance}%</span></td>
                    </tr>
                  ))}
                </tbody>
                <tfoot><tr style={{borderTop:'2px solid rgba(0,229,250,0.1)'}}>
                  <td colSpan={6} style={{padding:'10px',fontWeight:700,color:'white',textAlign:'right'}}>Total Hours:</td>
                  <td style={{padding:'10px',fontFamily:'monospace',fontWeight:800,color:'#00E5FA'}}>{totalHours.toLocaleString()}</td>
                  <td style={{padding:'10px',fontWeight:800,color:avgCompliance>=90?'#00ff88':'#f59e0b'}}>{avgCompliance}% avg</td>
                </tr></tfoot>
              </table>
            </div>
          )}

          <div style={{textAlign:'center',padding:'20px 0',marginTop:'28px',borderTop:'1px solid rgba(0,229,250,0.06)',fontSize:'10px',color:'rgba(148,163,184,0.4)',lineHeight:'1.8'}}>‚ö†Ô∏è AI GENERATED ‚Äî REQUIRES HUMAN REVIEW<br/>MissionPulse v12.0 ‚Äî Mission Meets Tech | CMMC 2.0 L2 Compliant</div>
        </div>
      );
    };
    ReactDOM.createRoot(document.getElementById('root')).render(<App/>);
  </script>
</body>
</html>
