<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MissionPulse - Workload Balancer</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'mp-navy': '#00050F',
                        'mp-cyan': '#00E5FA',
                        'mp-slate': '#0A1628'
                    },
                    fontFamily: {
                        'inter': ['Inter', 'sans-serif']
                    }
                }
            }
        }
    </script>
    <style>
        * { font-family: 'Inter', sans-serif; }
    </style>
</head>
<body class="bg-mp-navy min-h-screen text-white">
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useMemo } = React;

        const teamData = [
            {
                id: 'TM-001',
                name: 'Dr. Sarah Chen',
                role: 'Technical Lead',
                capacity: 40,
                currentHours: 48,
                skills: ['EHR', 'Cloud', 'AI/ML', 'Healthcare IT'],
                assignments: [
                    { opportunity: 'DHA EHR Modernization', role: 'Technical Volume Lead', hours: 25, dueDate: '2024-03-15', priority: 'critical' },
                    { opportunity: 'VA Cloud Migration', role: 'Technical Reviewer', hours: 15, dueDate: '2024-04-01', priority: 'high' },
                    { opportunity: 'CMS Data Analytics', role: 'SME Support', hours: 8, dueDate: '2024-02-28', priority: 'critical' }
                ],
                availability: [
                    { week: 'W9', hours: 48 },
                    { week: 'W10', hours: 35 },
                    { week: 'W11', hours: 25 },
                    { week: 'W12', hours: 40 }
                ]
            },
            {
                id: 'TM-002',
                name: 'Marcus Thompson',
                role: 'Proposal Manager',
                capacity: 40,
                currentHours: 42,
                skills: ['Proposal Management', 'Compliance', 'Shipley', 'Capture'],
                assignments: [
                    { opportunity: 'DHA EHR Modernization', role: 'Proposal Manager', hours: 30, dueDate: '2024-03-15', priority: 'critical' },
                    { opportunity: 'IHS Telehealth', role: 'Capture Lead', hours: 12, dueDate: '2024-05-01', priority: 'medium' }
                ],
                availability: [
                    { week: 'W9', hours: 42 },
                    { week: 'W10', hours: 45 },
                    { week: 'W11', hours: 30 },
                    { week: 'W12', hours: 25 }
                ]
            },
            {
                id: 'TM-003',
                name: 'Jennifer Williams',
                role: 'Past Performance Lead',
                capacity: 40,
                currentHours: 28,
                skills: ['Past Performance', 'References', 'CPARS', 'Customer Relations'],
                assignments: [
                    { opportunity: 'VA Cloud Migration', role: 'Past Performance Lead', hours: 18, dueDate: '2024-04-01', priority: 'high' },
                    { opportunity: 'CMS Data Analytics', role: 'PP Support', hours: 10, dueDate: '2024-02-28', priority: 'critical' }
                ],
                availability: [
                    { week: 'W9', hours: 28 },
                    { week: 'W10', hours: 32 },
                    { week: 'W11', hours: 35 },
                    { week: 'W12', hours: 20 }
                ]
            },
            {
                id: 'TM-004',
                name: 'David Park',
                role: 'Solutions Architect',
                capacity: 40,
                currentHours: 52,
                skills: ['Cloud Architecture', 'AWS', 'DevSecOps', 'FedRAMP'],
                assignments: [
                    { opportunity: 'VA Cloud Migration', role: 'Solutions Architect', hours: 35, dueDate: '2024-04-01', priority: 'high' },
                    { opportunity: 'DoD Cyber IDIQ', role: 'Technical Lead', hours: 17, dueDate: '2024-04-15', priority: 'high' }
                ],
                availability: [
                    { week: 'W9', hours: 52 },
                    { week: 'W10', hours: 48 },
                    { week: 'W11', hours: 40 },
                    { week: 'W12', hours: 35 }
                ]
            },
            {
                id: 'TM-005',
                name: 'Amanda Rodriguez',
                role: 'Pricing Analyst',
                capacity: 40,
                currentHours: 55,
                skills: ['Pricing', 'BOE', 'Cost Analysis', 'GSA Schedules'],
                assignments: [
                    { opportunity: 'DHA EHR Modernization', role: 'Pricing Lead', hours: 25, dueDate: '2024-03-15', priority: 'critical' },
                    { opportunity: 'VA Cloud Migration', role: 'Pricing Lead', hours: 20, dueDate: '2024-04-01', priority: 'high' },
                    { opportunity: 'CMS Data Analytics', role: 'Pricing Support', hours: 10, dueDate: '2024-02-28', priority: 'critical' }
                ],
                availability: [
                    { week: 'W9', hours: 55 },
                    { week: 'W10', hours: 50 },
                    { week: 'W11', hours: 35 },
                    { week: 'W12', hours: 30 }
                ]
            },
            {
                id: 'TM-006',
                name: 'Robert Kim',
                role: 'Technical Writer',
                capacity: 40,
                currentHours: 32,
                skills: ['Technical Writing', 'Editing', 'Graphics', '508 Compliance'],
                assignments: [
                    { opportunity: 'DHA EHR Modernization', role: 'Writer', hours: 20, dueDate: '2024-03-15', priority: 'critical' },
                    { opportunity: 'IHS Telehealth', role: 'Writer', hours: 12, dueDate: '2024-05-01', priority: 'medium' }
                ],
                availability: [
                    { week: 'W9', hours: 32 },
                    { week: 'W10', hours: 38 },
                    { week: 'W11', hours: 40 },
                    { week: 'W12', hours: 25 }
                ]
            }
        ];

        function getUtilizationColor(utilization) {
            if (utilization > 110) return 'text-red-400';
            if (utilization > 100) return 'text-orange-400';
            if (utilization > 80) return 'text-yellow-400';
            return 'text-green-400';
        }

        function getUtilizationBg(utilization) {
            if (utilization > 110) return 'bg-red-500';
            if (utilization > 100) return 'bg-orange-500';
            if (utilization > 80) return 'bg-yellow-500';
            return 'bg-green-500';
        }

        function TeamMemberCard({ member, onSelect, isSelected }) {
            const utilization = Math.round((member.currentHours / member.capacity) * 100);
            
            return (
                <div 
                    className={`bg-mp-slate rounded-xl p-4 cursor-pointer transition-all hover:bg-mp-slate/80 ${isSelected ? 'ring-2 ring-mp-cyan' : ''}`}
                    onClick={() => onSelect(member)}
                >
                    <div className="flex items-start gap-3 mb-3">
                        <div className="w-12 h-12 bg-mp-cyan rounded-full flex items-center justify-center text-mp-navy font-bold">
                            {member.name.split(' ').map(n => n[0]).join('')}
                        </div>
                        <div className="flex-1">
                            <h3 className="font-semibold text-white">{member.name}</h3>
                            <p className="text-sm text-gray-400">{member.role}</p>
                        </div>
                        <span className={`text-lg font-bold ${getUtilizationColor(utilization)}`}>
                            {utilization}%
                        </span>
                    </div>

                    <div className="mb-3">
                        <div className="flex justify-between text-xs text-gray-400 mb-1">
                            <span>Workload</span>
                            <span>{member.currentHours}/{member.capacity}h</span>
                        </div>
                        <div className="h-2 bg-mp-navy rounded-full overflow-hidden">
                            <div 
                                className={`h-full ${getUtilizationBg(utilization)} transition-all duration-500`}
                                style={{ width: `${Math.min(utilization, 150)}%` }}
                            />
                        </div>
                    </div>

                    <div className="flex flex-wrap gap-1">
                        {member.skills.slice(0, 3).map((skill, idx) => (
                            <span key={idx} className="px-2 py-0.5 bg-mp-navy rounded text-xs text-gray-400">
                                {skill}
                            </span>
                        ))}
                    </div>

                    <div className="mt-3 pt-3 border-t border-gray-800 text-xs text-gray-400">
                        {member.assignments.length} active assignments
                    </div>
                </div>
            );
        }

        function AssignmentRow({ assignment }) {
            return (
                <div className={`flex items-center justify-between p-3 rounded-lg ${
                    assignment.priority === 'critical' ? 'bg-red-500/10 border border-red-500/30' :
                    assignment.priority === 'high' ? 'bg-orange-500/10 border border-orange-500/30' :
                    'bg-mp-navy/50'
                }`}>
                    <div>
                        <p className="text-sm text-white">{assignment.opportunity}</p>
                        <p className="text-xs text-gray-400">{assignment.role}</p>
                    </div>
                    <div className="text-right">
                        <p className="font-semibold text-mp-cyan">{assignment.hours}h</p>
                        <p className="text-xs text-gray-400">Due: {assignment.dueDate}</p>
                    </div>
                </div>
            );
        }

        function CapacityChart({ member }) {
            const maxHours = Math.max(...member.availability.map(a => a.hours), member.capacity);
            
            return (
                <div className="bg-mp-slate rounded-xl p-4">
                    <h3 className="font-semibold text-white mb-4">4-Week Forecast</h3>
                    <div className="flex items-end justify-between gap-2 h-32">
                        {member.availability.map((week, idx) => {
                            const utilization = (week.hours / member.capacity) * 100;
                            return (
                                <div key={idx} className="flex-1 flex flex-col items-center">
                                    <div className="w-full flex flex-col items-center justify-end h-24 relative">
                                        {/* Capacity line */}
                                        <div 
                                            className="absolute w-full border-t-2 border-dashed border-gray-600"
                                            style={{ bottom: `${(member.capacity / maxHours) * 100}%` }}
                                        />
                                        {/* Bar */}
                                        <div 
                                            className={`w-full ${getUtilizationBg(utilization)} rounded-t-lg transition-all duration-500`}
                                            style={{ height: `${(week.hours / maxHours) * 100}%` }}
                                        />
                                    </div>
                                    <p className="text-xs text-gray-400 mt-2">{week.week}</p>
                                    <p className={`text-xs font-medium ${getUtilizationColor(utilization)}`}>{week.hours}h</p>
                                </div>
                            );
                        })}
                    </div>
                    <div className="flex items-center justify-center gap-4 mt-4 text-xs text-gray-400">
                        <span className="flex items-center gap-1">
                            <span className="w-8 border-t-2 border-dashed border-gray-600"></span>
                            Capacity ({member.capacity}h)
                        </span>
                    </div>
                </div>
            );
        }

        function App() {
            const [selectedMember, setSelectedMember] = useState(teamData[0]);
            const [sortBy, setSortBy] = useState('utilization');

            const sortedTeam = useMemo(() => {
                return [...teamData].sort((a, b) => {
                    if (sortBy === 'utilization') {
                        return (b.currentHours / b.capacity) - (a.currentHours / a.capacity);
                    }
                    if (sortBy === 'name') {
                        return a.name.localeCompare(b.name);
                    }
                    return b.assignments.length - a.assignments.length;
                });
            }, [sortBy]);

            const metrics = useMemo(() => {
                const totalCapacity = teamData.reduce((sum, m) => sum + m.capacity, 0);
                const totalHours = teamData.reduce((sum, m) => sum + m.currentHours, 0);
                const avgUtilization = Math.round((totalHours / totalCapacity) * 100);
                const overloaded = teamData.filter(m => m.currentHours > m.capacity).length;
                const underutilized = teamData.filter(m => (m.currentHours / m.capacity) < 0.7).length;
                return { totalCapacity, totalHours, avgUtilization, overloaded, underutilized };
            }, []);

            return (
                <div className="min-h-screen bg-mp-navy">
                    {/* Header */}
                    <header className="bg-mp-slate border-b border-gray-800 px-6 py-4">
                        <div className="flex items-center justify-between">
                            <div className="flex items-center gap-4">
                                <div className="w-10 h-10 bg-gradient-to-br from-mp-cyan to-blue-600 rounded-lg flex items-center justify-center">
                                    <span className="text-xl">⚖️</span>
                                </div>
                                <div>
                                    <h1 className="text-xl font-bold text-white">Workload Balancer</h1>
                                    <p className="text-sm text-gray-400">Team capacity and resource allocation</p>
                                </div>
                            </div>
                            <div className="flex items-center gap-4">
                                <select 
                                    value={sortBy}
                                    onChange={(e) => setSortBy(e.target.value)}
                                    className="bg-mp-navy border border-gray-700 rounded-lg px-4 py-2 text-sm text-white"
                                >
                                    <option value="utilization">Sort by Utilization</option>
                                    <option value="name">Sort by Name</option>
                                    <option value="assignments">Sort by Assignments</option>
                                </select>
                                <button className="bg-mp-cyan text-mp-navy px-4 py-2 rounded-lg font-medium hover:bg-mp-cyan/90 transition-colors">
                                    + Assign Resource
                                </button>
                            </div>
                        </div>
                    </header>

                    {/* Metrics */}
                    <div className="px-6 py-4 border-b border-gray-800">
                        <div className="grid grid-cols-5 gap-4">
                            <div className="bg-mp-slate rounded-xl p-4 text-center">
                                <p className="text-3xl font-bold text-white">{teamData.length}</p>
                                <p className="text-sm text-gray-400">Team Members</p>
                            </div>
                            <div className="bg-mp-slate rounded-xl p-4 text-center">
                                <p className={`text-3xl font-bold ${getUtilizationColor(metrics.avgUtilization)}`}>
                                    {metrics.avgUtilization}%
                                </p>
                                <p className="text-sm text-gray-400">Avg Utilization</p>
                            </div>
                            <div className="bg-mp-slate rounded-xl p-4 text-center">
                                <p className="text-3xl font-bold text-mp-cyan">{metrics.totalHours}/{metrics.totalCapacity}h</p>
                                <p className="text-sm text-gray-400">Total Hours</p>
                            </div>
                            <div className="bg-mp-slate rounded-xl p-4 text-center">
                                <p className="text-3xl font-bold text-red-400">{metrics.overloaded}</p>
                                <p className="text-sm text-gray-400">Overloaded</p>
                            </div>
                            <div className="bg-mp-slate rounded-xl p-4 text-center">
                                <p className="text-3xl font-bold text-green-400">{metrics.underutilized}</p>
                                <p className="text-sm text-gray-400">Available Capacity</p>
                            </div>
                        </div>
                    </div>

                    {/* Main Content */}
                    <div className="flex">
                        {/* Team List */}
                        <div className="w-1/3 border-r border-gray-800 p-4 space-y-4 max-h-[calc(100vh-260px)] overflow-y-auto">
                            {sortedTeam.map(member => (
                                <TeamMemberCard
                                    key={member.id}
                                    member={member}
                                    isSelected={selectedMember?.id === member.id}
                                    onSelect={setSelectedMember}
                                />
                            ))}
                        </div>

                        {/* Detail Panel */}
                        {selectedMember && (
                            <div className="flex-1 p-6 max-h-[calc(100vh-260px)] overflow-y-auto">
                                {/* Member Header */}
                                <div className="bg-mp-slate rounded-xl p-4 mb-6">
                                    <div className="flex items-center gap-4 mb-4">
                                        <div className="w-16 h-16 bg-mp-cyan rounded-full flex items-center justify-center text-mp-navy font-bold text-xl">
                                            {selectedMember.name.split(' ').map(n => n[0]).join('')}
                                        </div>
                                        <div className="flex-1">
                                            <h2 className="text-xl font-bold text-white">{selectedMember.name}</h2>
                                            <p className="text-gray-400">{selectedMember.role}</p>
                                        </div>
                                        <div className="text-right">
                                            <p className={`text-3xl font-bold ${getUtilizationColor((selectedMember.currentHours / selectedMember.capacity) * 100)}`}>
                                                {Math.round((selectedMember.currentHours / selectedMember.capacity) * 100)}%
                                            </p>
                                            <p className="text-sm text-gray-400">Utilization</p>
                                        </div>
                                    </div>

                                    <div className="flex flex-wrap gap-2">
                                        {selectedMember.skills.map((skill, idx) => (
                                            <span key={idx} className="px-3 py-1.5 bg-mp-navy rounded-lg text-sm text-gray-300">
                                                {skill}
                                            </span>
                                        ))}
                                    </div>
                                </div>

                                {/* Capacity Chart */}
                                <div className="mb-6">
                                    <CapacityChart member={selectedMember} />
                                </div>

                                {/* Assignments */}
                                <div className="bg-mp-slate rounded-xl p-4">
                                    <h3 className="font-semibold text-white mb-4">
                                        Current Assignments ({selectedMember.assignments.length})
                                    </h3>
                                    <div className="space-y-3">
                                        {selectedMember.assignments.map((assignment, idx) => (
                                            <AssignmentRow key={idx} assignment={assignment} />
                                        ))}
                                    </div>
                                </div>
                            </div>
                        )}
                    </div>

                    {/* Footer */}
                    <footer className="fixed bottom-0 left-0 right-0 bg-mp-slate border-t border-gray-800 px-6 py-3">
                        <div className="flex items-center justify-between text-sm text-gray-400">
                            <span>MissionPulse v12 • Workload Balancer Module</span>
                            <span className="text-yellow-500">⚠️ AI GENERATED - REQUIRES HUMAN REVIEW</span>
                        </div>
                    </footer>
                </div>
            );
        }

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>
