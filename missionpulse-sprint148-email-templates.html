<!DOCTYPE html>
<!--
FILE: missionpulse-sprint148-email-templates.html
MODULE: Email Templates
SPRINT: 148
ROLE: CEO | COO | PM | CAP | BD
SECURITY: Standard (No CUI)
CMMC: Level 2 Compliant
-->
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Email Templates | MissionPulse</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'mp-navy': '#00050F',
                        'mp-cyan': '#00E5FA',
                        'mp-slate': '#0A1628',
                        'mp-gray': '#1E293B',
                        'mp-success': '#10B981',
                        'mp-warning': '#F59E0B',
                        'mp-danger': '#EF4444'
                    },
                    fontFamily: {
                        'inter': ['Inter', 'sans-serif']
                    }
                }
            }
        }
    </script>
    <style>
        body { font-family: 'Inter', sans-serif; }
        .scrollbar-thin::-webkit-scrollbar { width: 6px; }
        .scrollbar-thin::-webkit-scrollbar-track { background: #0A1628; }
        .scrollbar-thin::-webkit-scrollbar-thumb { background: #00E5FA; border-radius: 3px; }
    </style>
  <script src="rbac-guard.js"></script>
</head>
<body class="bg-mp-navy text-white min-h-screen">
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useEffect } = React;

        // Template Categories
        const CATEGORIES = [
            { id: 'teaming', name: 'Teaming & Partnerships', icon: 'ü§ù', color: 'bg-blue-500' },
            { id: 'proposal', name: 'Proposal Lifecycle', icon: 'üìù', color: 'bg-green-500' },
            { id: 'reviews', name: 'Review Coordination', icon: 'üë•', color: 'bg-purple-500' },
            { id: 'client', name: 'Client Communications', icon: 'üèõÔ∏è', color: 'bg-orange-500' },
            { id: 'internal', name: 'Internal Updates', icon: 'üì¢', color: 'bg-pink-500' },
            { id: 'custom', name: 'Custom Templates', icon: '‚úèÔ∏è', color: 'bg-gray-500' }
        ];

        // Demo Templates
        const DEMO_TEMPLATES = [
            {
                id: 't001',
                category: 'teaming',
                name: 'Teaming Interest Inquiry',
                subject: 'Teaming Opportunity: {{SOLICITATION_NUMBER}} - {{CONTRACT_NAME}}',
                body: `Dear {{RECIPIENT_NAME}},

I hope this message finds you well. I am reaching out on behalf of {{YOUR_COMPANY}} regarding an upcoming opportunity with {{AGENCY}}.

**Opportunity Details:**
- Solicitation: {{SOLICITATION_NUMBER}}
- Contract: {{CONTRACT_NAME}}
- Value: {{CONTRACT_VALUE}}
- Due Date: {{DUE_DATE}}

Based on our understanding of your capabilities in {{PARTNER_CAPABILITY}}, we believe there may be a strong fit for teaming on this effort.

We are seeking partners who can provide:
{{REQUIRED_CAPABILITIES}}

Would you be available for a brief call this week to discuss potential collaboration?

Best regards,
{{YOUR_NAME}}
{{YOUR_TITLE}}
{{YOUR_COMPANY}}
{{YOUR_PHONE}}`,
                variables: ['RECIPIENT_NAME', 'YOUR_COMPANY', 'AGENCY', 'SOLICITATION_NUMBER', 'CONTRACT_NAME', 'CONTRACT_VALUE', 'DUE_DATE', 'PARTNER_CAPABILITY', 'REQUIRED_CAPABILITIES', 'YOUR_NAME', 'YOUR_TITLE', 'YOUR_PHONE'],
                tags: ['BD', 'Teaming', 'Outreach'],
                lastUsed: '2025-01-28'
            },
            {
                id: 't002',
                category: 'teaming',
                name: 'NDA Request',
                subject: 'NDA Request for {{CONTRACT_NAME}} Teaming Discussion',
                body: `Dear {{RECIPIENT_NAME}},

Thank you for your interest in teaming with {{YOUR_COMPANY}} on {{CONTRACT_NAME}}.

Before we proceed with detailed technical discussions, we require execution of a mutual Non-Disclosure Agreement. Please find the attached NDA for your review.

**Key Terms:**
- Duration: {{NDA_DURATION}}
- Scope: Proposal-related discussions for {{SOLICITATION_NUMBER}}
- Governing Law: {{GOVERNING_LAW}}

Please return the executed document by {{DEADLINE}} to maintain our proposal timeline.

If you have any questions or require modifications, please let me know.

Best regards,
{{YOUR_NAME}}`,
                variables: ['RECIPIENT_NAME', 'YOUR_COMPANY', 'CONTRACT_NAME', 'NDA_DURATION', 'SOLICITATION_NUMBER', 'GOVERNING_LAW', 'DEADLINE', 'YOUR_NAME'],
                tags: ['Legal', 'Teaming', 'NDA'],
                lastUsed: '2025-01-25'
            },
            {
                id: 't003',
                category: 'proposal',
                name: 'Kickoff Meeting Invitation',
                subject: 'KICKOFF: {{CONTRACT_NAME}} Proposal Team Meeting',
                body: `Team,

You are invited to the kickoff meeting for our {{CONTRACT_NAME}} proposal effort.

**Meeting Details:**
- Date: {{MEETING_DATE}}
- Time: {{MEETING_TIME}}
- Location: {{MEETING_LOCATION}}
- Virtual Link: {{MEETING_LINK}}

**Agenda:**
1. Opportunity Overview & Win Strategy
2. RFP Requirements Walkthrough
3. Team Roles & Responsibilities
4. Schedule & Key Milestones
5. Questions & Next Steps

**Pre-Read Materials:**
- RFP Document
- Compliance Matrix (Draft)
- Win Theme Recommendations

Please confirm your attendance by {{RSVP_DATE}}.

{{YOUR_NAME}}
Proposal Manager`,
                variables: ['CONTRACT_NAME', 'MEETING_DATE', 'MEETING_TIME', 'MEETING_LOCATION', 'MEETING_LINK', 'RSVP_DATE', 'YOUR_NAME'],
                tags: ['Kickoff', 'Meeting', 'Team'],
                lastUsed: '2025-01-27'
            },
            {
                id: 't004',
                category: 'proposal',
                name: 'Section Assignment',
                subject: 'ASSIGNMENT: {{SECTION_NAME}} - {{CONTRACT_NAME}}',
                body: `Dear {{AUTHOR_NAME}},

You have been assigned as the lead author for the following proposal section:

**Assignment Details:**
- Proposal: {{CONTRACT_NAME}}
- Section: {{SECTION_NAME}}
- Volume: {{VOLUME_NUMBER}}
- Page Limit: {{PAGE_LIMIT}}

**Key Requirements:**
{{SECTION_REQUIREMENTS}}

**Schedule:**
- First Draft Due: {{DRAFT_DUE}}
- Pink Team Review: {{PINK_TEAM_DATE}}
- Final Due: {{FINAL_DUE}}

**Resources:**
- RFP Reference: Section {{RFP_SECTION}}
- SME Contact: {{SME_NAME}}
- Past Performance: {{PAST_PERF_REF}}

Please acknowledge receipt and reach out with any questions.

{{YOUR_NAME}}
Proposal Manager`,
                variables: ['AUTHOR_NAME', 'CONTRACT_NAME', 'SECTION_NAME', 'VOLUME_NUMBER', 'PAGE_LIMIT', 'SECTION_REQUIREMENTS', 'DRAFT_DUE', 'PINK_TEAM_DATE', 'FINAL_DUE', 'RFP_SECTION', 'SME_NAME', 'PAST_PERF_REF', 'YOUR_NAME'],
                tags: ['Assignment', 'Author', 'Section'],
                lastUsed: '2025-01-26'
            },
            {
                id: 't005',
                category: 'reviews',
                name: 'Color Team Review Invitation',
                subject: '{{COLOR_TEAM}} TEAM REVIEW: {{CONTRACT_NAME}} - {{REVIEW_DATE}}',
                body: `{{COLOR_TEAM}} Team Reviewers,

You are invited to participate in the {{COLOR_TEAM}} Team review for {{CONTRACT_NAME}}.

**Review Details:**
- Date: {{REVIEW_DATE}}
- Time: {{REVIEW_TIME}}
- Duration: {{REVIEW_DURATION}}
- Location: {{REVIEW_LOCATION}}

**Your Focus Area:**
{{REVIEWER_ASSIGNMENT}}

**Review Materials:** (Available {{MATERIALS_DATE}})
- Proposal Draft
- Compliance Matrix
- Win Themes Document
- Scoring Criteria

**Deliverable:**
Please provide written comments using the attached template by {{COMMENTS_DUE}}.

**Review Criteria:**
{{REVIEW_CRITERIA}}

Contact {{PM_NAME}} with any questions.

Thank you for your support!`,
                variables: ['COLOR_TEAM', 'CONTRACT_NAME', 'REVIEW_DATE', 'REVIEW_TIME', 'REVIEW_DURATION', 'REVIEW_LOCATION', 'REVIEWER_ASSIGNMENT', 'MATERIALS_DATE', 'COMMENTS_DUE', 'REVIEW_CRITERIA', 'PM_NAME'],
                tags: ['Review', 'Color Team', 'Pink', 'Red', 'Gold'],
                lastUsed: '2025-01-24'
            },
            {
                id: 't006',
                category: 'reviews',
                name: 'Review Feedback Summary',
                subject: '{{COLOR_TEAM}} TEAM RESULTS: {{CONTRACT_NAME}}',
                body: `Team,

Thank you to everyone who participated in the {{COLOR_TEAM}} Team review for {{CONTRACT_NAME}}. Below is a summary of the findings.

**Overall Assessment:** {{OVERALL_SCORE}}

**Volume Scores:**
{{VOLUME_SCORES}}

**Key Strengths:**
{{STRENGTHS}}

**Critical Findings (Must Fix):**
{{CRITICAL_FINDINGS}}

**Recommendations:**
{{RECOMMENDATIONS}}

**Next Steps:**
1. Authors address critical findings by {{RESPONSE_DATE}}
2. Follow-up review scheduled for {{FOLLOWUP_DATE}}
3. {{NEXT_MILESTONE}}

The detailed comments spreadsheet is attached.

{{YOUR_NAME}}`,
                variables: ['COLOR_TEAM', 'CONTRACT_NAME', 'OVERALL_SCORE', 'VOLUME_SCORES', 'STRENGTHS', 'CRITICAL_FINDINGS', 'RECOMMENDATIONS', 'RESPONSE_DATE', 'FOLLOWUP_DATE', 'NEXT_MILESTONE', 'YOUR_NAME'],
                tags: ['Review', 'Results', 'Feedback'],
                lastUsed: '2025-01-23'
            },
            {
                id: 't007',
                category: 'client',
                name: 'Questions to Government',
                subject: 'Industry Questions: {{SOLICITATION_NUMBER}} - {{YOUR_COMPANY}}',
                body: `Dear Contracting Officer,

{{YOUR_COMPANY}} respectfully submits the following questions regarding {{SOLICITATION_NUMBER}} - {{CONTRACT_NAME}}.

**Question 1:**
Reference: {{RFP_REF_1}}
Question: {{QUESTION_1}}

**Question 2:**
Reference: {{RFP_REF_2}}
Question: {{QUESTION_2}}

**Question 3:**
Reference: {{RFP_REF_3}}
Question: {{QUESTION_3}}

We appreciate your consideration of these questions and look forward to the Government's response.

Respectfully,
{{YOUR_NAME}}
{{YOUR_TITLE}}
{{YOUR_COMPANY}}
{{CAGE_CODE}}`,
                variables: ['SOLICITATION_NUMBER', 'YOUR_COMPANY', 'CONTRACT_NAME', 'RFP_REF_1', 'QUESTION_1', 'RFP_REF_2', 'QUESTION_2', 'RFP_REF_3', 'QUESTION_3', 'YOUR_NAME', 'YOUR_TITLE', 'CAGE_CODE'],
                tags: ['Questions', 'Government', 'RFP'],
                lastUsed: '2025-01-22'
            },
            {
                id: 't008',
                category: 'internal',
                name: 'Go/No-Go Decision',
                subject: 'DECISION: {{CONTRACT_NAME}} - {{DECISION}}',
                body: `Leadership Team,

Following our Go/No-Go review, the decision for {{CONTRACT_NAME}} is: **{{DECISION}}**

**Opportunity Summary:**
- Agency: {{AGENCY}}
- Contract Value: {{CONTRACT_VALUE}}
- Competition: {{COMPETITION_LEVEL}}
- pWin Assessment: {{PWIN}}%

**Key Factors:**
{{KEY_FACTORS}}

**{{DECISION}} Rationale:**
{{RATIONALE}}

**Next Steps:**
{{NEXT_STEPS}}

**Resource Commitment:**
{{RESOURCE_COMMITMENT}}

Please direct any questions to {{CAPTURE_MANAGER}}.

{{YOUR_NAME}}
{{YOUR_TITLE}}`,
                variables: ['CONTRACT_NAME', 'DECISION', 'AGENCY', 'CONTRACT_VALUE', 'COMPETITION_LEVEL', 'PWIN', 'KEY_FACTORS', 'RATIONALE', 'NEXT_STEPS', 'RESOURCE_COMMITMENT', 'CAPTURE_MANAGER', 'YOUR_NAME', 'YOUR_TITLE'],
                tags: ['Decision', 'Go/No-Go', 'Leadership'],
                lastUsed: '2025-01-21'
            },
            {
                id: 't009',
                category: 'internal',
                name: 'Weekly Status Update',
                subject: 'WEEKLY UPDATE: {{CONTRACT_NAME}} - Week of {{WEEK_DATE}}',
                body: `Team,

Here is the weekly status update for {{CONTRACT_NAME}}.

**Overall Status:** {{OVERALL_STATUS}}

**Schedule:**
- Current Phase: {{CURRENT_PHASE}}
- Days to Deadline: {{DAYS_REMAINING}}
- On Track: {{ON_TRACK}}

**Accomplishments This Week:**
{{ACCOMPLISHMENTS}}

**Planned for Next Week:**
{{NEXT_WEEK_PLANS}}

**Risks & Issues:**
{{RISKS_ISSUES}}

**Action Items:**
{{ACTION_ITEMS}}

**Team Utilization:**
{{TEAM_UTILIZATION}}

Next team meeting: {{NEXT_MEETING}}

{{YOUR_NAME}}`,
                variables: ['CONTRACT_NAME', 'WEEK_DATE', 'OVERALL_STATUS', 'CURRENT_PHASE', 'DAYS_REMAINING', 'ON_TRACK', 'ACCOMPLISHMENTS', 'NEXT_WEEK_PLANS', 'RISKS_ISSUES', 'ACTION_ITEMS', 'TEAM_UTILIZATION', 'NEXT_MEETING', 'YOUR_NAME'],
                tags: ['Status', 'Weekly', 'Update'],
                lastUsed: '2025-01-29'
            },
            {
                id: 't010',
                category: 'proposal',
                name: 'Submission Confirmation',
                subject: 'SUBMITTED: {{CONTRACT_NAME}} - {{SUBMISSION_TIME}}',
                body: `Team,

üéâ **{{CONTRACT_NAME}} HAS BEEN SUBMITTED!**

**Submission Details:**
- Contract: {{CONTRACT_NAME}}
- Solicitation: {{SOLICITATION_NUMBER}}
- Submitted: {{SUBMISSION_TIME}}
- Method: {{SUBMISSION_METHOD}}
- Confirmation #: {{CONFIRMATION_NUMBER}}

**Volumes Submitted:**
{{VOLUMES_LIST}}

**Next Steps:**
1. Archive all proposal materials
2. Prepare for potential clarifications/ENs
3. Orals preparation (if applicable)
4. Lessons learned session: {{LESSONS_DATE}}

Thank you to everyone who contributed to this effort. Your dedication and hard work made this possible.

Special recognition to:
{{RECOGNITION}}

{{YOUR_NAME}}
Proposal Manager`,
                variables: ['CONTRACT_NAME', 'SUBMISSION_TIME', 'SOLICITATION_NUMBER', 'SUBMISSION_METHOD', 'CONFIRMATION_NUMBER', 'VOLUMES_LIST', 'LESSONS_DATE', 'RECOGNITION', 'YOUR_NAME'],
                tags: ['Submission', 'Complete', 'Celebration'],
                lastUsed: '2025-01-20'
            }
        ];

        // Variable input component
        const VariableInput = ({ variable, value, onChange }) => {
            const label = variable.replace(/_/g, ' ').toLowerCase().replace(/\b\w/g, l => l.toUpperCase());
            
            return (
                <div className="space-y-1">
                    <label className="text-xs text-gray-400">{label}</label>
                    {variable.includes('REQUIREMENTS') || variable.includes('FINDINGS') || variable.includes('FACTORS') ? (
                        <textarea 
                            value={value}
                            onChange={(e) => onChange(variable, e.target.value)}
                            rows={3}
                            className="w-full bg-mp-navy border border-mp-gray rounded px-3 py-2 text-sm text-white placeholder-gray-500 focus:border-mp-cyan outline-none resize-none"
                            placeholder={`Enter ${label.toLowerCase()}...`}
                        />
                    ) : (
                        <input 
                            type="text"
                            value={value}
                            onChange={(e) => onChange(variable, e.target.value)}
                            className="w-full bg-mp-navy border border-mp-gray rounded px-3 py-2 text-sm text-white placeholder-gray-500 focus:border-mp-cyan outline-none"
                            placeholder={`Enter ${label.toLowerCase()}...`}
                        />
                    )}
                </div>
            );
        };

        // Template Card
        const TemplateCard = ({ template, onSelect, isSelected }) => {
            const category = CATEGORIES.find(c => c.id === template.category);
            
            return (
                <div 
                    onClick={() => onSelect(template)}
                    className={`bg-mp-slate border rounded-lg p-4 cursor-pointer transition-all hover:border-mp-cyan/50 ${
                        isSelected ? 'border-mp-cyan ring-1 ring-mp-cyan/30' : 'border-mp-gray'
                    }`}
                >
                    <div className="flex items-start justify-between mb-2">
                        <div className="flex items-center gap-2">
                            <span className="text-lg">{category?.icon}</span>
                            <h4 className="font-medium text-white">{template.name}</h4>
                        </div>
                    </div>
                    <p className="text-xs text-gray-400 mb-3 line-clamp-2">{template.subject}</p>
                    <div className="flex items-center justify-between">
                        <div className="flex flex-wrap gap-1">
                            {template.tags.slice(0, 2).map(tag => (
                                <span key={tag} className="px-2 py-0.5 bg-mp-navy rounded text-xs text-gray-400">
                                    {tag}
                                </span>
                            ))}
                        </div>
                        <span className="text-xs text-gray-500">Used {template.lastUsed}</span>
                    </div>
                </div>
            );
        };

        // Preview Panel
        const PreviewPanel = ({ template, variables, onCopy, onSend }) => {
            if (!template) {
                return (
                    <div className="bg-mp-slate border border-mp-gray rounded-lg p-8 h-full flex items-center justify-center">
                        <div className="text-center">
                            <div className="text-4xl mb-4">üìß</div>
                            <p className="text-gray-400">Select a template to preview</p>
                        </div>
                    </div>
                );
            }

            const processedSubject = template.subject.replace(/\{\{(\w+)\}\}/g, (match, key) => 
                variables[key] || `[${key}]`
            );

            const processedBody = template.body.replace(/\{\{(\w+)\}\}/g, (match, key) => 
                variables[key] || `[${key}]`
            );

            return (
                <div className="bg-mp-slate border border-mp-gray rounded-lg h-full flex flex-col">
                    <div className="p-4 border-b border-mp-gray">
                        <div className="flex items-center justify-between mb-2">
                            <span className="text-xs text-gray-500">Subject:</span>
                            <div className="flex gap-2">
                                <button 
                                    onClick={() => onCopy(processedSubject, processedBody)}
                                    className="px-3 py-1 text-xs bg-mp-gray text-gray-300 rounded hover:bg-mp-gray/80 transition-colors"
                                >
                                    üìã Copy
                                </button>
                                <button 
                                    onClick={onSend}
                                    className="px-3 py-1 text-xs bg-mp-cyan text-mp-navy font-medium rounded hover:bg-mp-cyan/90 transition-colors"
                                >
                                    ‚úâÔ∏è Open in Mail
                                </button>
                            </div>
                        </div>
                        <p className="text-white font-medium">{processedSubject}</p>
                    </div>
                    <div className="flex-1 p-4 overflow-y-auto scrollbar-thin">
                        <pre className="text-sm text-gray-300 whitespace-pre-wrap font-sans leading-relaxed">
                            {processedBody}
                        </pre>
                    </div>
                </div>
            );
        };

        // Main App Component
        const EmailTemplates = () => {
            const [templates, setTemplates] = useState(DEMO_TEMPLATES);
            const [selectedCategory, setSelectedCategory] = useState('all');
            const [selectedTemplate, setSelectedTemplate] = useState(null);
            const [variables, setVariables] = useState({});
            const [searchTerm, setSearchTerm] = useState('');
            const [showNewModal, setShowNewModal] = useState(false);
            const [copiedMessage, setCopiedMessage] = useState('');

            useEffect(() => {
                if (selectedTemplate) {
                    const initialVars = {};
                    selectedTemplate.variables.forEach(v => {
                        initialVars[v] = variables[v] || '';
                    });
                    setVariables(initialVars);
                }
            }, [selectedTemplate]);

            const handleVariableChange = (key, value) => {
                setVariables(prev => ({ ...prev, [key]: value }));
            };

            const handleCopy = (subject, body) => {
                const fullEmail = `Subject: ${subject}\n\n${body}`;
                navigator.clipboard.writeText(fullEmail);
                setCopiedMessage('Copied to clipboard!');
                setTimeout(() => setCopiedMessage(''), 2000);
            };

            const handleSendEmail = () => {
                if (!selectedTemplate) return;
                const subject = encodeURIComponent(
                    selectedTemplate.subject.replace(/\{\{(\w+)\}\}/g, (_, k) => variables[k] || `[${k}]`)
                );
                const body = encodeURIComponent(
                    selectedTemplate.body.replace(/\{\{(\w+)\}\}/g, (_, k) => variables[k] || `[${k}]`)
                );
                window.open(`mailto:?subject=${subject}&body=${body}`);
            };

            const filteredTemplates = templates.filter(t => {
                const matchesCategory = selectedCategory === 'all' || t.category === selectedCategory;
                const matchesSearch = t.name.toLowerCase().includes(searchTerm.toLowerCase()) ||
                                     t.tags.some(tag => tag.toLowerCase().includes(searchTerm.toLowerCase()));
                return matchesCategory && matchesSearch;
            });

            const categoryCounts = CATEGORIES.reduce((acc, cat) => {
                acc[cat.id] = templates.filter(t => t.category === cat.id).length;
                return acc;
            }, {});

            return (
                <div className="min-h-screen bg-mp-navy">
                    {/* Header */}
                    <header className="bg-mp-slate border-b border-mp-gray px-6 py-4">
                        <div className="flex items-center justify-between">
                            <div className="flex items-center gap-4">
                                <a href="index.html" className="text-mp-cyan hover:text-mp-cyan/80 transition-colors">
                                    <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M10 19l-7-7m0 0l7-7m-7 7h18" />
                                    </svg>
                                </a>
                                <div>
                                    <h1 className="text-xl font-bold text-white">Email Templates</h1>
                                    <p className="text-sm text-gray-400">Automated communications library</p>
                                </div>
                            </div>
                            
                            <div className="flex items-center gap-3">
                                <input 
                                    type="text"
                                    placeholder="Search templates..."
                                    value={searchTerm}
                                    onChange={(e) => setSearchTerm(e.target.value)}
                                    className="bg-mp-navy border border-mp-gray rounded-lg px-4 py-2 text-sm text-white placeholder-gray-500 focus:border-mp-cyan outline-none w-64"
                                />
                                <button 
                                    onClick={() => setShowNewModal(true)}
                                    className="px-4 py-2 bg-mp-cyan text-mp-navy font-semibold rounded-lg hover:bg-mp-cyan/90 transition-colors flex items-center gap-2"
                                >
                                    <span>+</span>
                                    <span>New Template</span>
                                </button>
                            </div>
                        </div>
                    </header>

                    {/* Category Tabs */}
                    <div className="px-6 py-3 bg-mp-slate/50 border-b border-mp-gray overflow-x-auto">
                        <div className="flex gap-2">
                            <button
                                onClick={() => setSelectedCategory('all')}
                                className={`px-4 py-2 rounded-lg text-sm font-medium whitespace-nowrap transition-colors ${
                                    selectedCategory === 'all' 
                                        ? 'bg-mp-cyan text-mp-navy' 
                                        : 'bg-mp-gray text-gray-300 hover:bg-mp-gray/80'
                                }`}
                            >
                                All Templates ({templates.length})
                            </button>
                            {CATEGORIES.map(cat => (
                                <button
                                    key={cat.id}
                                    onClick={() => setSelectedCategory(cat.id)}
                                    className={`px-4 py-2 rounded-lg text-sm font-medium whitespace-nowrap transition-colors flex items-center gap-2 ${
                                        selectedCategory === cat.id 
                                            ? 'bg-mp-cyan text-mp-navy' 
                                            : 'bg-mp-gray text-gray-300 hover:bg-mp-gray/80'
                                    }`}
                                >
                                    <span>{cat.icon}</span>
                                    <span>{cat.name}</span>
                                    <span className="px-1.5 py-0.5 rounded bg-black/20 text-xs">
                                        {categoryCounts[cat.id]}
                                    </span>
                                </button>
                            ))}
                        </div>
                    </div>

                    {/* Main Content */}
                    <div className="p-6">
                        <div className="grid grid-cols-12 gap-6">
                            {/* Templates List */}
                            <div className="col-span-3">
                                <h3 className="text-sm font-medium text-gray-400 mb-3">
                                    Templates ({filteredTemplates.length})
                                </h3>
                                <div className="space-y-3 max-h-[calc(100vh-280px)] overflow-y-auto scrollbar-thin pr-2">
                                    {filteredTemplates.map(t => (
                                        <TemplateCard 
                                            key={t.id}
                                            template={t}
                                            onSelect={setSelectedTemplate}
                                            isSelected={selectedTemplate?.id === t.id}
                                        />
                                    ))}
                                </div>
                            </div>

                            {/* Variables Panel */}
                            <div className="col-span-3">
                                <h3 className="text-sm font-medium text-gray-400 mb-3">
                                    Variables
                                </h3>
                                {selectedTemplate ? (
                                    <div className="bg-mp-slate border border-mp-gray rounded-lg p-4 max-h-[calc(100vh-280px)] overflow-y-auto scrollbar-thin">
                                        <div className="space-y-4">
                                            {selectedTemplate.variables.map(v => (
                                                <VariableInput 
                                                    key={v}
                                                    variable={v}
                                                    value={variables[v] || ''}
                                                    onChange={handleVariableChange}
                                                />
                                            ))}
                                        </div>
                                        <div className="mt-4 pt-4 border-t border-mp-gray">
                                            <button 
                                                onClick={() => setVariables({})}
                                                className="w-full px-4 py-2 bg-mp-gray text-gray-300 rounded-lg hover:bg-mp-gray/80 transition-colors text-sm"
                                            >
                                                Clear All
                                            </button>
                                        </div>
                                    </div>
                                ) : (
                                    <div className="bg-mp-slate border border-mp-gray rounded-lg p-8 text-center">
                                        <p className="text-gray-500 text-sm">Select a template to edit variables</p>
                                    </div>
                                )}
                            </div>

                            {/* Preview Panel */}
                            <div className="col-span-6">
                                <div className="flex items-center justify-between mb-3">
                                    <h3 className="text-sm font-medium text-gray-400">Preview</h3>
                                    {copiedMessage && (
                                        <span className="text-sm text-mp-success">{copiedMessage}</span>
                                    )}
                                </div>
                                <div className="h-[calc(100vh-280px)]">
                                    <PreviewPanel 
                                        template={selectedTemplate}
                                        variables={variables}
                                        onCopy={handleCopy}
                                        onSend={handleSendEmail}
                                    />
                                </div>
                            </div>
                        </div>
                    </div>

                    {/* New Template Modal */}
                    {showNewModal && (
                        <div className="fixed inset-0 bg-black/70 flex items-center justify-center z-50">
                            <div className="bg-mp-slate border border-mp-gray rounded-xl p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto">
                                <div className="flex items-center justify-between mb-4">
                                    <h3 className="text-lg font-semibold text-white">Create New Template</h3>
                                    <button 
                                        onClick={() => setShowNewModal(false)}
                                        className="text-gray-400 hover:text-white"
                                    >
                                        √ó
                                    </button>
                                </div>
                                
                                <div className="space-y-4">
                                    <div>
                                        <label className="block text-sm text-gray-400 mb-1">Template Name</label>
                                        <input 
                                            type="text"
                                            className="w-full bg-mp-navy border border-mp-gray rounded-lg px-3 py-2 text-white focus:border-mp-cyan outline-none"
                                            placeholder="e.g., Partner Introduction"
                                        />
                                    </div>
                                    
                                    <div>
                                        <label className="block text-sm text-gray-400 mb-1">Category</label>
                                        <select className="w-full bg-mp-navy border border-mp-gray rounded-lg px-3 py-2 text-white focus:border-mp-cyan outline-none">
                                            {CATEGORIES.map(cat => (
                                                <option key={cat.id} value={cat.id}>{cat.icon} {cat.name}</option>
                                            ))}
                                        </select>
                                    </div>

                                    <div>
                                        <label className="block text-sm text-gray-400 mb-1">Subject Line</label>
                                        <input 
                                            type="text"
                                            className="w-full bg-mp-navy border border-mp-gray rounded-lg px-3 py-2 text-white focus:border-mp-cyan outline-none"
                                            placeholder="Use {{VARIABLE}} for dynamic content"
                                        />
                                    </div>

                                    <div>
                                        <label className="block text-sm text-gray-400 mb-1">Email Body</label>
                                        <textarea 
                                            rows={10}
                                            className="w-full bg-mp-navy border border-mp-gray rounded-lg px-3 py-2 text-white focus:border-mp-cyan outline-none resize-none"
                                            placeholder="Write your template content here. Use {{VARIABLE}} syntax for dynamic fields."
                                        />
                                    </div>

                                    <div>
                                        <label className="block text-sm text-gray-400 mb-1">Tags (comma separated)</label>
                                        <input 
                                            type="text"
                                            className="w-full bg-mp-navy border border-mp-gray rounded-lg px-3 py-2 text-white focus:border-mp-cyan outline-none"
                                            placeholder="e.g., BD, Teaming, Outreach"
                                        />
                                    </div>
                                </div>

                                <div className="flex gap-3 mt-6">
                                    <button 
                                        onClick={() => setShowNewModal(false)}
                                        className="flex-1 px-4 py-2 bg-mp-gray text-gray-300 rounded-lg hover:bg-mp-gray/80 transition-colors"
                                    >
                                        Cancel
                                    </button>
                                    <button 
                                        className="flex-1 px-4 py-2 bg-mp-cyan text-mp-navy font-semibold rounded-lg hover:bg-mp-cyan/90 transition-colors"
                                    >
                                        Save Template
                                    </button>
                                </div>
                            </div>
                        </div>
                    )}

                    {/* Footer */}
                    <footer className="fixed bottom-0 left-0 right-0 bg-mp-slate border-t border-mp-gray px-6 py-2">
                        <div className="flex items-center justify-between text-xs text-gray-500">
                            <span>MissionPulse v12 ‚Ä¢ Email Templates ‚Ä¢ Sprint 148</span>
                            <span>AI GENERATED - REQUIRES HUMAN REVIEW</span>
                        </div>
                    </footer>
                </div>
            );
        };

        ReactDOM.createRoot(document.getElementById('root')).render(<EmailTemplates />);
    </script>
</body>
</html>
