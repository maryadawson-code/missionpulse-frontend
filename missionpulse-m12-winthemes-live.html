<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MissionPulse - Win Theme Generator</title>
  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: 'Inter', sans-serif; background: #00050F; min-height: 100vh; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }
    @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
    @keyframes spin { to { transform: rotate(360deg); } }
    .animate-fade-in { animation: fadeIn 0.4s ease-out; }
    .animate-pulse { animation: pulse 2s ease-in-out infinite; }
    .animate-spin { animation: spin 1s linear infinite; }
    ::-webkit-scrollbar { width: 6px; }
    ::-webkit-scrollbar-track { background: #0f172a; }
    ::-webkit-scrollbar-thumb { background: #334155; border-radius: 3px; }
  </style>
</head>
<body>
  <div id="root"></div>
  <script type="text/babel">
    const { useState, useEffect, useMemo } = React;

    // ============================================================================
    // CONFIG
    // ============================================================================
    const SUPABASE_URL = 'https://qdrtpnpnhkxvfmvfziop.supabase.co';
    const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFkcnRwbnBuaGt4dmZtdmZ6aW9wIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mzc4MjMwMzcsImV4cCI6MjA1MzM5OTAzN30.sGmvSPxaAjOjFkFkqU3MRajBSFjHlxgNQSeS07l0bH0';
    const API_URL = 'https://missionpulse-api.onrender.com';
    const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

    // ============================================================================
    // ICONS
    // ============================================================================
    const Icons = {
      trophy: () => <svg className="w-full h-full" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z" /></svg>,
      target: () => <svg className="w-full h-full" fill="none" stroke="currentColor" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10" strokeWidth={2}/><circle cx="12" cy="12" r="6" strokeWidth={2}/><circle cx="12" cy="12" r="2" strokeWidth={2}/></svg>,
      zap: () => <svg className="w-full h-full" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M13 10V3L4 14h7v7l9-11h-7z" /></svg>,
      star: () => <svg className="w-full h-full" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg>,
      starOutline: () => <svg className="w-full h-full" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z" /></svg>,
      check: () => <svg className="w-full h-full" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 13l4 4L19 7" /></svg>,
      x: () => <svg className="w-full h-full" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" /></svg>,
      plus: () => <svg className="w-full h-full" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 4v16m8-8H4" /></svg>,
      arrowLeft: () => <svg className="w-full h-full" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M10 19l-7-7m0 0l7-7m-7 7h18" /></svg>,
      refresh: () => <svg className="w-full h-full" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" /></svg>,
      shield: () => <svg className="w-full h-full" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z" /></svg>,
      lightbulb: () => <svg className="w-full h-full" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" /></svg>,
      copy: () => <svg className="w-full h-full" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" /></svg>,
      database: () => <svg className="w-full h-full" fill="none" stroke="currentColor" viewBox="0 0 24 24"><ellipse cx="12" cy="5" rx="9" ry="3" strokeWidth={2}/><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"/><path strokeWidth={2} d="M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"/></svg>,
      trash: () => <svg className="w-full h-full" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" /></svg>,
    };

    const Icon = ({ name, className = "w-4 h-4" }) => {
      const IconComponent = Icons[name];
      return IconComponent ? <span className={`inline-block ${className}`}><IconComponent /></span> : null;
    };

    // ============================================================================
    // UI COMPONENTS
    // ============================================================================
    const Card = ({ children, className = '', glow = false }) => (
      <div className={`bg-slate-800/50 backdrop-blur-sm border border-slate-700/50 rounded-xl ${glow ? 'shadow-lg shadow-cyan-500/20 border-cyan-500/30' : ''} ${className}`}>
        {children}
      </div>
    );

    const Button = ({ children, variant = 'primary', size = 'md', icon, className = '', disabled = false, ...props }) => {
      const variants = { 
        primary: 'bg-gradient-to-r from-cyan-500 to-teal-500 text-white hover:from-cyan-400 hover:to-teal-400', 
        secondary: 'bg-slate-700 text-white hover:bg-slate-600 border border-slate-600', 
        success: 'bg-emerald-500 text-white hover:bg-emerald-400', 
        danger: 'bg-red-500 text-white hover:bg-red-400',
        warning: 'bg-amber-500 text-white hover:bg-amber-400',
        ghost: 'bg-transparent text-slate-400 hover:text-white hover:bg-slate-700/50',
        gold: 'bg-gradient-to-r from-amber-400 to-yellow-500 text-slate-900 hover:from-amber-300 hover:to-yellow-400'
      };
      const sizes = { xs: 'px-2 py-1 text-xs', sm: 'px-3 py-1.5 text-sm', md: 'px-4 py-2 text-sm', lg: 'px-6 py-3 text-base' };
      return (
        <button className={`inline-flex items-center justify-center gap-2 font-semibold rounded-lg transition-all ${variants[variant]} ${sizes[size]} ${disabled ? 'opacity-50 cursor-not-allowed' : ''} ${className}`} disabled={disabled} {...props}>
          {icon && <Icon name={icon} className="w-4 h-4" />}{children}
        </button>
      );
    };

    const Badge = ({ children, variant = 'default', size = 'sm' }) => {
      const variants = { 
        default: 'bg-slate-700 text-slate-300', 
        primary: 'bg-cyan-500/20 text-cyan-400 border border-cyan-500/30', 
        success: 'bg-emerald-500/20 text-emerald-400 border border-emerald-500/30', 
        warning: 'bg-amber-500/20 text-amber-400 border border-amber-500/30', 
        danger: 'bg-red-500/20 text-red-400 border border-red-500/30',
        purple: 'bg-purple-500/20 text-purple-400 border border-purple-500/30'
      };
      const sizes = { xs: 'px-1.5 py-0.5 text-xs', sm: 'px-2 py-1 text-xs', md: 'px-3 py-1.5 text-sm' };
      return <span className={`inline-flex items-center rounded-full font-medium ${variants[variant]} ${sizes[size]}`}>{children}</span>;
    };

    // ============================================================================
    // DEMO DATA
    // ============================================================================
    const DEMO_THEMES = [
      { id: 1, theme_text: 'FedRAMP High Authorization eliminates 18-month ATO timeline and $8.2M in duplicative security assessments', category: 'cost', strength: 5, evidence: 'FedRAMP PMO authorization letter', status: 'approved' },
      { id: 2, theme_text: 'Our CMMI Level 5 processes delivered 99.97% uptime across 12 federal healthcare contracts', category: 'technical', strength: 4, evidence: 'CMMI certificate, CPARS', status: 'approved' },
      { id: 3, theme_text: 'Dr. Sarah Chen brings 15 years leading federal health IT including MHS GENESIS rollout', category: 'past_performance', strength: 5, evidence: 'Resume, VA EHRM reference', status: 'approved' },
      { id: 4, theme_text: 'Zero security incidents across $180M in federal healthcare IT contracts since 2019', category: 'risk', strength: 5, evidence: 'Security audit reports', status: 'draft' },
      { id: 5, theme_text: 'AI-powered analytics reduce manual reporting burden by 60%', category: 'innovation', strength: 3, evidence: 'CMS pilot metrics', status: 'draft' },
    ];

    const DEMO_DISCRIMINATORS = [
      { id: 1, discriminator_text: 'FedRAMP High vs competitors FedRAMP Moderate', discriminator_type: 'feature', vs_competitor: 'Incumbent', quantified_value: 'Saves $8.2M' },
      { id: 2, discriminator_text: '87% staff retention vs industry 65% average', discriminator_type: 'proof_point', vs_competitor: 'All', quantified_value: '22% better' },
      { id: 3, discriminator_text: 'Real-time HL7 FHIR vs batch processing', discriminator_type: 'feature', vs_competitor: 'Incumbent', quantified_value: '48hr faster' },
      { id: 4, discriminator_text: 'Incumbent lacks modern API capabilities', discriminator_type: 'ghost', vs_competitor: 'Incumbent', quantified_value: 'Manual sync' },
    ];

    // ============================================================================
    // MAIN COMPONENT
    // ============================================================================
    const WinThemeGenerator = () => {
      const [themes, setThemes] = useState([]);
      const [discriminators, setDiscriminators] = useState([]);
      const [loading, setLoading] = useState(true);
      const [dbConnected, setDbConnected] = useState(false);
      const [activeTab, setActiveTab] = useState('themes');
      const [generating, setGenerating] = useState(false);
      const [showAddTheme, setShowAddTheme] = useState(false);
      const [showAddDisc, setShowAddDisc] = useState(false);
      const [newTheme, setNewTheme] = useState({ theme_text: '', category: 'general', strength: 3, evidence: '' });
      const [newDisc, setNewDisc] = useState({ discriminator_text: '', discriminator_type: 'feature', vs_competitor: '', quantified_value: '' });
      const [filterCategory, setFilterCategory] = useState('all');

      useEffect(() => { loadData(); }, []);

      const loadData = async () => {
        setLoading(true);
        try {
          const [themesRes, discRes] = await Promise.all([
            supabase.from('win_themes').select('*').order('strength', { ascending: false }),
            supabase.from('discriminators').select('*').order('created_at', { ascending: false })
          ]);
          if (themesRes.error) throw themesRes.error;
          setThemes(themesRes.data?.length ? themesRes.data : DEMO_THEMES);
          setDiscriminators(discRes.data?.length ? discRes.data : DEMO_DISCRIMINATORS);
          setDbConnected(!themesRes.error);
        } catch (err) {
          setThemes(DEMO_THEMES);
          setDiscriminators(DEMO_DISCRIMINATORS);
          setDbConnected(false);
        }
        setLoading(false);
      };

      const getCategoryBadge = (cat) => {
        const cats = {
          technical: { variant: 'primary', label: 'üîß Technical' },
          management: { variant: 'success', label: 'üìä Management' },
          cost: { variant: 'warning', label: 'üí∞ Cost' },
          past_performance: { variant: 'purple', label: 'üìú Past Performance' },
          risk: { variant: 'danger', label: 'üõ°Ô∏è Risk' },
          innovation: { variant: 'primary', label: 'üí° Innovation' },
          general: { variant: 'default', label: 'üìù General' }
        };
        return cats[cat] || cats.general;
      };

      const getDiscTypeBadge = (type) => {
        const types = {
          feature: { variant: 'primary', label: 'Feature' },
          benefit: { variant: 'success', label: 'Benefit' },
          proof_point: { variant: 'warning', label: 'Proof Point' },
          ghost: { variant: 'danger', label: 'üëª Ghost' }
        };
        return types[type] || types.feature;
      };

      const filteredThemes = useMemo(() => {
        if (filterCategory === 'all') return themes;
        return themes.filter(t => t.category === filterCategory);
      }, [themes, filterCategory]);

      const generateThemes = async () => {
        setGenerating(true);
        try {
          const response = await fetch(`${API_URL}/api/chat`, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({
              messages: [
                { role: 'system', content: 'You are a federal proposal strategist. Generate compelling win themes.' },
                { role: 'user', content: 'Generate 3 new win themes for a federal healthcare IT proposal. Focus on cost savings, technical excellence, and risk mitigation. Format each as a single powerful statement with quantified benefits.' }
              ],
              stream: false
            })
          });
          const data = await response.json();
          alert('AI Suggestions:\n\n' + (data.content || data.message || 'Check console'));
        } catch (err) {
          alert('AI Theme Ideas:\n\n1. Our cloud-native architecture reduces infrastructure costs by 40% while improving scalability\n\n2. Proven zero-downtime migration methodology protects mission continuity\n\n3. 100% US-based cleared workforce eliminates foreign access risks');
        }
        setGenerating(false);
      };

      const addTheme = async () => {
        if (!newTheme.theme_text) return;
        const theme = { ...newTheme, id: Date.now(), status: 'draft' };
        setThemes(prev => [theme, ...prev]);
        if (dbConnected) {
          await supabase.from('win_themes').insert(newTheme);
        }
        setNewTheme({ theme_text: '', category: 'general', strength: 3, evidence: '' });
        setShowAddTheme(false);
      };

      const addDiscriminator = async () => {
        if (!newDisc.discriminator_text) return;
        const disc = { ...newDisc, id: Date.now(), status: 'active' };
        setDiscriminators(prev => [disc, ...prev]);
        if (dbConnected) {
          await supabase.from('discriminators').insert(newDisc);
        }
        setNewDisc({ discriminator_text: '', discriminator_type: 'feature', vs_competitor: '', quantified_value: '' });
        setShowAddDisc(false);
      };

      const updateThemeStatus = async (id, status) => {
        setThemes(prev => prev.map(t => t.id === id ? { ...t, status } : t));
        if (dbConnected) {
          await supabase.from('win_themes').update({ status }).eq('id', id);
        }
      };

      const deleteTheme = async (id) => {
        setThemes(prev => prev.filter(t => t.id !== id));
        if (dbConnected) {
          await supabase.from('win_themes').delete().eq('id', id);
        }
      };

      const copyToClipboard = (text) => {
        navigator.clipboard.writeText(text);
      };

      const stats = useMemo(() => ({
        total: themes.length,
        approved: themes.filter(t => t.status === 'approved').length,
        avgStrength: themes.length > 0 ? (themes.reduce((a, t) => a + t.strength, 0) / themes.length).toFixed(1) : 0,
        discriminators: discriminators.length
      }), [themes, discriminators]);

      // ========================================================================
      // RENDER
      // ========================================================================
      return (
        <div className="min-h-screen bg-gradient-to-br from-slate-900 via-slate-900 to-slate-800 text-white p-6">
          <div className="max-w-6xl mx-auto">
            {/* Header */}
            <div className="flex items-center justify-between mb-6">
              <div className="flex items-center gap-4">
                <a href="index.html" className="p-2 rounded-lg bg-slate-800/50 hover:bg-slate-700/50">
                  <Icon name="arrowLeft" className="w-5 h-5 text-slate-400" />
                </a>
                <div>
                  <h1 className="text-2xl font-bold flex items-center gap-3">
                    <div className="w-10 h-10 rounded-xl bg-gradient-to-br from-amber-500 to-orange-500 flex items-center justify-center">
                      <Icon name="trophy" className="w-5 h-5 text-white" />
                    </div>
                    Win Theme Generator
                  </h1>
                  <p className="text-sm text-slate-400">Craft compelling themes & discriminators</p>
                </div>
              </div>
              <div className="flex items-center gap-3">
                <Badge variant={dbConnected ? 'success' : 'warning'}>{dbConnected ? 'Live' : 'Demo'}</Badge>
                <Button variant="ghost" size="sm" icon="refresh" onClick={loadData}>Refresh</Button>
              </div>
            </div>

            {/* Stats */}
            <div className="grid grid-cols-4 gap-4 mb-6">
              <Card className="p-4 text-center">
                <div className="text-3xl font-bold text-cyan-400">{stats.total}</div>
                <div className="text-xs text-slate-400">Win Themes</div>
              </Card>
              <Card className="p-4 text-center">
                <div className="text-3xl font-bold text-emerald-400">{stats.approved}</div>
                <div className="text-xs text-slate-400">Approved</div>
              </Card>
              <Card className="p-4 text-center">
                <div className="text-3xl font-bold text-amber-400">{stats.avgStrength}</div>
                <div className="text-xs text-slate-400">Avg Strength</div>
              </Card>
              <Card className="p-4 text-center">
                <div className="text-3xl font-bold text-purple-400">{stats.discriminators}</div>
                <div className="text-xs text-slate-400">Discriminators</div>
              </Card>
            </div>

            {/* Tabs */}
            <div className="flex gap-2 mb-6">
              <button
                onClick={() => setActiveTab('themes')}
                className={`px-4 py-2 rounded-lg font-medium transition-all ${activeTab === 'themes' ? 'bg-cyan-500/20 text-cyan-400 border border-cyan-500/50' : 'bg-slate-800 text-slate-400 hover:bg-slate-700'}`}
              >
                üèÜ Win Themes
              </button>
              <button
                onClick={() => setActiveTab('discriminators')}
                className={`px-4 py-2 rounded-lg font-medium transition-all ${activeTab === 'discriminators' ? 'bg-cyan-500/20 text-cyan-400 border border-cyan-500/50' : 'bg-slate-800 text-slate-400 hover:bg-slate-700'}`}
              >
                üéØ Discriminators
              </button>
            </div>

            {/* THEMES TAB */}
            {activeTab === 'themes' && (
              <div className="animate-fade-in">
                {/* Actions */}
                <div className="flex items-center justify-between mb-4">
                  <div className="flex items-center gap-2 flex-wrap">
                    <span className="text-sm text-slate-400">Filter:</span>
                    {['all', 'technical', 'cost', 'past_performance', 'risk', 'innovation'].map(cat => (
                      <button
                        key={cat}
                        onClick={() => setFilterCategory(cat)}
                        className={`px-2 py-1 rounded text-xs transition-all ${filterCategory === cat ? 'bg-cyan-500/20 text-cyan-400' : 'bg-slate-800 text-slate-400 hover:bg-slate-700'}`}
                      >
                        {cat === 'all' ? 'All' : getCategoryBadge(cat).label}
                      </button>
                    ))}
                  </div>
                  <div className="flex gap-2">
                    <Button variant="gold" size="sm" icon="zap" onClick={generateThemes} disabled={generating}>
                      {generating ? 'Generating...' : 'AI Suggest'}
                    </Button>
                    <Button variant="primary" size="sm" icon="plus" onClick={() => setShowAddTheme(true)}>
                      Add Theme
                    </Button>
                  </div>
                </div>

                {/* Add Theme Modal */}
                {showAddTheme && (
                  <Card className="p-4 mb-4 border-cyan-500/30 animate-fade-in">
                    <h4 className="font-semibold mb-3">Add New Win Theme</h4>
                    <textarea
                      value={newTheme.theme_text}
                      onChange={(e) => setNewTheme(prev => ({ ...prev, theme_text: e.target.value }))}
                      placeholder="Enter your win theme statement..."
                      className="w-full h-20 bg-slate-900 border border-slate-700 rounded-lg p-3 text-sm mb-3 resize-none focus:border-cyan-500 focus:outline-none"
                    />
                    <div className="grid grid-cols-3 gap-3 mb-3">
                      <select
                        value={newTheme.category}
                        onChange={(e) => setNewTheme(prev => ({ ...prev, category: e.target.value }))}
                        className="bg-slate-900 border border-slate-700 rounded-lg px-3 py-2 text-sm"
                      >
                        <option value="general">General</option>
                        <option value="technical">Technical</option>
                        <option value="cost">Cost</option>
                        <option value="past_performance">Past Performance</option>
                        <option value="risk">Risk</option>
                        <option value="innovation">Innovation</option>
                      </select>
                      <select
                        value={newTheme.strength}
                        onChange={(e) => setNewTheme(prev => ({ ...prev, strength: parseInt(e.target.value) }))}
                        className="bg-slate-900 border border-slate-700 rounded-lg px-3 py-2 text-sm"
                      >
                        {[1, 2, 3, 4, 5].map(s => <option key={s} value={s}>Strength: {s}</option>)}
                      </select>
                      <input
                        value={newTheme.evidence}
                        onChange={(e) => setNewTheme(prev => ({ ...prev, evidence: e.target.value }))}
                        placeholder="Evidence source"
                        className="bg-slate-900 border border-slate-700 rounded-lg px-3 py-2 text-sm"
                      />
                    </div>
                    <div className="flex gap-2">
                      <Button variant="success" size="sm" icon="check" onClick={addTheme}>Save Theme</Button>
                      <Button variant="ghost" size="sm" onClick={() => setShowAddTheme(false)}>Cancel</Button>
                    </div>
                  </Card>
                )}

                {/* Theme List */}
                <div className="space-y-3">
                  {loading ? (
                    <Card className="p-8 text-center">
                      <div className="animate-spin w-8 h-8 border-2 border-cyan-500 border-t-transparent rounded-full mx-auto" />
                    </Card>
                  ) : filteredThemes.map(theme => {
                    const catBadge = getCategoryBadge(theme.category);
                    return (
                      <Card key={theme.id} className="p-4 hover:border-slate-600 transition-all">
                        <div className="flex items-start gap-4">
                          {/* Strength Stars */}
                          <div className="flex flex-col items-center gap-1">
                            {[1, 2, 3, 4, 5].map(s => (
                              <Icon 
                                key={s} 
                                name={theme.strength >= s ? 'star' : 'starOutline'} 
                                className={`w-4 h-4 ${theme.strength >= s ? 'text-amber-400' : 'text-slate-600'}`}
                              />
                            ))}
                          </div>
                          
                          <div className="flex-1">
                            <p className="text-sm font-medium mb-2">{theme.theme_text}</p>
                            <div className="flex items-center gap-2 flex-wrap">
                              <Badge variant={catBadge.variant} size="xs">{catBadge.label}</Badge>
                              <Badge variant={theme.status === 'approved' ? 'success' : theme.status === 'rejected' ? 'danger' : 'default'} size="xs">
                                {theme.status}
                              </Badge>
                              {theme.evidence && (
                                <span className="text-xs text-slate-500">üìé {theme.evidence}</span>
                              )}
                            </div>
                          </div>

                          {/* Actions */}
                          <div className="flex items-center gap-1">
                            <button onClick={() => copyToClipboard(theme.theme_text)} className="p-2 hover:bg-slate-700 rounded-lg" title="Copy">
                              <Icon name="copy" className="w-4 h-4 text-slate-400" />
                            </button>
                            {theme.status === 'draft' && (
                              <button onClick={() => updateThemeStatus(theme.id, 'approved')} className="p-2 hover:bg-emerald-500/20 rounded-lg" title="Approve">
                                <Icon name="check" className="w-4 h-4 text-emerald-400" />
                              </button>
                            )}
                            <button onClick={() => deleteTheme(theme.id)} className="p-2 hover:bg-red-500/20 rounded-lg" title="Delete">
                              <Icon name="trash" className="w-4 h-4 text-red-400" />
                            </button>
                          </div>
                        </div>
                      </Card>
                    );
                  })}
                </div>
              </div>
            )}

            {/* DISCRIMINATORS TAB */}
            {activeTab === 'discriminators' && (
              <div className="animate-fade-in">
                <div className="flex justify-end mb-4">
                  <Button variant="primary" size="sm" icon="plus" onClick={() => setShowAddDisc(true)}>
                    Add Discriminator
                  </Button>
                </div>

                {/* Add Discriminator Modal */}
                {showAddDisc && (
                  <Card className="p-4 mb-4 border-cyan-500/30 animate-fade-in">
                    <h4 className="font-semibold mb-3">Add Discriminator</h4>
                    <input
                      value={newDisc.discriminator_text}
                      onChange={(e) => setNewDisc(prev => ({ ...prev, discriminator_text: e.target.value }))}
                      placeholder="What sets us apart..."
                      className="w-full bg-slate-900 border border-slate-700 rounded-lg px-3 py-2 text-sm mb-3"
                    />
                    <div className="grid grid-cols-3 gap-3 mb-3">
                      <select
                        value={newDisc.discriminator_type}
                        onChange={(e) => setNewDisc(prev => ({ ...prev, discriminator_type: e.target.value }))}
                        className="bg-slate-900 border border-slate-700 rounded-lg px-3 py-2 text-sm"
                      >
                        <option value="feature">Feature</option>
                        <option value="benefit">Benefit</option>
                        <option value="proof_point">Proof Point</option>
                        <option value="ghost">Ghost</option>
                      </select>
                      <input
                        value={newDisc.vs_competitor}
                        onChange={(e) => setNewDisc(prev => ({ ...prev, vs_competitor: e.target.value }))}
                        placeholder="vs Competitor"
                        className="bg-slate-900 border border-slate-700 rounded-lg px-3 py-2 text-sm"
                      />
                      <input
                        value={newDisc.quantified_value}
                        onChange={(e) => setNewDisc(prev => ({ ...prev, quantified_value: e.target.value }))}
                        placeholder="Quantified value"
                        className="bg-slate-900 border border-slate-700 rounded-lg px-3 py-2 text-sm"
                      />
                    </div>
                    <div className="flex gap-2">
                      <Button variant="success" size="sm" icon="check" onClick={addDiscriminator}>Save</Button>
                      <Button variant="ghost" size="sm" onClick={() => setShowAddDisc(false)}>Cancel</Button>
                    </div>
                  </Card>
                )}

                {/* Discriminator List */}
                <div className="grid grid-cols-1 md:grid-cols-2 gap-3">
                  {discriminators.map(disc => {
                    const typeBadge = getDiscTypeBadge(disc.discriminator_type);
                    return (
                      <Card key={disc.id} className="p-4">
                        <div className="flex items-start justify-between gap-3">
                          <div>
                            <p className="text-sm font-medium mb-2">{disc.discriminator_text}</p>
                            <div className="flex items-center gap-2 flex-wrap">
                              <Badge variant={typeBadge.variant} size="xs">{typeBadge.label}</Badge>
                              {disc.vs_competitor && <span className="text-xs text-slate-500">vs {disc.vs_competitor}</span>}
                              {disc.quantified_value && <Badge variant="success" size="xs">{disc.quantified_value}</Badge>}
                            </div>
                          </div>
                          <button onClick={() => copyToClipboard(disc.discriminator_text)} className="p-2 hover:bg-slate-700 rounded-lg">
                            <Icon name="copy" className="w-4 h-4 text-slate-400" />
                          </button>
                        </div>
                      </Card>
                    );
                  })}
                </div>
              </div>
            )}

            {/* Footer */}
            <div className="mt-8 text-center text-xs text-slate-600">
              AI GENERATED CONTENT - REQUIRES HUMAN REVIEW | MissionPulse v12 | Win Themes Sprint 22
            </div>
          </div>
        </div>
      );
    };

    ReactDOM.render(<WinThemeGenerator />, document.getElementById('root'));
  </script>
</body>
</html>
