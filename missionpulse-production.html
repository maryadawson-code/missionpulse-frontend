<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MissionPulse | AI Proposal Command Center</title>
    <meta name="description" content="Enterprise AI-powered proposal management for federal contractors">
    <link rel="icon" type="image/png" sizes="32x32" href="MMT_icon_32px.png">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
      @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500;600&display=swap');
      :root { --mmt-cyan: #00E5FA; --mmt-navy: #00050F; }
      * { margin: 0; padding: 0; box-sizing: border-box; }
      body { font-family: 'Inter', sans-serif; background: var(--mmt-navy); color: #e2e8f0; min-height: 100vh; }
      .font-mono { font-family: 'JetBrains Mono', monospace; }
      ::-webkit-scrollbar { width: 6px; } ::-webkit-scrollbar-track { background: #0a1628; } ::-webkit-scrollbar-thumb { background: #334155; border-radius: 3px; }
      .glass-panel { background: rgba(15, 23, 42, 0.7); backdrop-filter: blur(12px); border: 1px solid rgba(0, 229, 250, 0.12); border-radius: 12px; }
      @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
      @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
      .animate-fadeIn { animation: fadeIn 0.4s ease-out; }
      .animate-pulse { animation: pulse 2s infinite; }
      .hover-lift { transition: transform 0.2s, box-shadow 0.2s; }
      .hover-lift:hover { transform: translateY(-2px); box-shadow: 0 8px 25px -5px rgba(0, 229, 250, 0.15); }
      .live-indicator { width: 8px; height: 8px; border-radius: 50%; background: #22c55e; box-shadow: 0 0 8px #22c55e; }
      .risk-red { border-left: 3px solid #ef4444; background: rgba(239, 68, 68, 0.05); }
      .risk-yellow { border-left: 3px solid #f59e0b; background: rgba(245, 158, 11, 0.05); }
      .risk-green { border-left: 3px solid #22c55e; background: rgba(34, 197, 94, 0.05); }
    </style>
</head>
<body class="overflow-hidden">
    <div id="root"></div>
    <script type="text/babel">
const { useState, useEffect, useMemo, createContext } = React;
const SUPABASE_URL = 'https://djuviwarqdvlbgcfuupa.supabase.co';
const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRqdXZpd2FycWR2bGJnY2Z1dXBhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mzc4MzUyMjQsImV4cCI6MjA1MzQxMTIyNH0.pBPL9l2zL7LLd_A5I--hPBzw5YwG3ajPMtbYsqsxIgQ';
let sb = null;
const getSB = () => { if (!sb && window.supabase) sb = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY); return sb; };
const PHASES = { gate_1: 'Gate 1', blue_team: 'Blue Team', pink_team: 'Pink Team', red_team: 'Red Team', gold_team: 'Gold Team', submitted: 'Submitted' };
const mapO = r => r ? { id: r.id, name: r.title || 'Unnamed', agency: r.agency || 'TBD', ceiling: r.ceiling || 0, priority: r.priority || 'P-1', phase: PHASES[r.shipley_phase] || 'Gate 1', pWin: r.win_probability || 50 } : null;
const mapC = r => r ? { id: r.id, name: r.name, threat: r.threat_level || 'MEDIUM', pWin: r.estimated_pwin || 50, strength: r.strength, weakness: r.weakness, color: r.color || '#64748b' } : null;
const mapR = r => r ? { id: r.id, ref: r.pws_ref, title: r.title, text: r.requirement_text, status: r.status, risk: r.risk_level, owner: r.assigned_owner } : null;
const mapT = r => r ? { id: r.id, name: r.name, cat: r.labor_category, role: r.role, rate: r.hourly_rate, clearance: r.clearance_level, key: r.is_key_personnel, years: r.years_experience } : null;
const DEMO = { opps: [{ id: 'D1', name: 'DHA MHS GENESIS Cloud', agency: 'DHA', ceiling: 98450210, priority: 'P-0', phase: 'Pink Team', pWin: 72 }], comps: [{ id: 'C1', name: 'Leidos', threat: 'HIGH', pWin: 68, strength: 'VA presence', weakness: 'DHA exp', color: '#ef4444' }], reqs: [{ id: 'R1', ref: 'PWS 4.3.1', title: 'FHIR', status: 'HIGH_RISK', risk: 'RED', owner: 'James' }], team: [{ id: 'T1', name: 'Angela Reyes', cat: 'PM III', role: 'PM', rate: 185, clearance: 'TS/SCI', key: true, years: 18 }] };
const RoleContext = createContext(null);
const ROLES = [
  { id: 'CEO', name: 'CEO', full: 'Mary Womack', icon: 'crown', color: '#fbbf24', bg: 'rgba(251,191,36,0.15)', access: ['dashboard','pipeline','warroom','frenemy','compliance','pricing','orals','launch','agents'] },
  { id: 'PM', name: 'Proposal Mgr', full: 'Lisa Martinez', icon: 'clipboard', color: '#60a5fa', bg: 'rgba(96,165,250,0.15)', access: ['dashboard','pipeline','warroom','compliance','writer','hitl','orals'] },
  { id: 'SA', name: 'Solution Arch', full: 'Sarah Chen', icon: 'cpu', color: '#22d3ee', bg: 'rgba(34,211,238,0.15)', access: ['compliance','writer','contracts','orals','agents'] },
  { id: 'FIN', name: 'Pricing', full: 'Jennifer Park', icon: 'calculator', color: '#a855f7', bg: 'rgba(168,85,247,0.15)', access: ['pricing','contracts','launch'] },
  { id: 'CAP', name: 'Capture', full: 'Michael Torres', icon: 'target', color: '#f472b6', bg: 'rgba(244,114,182,0.15)', access: ['dashboard','pipeline','blackhat','warroom','frenemy'] },
];
const MODULES = [
  { id: 'dashboard', name: 'Dashboard', icon: 'home', desc: 'Pipeline overview' },
  { id: 'pipeline', name: 'Pipeline Intel', icon: 'activity', desc: 'Opportunity tracking' },
  { id: 'warroom', name: 'War Room', icon: 'users', desc: 'Competitive intel' },
  { id: 'frenemy', name: 'Frenemy Intel', icon: 'target', desc: 'Competitor analysis' },
  { id: 'compliance', name: 'Iron Dome', icon: 'shield', desc: 'Compliance matrix' },
  { id: 'pricing', name: 'Pricing Studio', icon: 'dollar-sign', desc: 'BOE & labor' },
  { id: 'writer', name: 'AI Writer', icon: 'edit', desc: 'Proposal drafting' },
  { id: 'contracts', name: 'Contracts', icon: 'file-text', desc: 'Terms mgmt' },
  { id: 'hitl', name: 'HITL Review', icon: 'check-square', desc: 'Human review' },
  { id: 'orals', name: 'Orals Coach', icon: 'mic', desc: 'Presentation prep' },
  { id: 'launch', name: 'Launch ROI', icon: 'rocket', desc: 'Win probability' },
  { id: 'agents', name: 'Agent Hub', icon: 'bot', desc: '8 AI specialists' },
];
const Card = ({ children, className = '', onClick }) => <div className={`glass-panel p-4 hover-lift ${className}`} onClick={onClick}>{children}</div>;
const Badge = ({ children, color = '#00E5FA' }) => <span className="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium" style={{ backgroundColor: `${color}20`, color, border: `1px solid ${color}40` }}>{children}</span>;
const Icon = ({ name, size = 18, className = '' }) => {
  const d = { home: 'M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z M9 22V12h6v10', activity: 'M22 12h-4l-3 9L9 3l-3 9H2', users: 'M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2 M9 7a4 4 0 1 0 0 8 4 4 0 0 0 0-8z', target: 'M12 12m-10 0a10 10 0 1 0 20 0a10 10 0 1 0-20 0 M12 12m-6 0a6 6 0 1 0 12 0a6 6 0 1 0-12 0 M12 12m-2 0a2 2 0 1 0 4 0a2 2 0 1 0-4 0', shield: 'M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z', 'dollar-sign': 'M12 1v22 M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6', edit: 'M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7 M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z', 'file-text': 'M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z M14 2v6h6', 'check-square': 'M9 11l3 3L22 4 M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11', mic: 'M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z M19 10v2a7 7 0 0 1-14 0v-2', rocket: 'M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z M12 15l-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z', bot: 'M12 2a2 2 0 0 1 2 2v2h4a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4V4a2 2 0 0 1 2-2z', crown: 'M2 8l4 9h12l4-9-4 3-4-6-4 6-4-3z', clipboard: 'M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2', cpu: 'M4 4h16v16H4z', calculator: 'M4 2h16a2 2 0 0 1 2 2v16a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2z', menu: 'M3 12h18 M3 6h18 M3 18h18' };
  return <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d={d[name] || d.home} /></svg>;
};
const DataBadge = ({ live, count, label }) => <div className={`flex items-center gap-2 px-3 py-1.5 rounded-full text-xs font-medium ${live ? 'bg-emerald-500/20 text-emerald-400' : 'bg-amber-500/20 text-amber-400'}`}><div className={live ? 'live-indicator animate-pulse' : 'w-2 h-2 rounded-full bg-amber-500'} />{live ? `Live ${label} (${count})` : 'Demo'}</div>;
const Loading = ({ text }) => <div className="flex items-center justify-center h-64"><div className="text-center"><div className="animate-spin w-8 h-8 border-2 border-cyan-500 border-t-transparent rounded-full mx-auto mb-4"></div><p className="text-slate-400">{text}</p></div></div>;
const fmt = v => v >= 1e9 ? `$${(v/1e9).toFixed(1)}B` : v >= 1e6 ? `$${(v/1e6).toFixed(1)}M` : v >= 1e3 ? `$${(v/1e3).toFixed(0)}K` : `$${v?.toLocaleString() || 0}`;
const useData = () => {
  const [d, setD] = useState({ opps: [], comps: [], reqs: [], team: [] });
  const [live, setLive] = useState({ opps: false, comps: false, reqs: false, team: false });
  const [loading, setLoading] = useState(true);
  useEffect(() => {
    (async () => {
      const c = getSB();
      try { const { data } = await c?.from('opportunities').select('*').order('created_at', { ascending: false }) || {}; if (data?.length) { setD(p => ({ ...p, opps: data.map(mapO) })); setLive(p => ({ ...p, opps: true })); } else throw 0; } catch { setD(p => ({ ...p, opps: DEMO.opps })); }
      try { const { data } = await c?.from('competitors').select('*') || {}; if (data?.length) { setD(p => ({ ...p, comps: data.map(mapC) })); setLive(p => ({ ...p, comps: true })); } else throw 0; } catch { setD(p => ({ ...p, comps: DEMO.comps })); }
      try { const { data } = await c?.from('compliance_requirements').select('*').order('pws_ref') || {}; if (data?.length) { setD(p => ({ ...p, reqs: data.map(mapR) })); setLive(p => ({ ...p, reqs: true })); } else throw 0; } catch { setD(p => ({ ...p, reqs: DEMO.reqs })); }
      try { const { data } = await c?.from('team_members').select('*').order('hourly_rate', { ascending: false }) || {}; if (data?.length) { setD(p => ({ ...p, team: data.map(mapT) })); setLive(p => ({ ...p, team: true })); } else throw 0; } catch { setD(p => ({ ...p, team: DEMO.team })); }
      setLoading(false);
    })();
  }, []);
  return { d, live, loading };
};
const Dashboard = () => {
  const { d, live, loading } = useData();
  if (loading) return <Loading text="Loading..." />;
  const s = { opps: d.opps.length, value: d.opps.reduce((a, o) => a + (o.ceiling || 0), 0), comps: d.comps.length, reqs: d.reqs.length, team: d.team.length, risk: d.reqs.filter(r => r.risk === 'RED').length };
  return (
    <div className="p-6 space-y-6 animate-fadeIn">
      <div className="flex justify-between items-center"><div><h1 className="text-2xl font-bold text-white">Command Center</h1><p className="text-slate-400">Real-time proposal intelligence</p></div><div className="flex gap-2"><DataBadge live={live.opps} count={s.opps} label="opps" /><DataBadge live={live.comps} count={s.comps} label="competitors" /></div></div>
      <div className="grid grid-cols-6 gap-4">
        <Card className="text-center"><p className="text-xs text-slate-400 mb-1">Pipeline</p><p className="text-2xl font-bold text-cyan-400">{s.opps}</p></Card>
        <Card className="text-center"><p className="text-xs text-slate-400 mb-1">Value</p><p className="text-2xl font-bold text-emerald-400">{fmt(s.value)}</p></Card>
        <Card className="text-center"><p className="text-xs text-slate-400 mb-1">Competitors</p><p className="text-2xl font-bold text-amber-400">{s.comps}</p></Card>
        <Card className="text-center"><p className="text-xs text-slate-400 mb-1">Requirements</p><p className="text-2xl font-bold text-purple-400">{s.reqs}</p></Card>
        <Card className="text-center"><p className="text-xs text-slate-400 mb-1">High Risk</p><p className="text-2xl font-bold text-red-400">{s.risk}</p></Card>
        <Card className="text-center"><p className="text-xs text-slate-400 mb-1">Team</p><p className="text-2xl font-bold text-blue-400">{s.team}</p></Card>
      </div>
      <div className="grid grid-cols-2 gap-6">
        <Card><h3 className="text-lg font-semibold text-white mb-4">Priority Pursuits</h3><div className="space-y-2">{d.opps.slice(0,5).map(o => (<div key={o.id} className="flex justify-between items-center p-3 bg-slate-800/50 rounded-lg"><div><p className="text-sm font-medium text-white">{o.name}</p><p className="text-xs text-slate-500">{o.agency} • {o.phase}</p></div><div className="text-right"><p className="text-sm text-emerald-400 font-mono">{fmt(o.ceiling)}</p><p className="text-xs text-cyan-400">{o.pWin}%</p></div></div>))}</div></Card>
        <Card><h3 className="text-lg font-semibold text-white mb-4">Competitor Threats</h3><div className="space-y-2">{d.comps.slice(0,5).map(c => (<div key={c.id} className="p-3 bg-slate-800/50 rounded-lg" style={{ borderLeft: `3px solid ${c.color}` }}><div className="flex justify-between mb-1"><span className="text-sm font-semibold text-white">{c.name}</span><Badge color={c.threat === 'HIGH' ? '#ef4444' : '#f59e0b'}>{c.threat}</Badge></div><div className="flex items-center gap-2"><div className="flex-1 h-2 bg-slate-700 rounded-full"><div className="h-full rounded-full" style={{ width: `${c.pWin}%`, backgroundColor: c.color }} /></div><span className="text-xs" style={{ color: c.color }}>{c.pWin}%</span></div></div>))}</div></Card>
      </div>
    </div>
  );
};
const Pipeline = () => { const { d, live, loading } = useData(); if (loading) return <Loading text="Loading..." />; const s = { c: d.opps.length, v: d.opps.reduce((a, o) => a + (o.ceiling || 0), 0), p: d.opps.length ? Math.round(d.opps.reduce((a, o) => a + o.pWin, 0) / d.opps.length) : 0 }; return (<div className="p-6 space-y-6 animate-fadeIn"><div className="flex justify-between"><h2 className="text-xl font-bold text-white">Pipeline Intelligence</h2><DataBadge live={live.opps} count={s.c} label="opps" /></div><div className="grid grid-cols-4 gap-4"><Card><p className="text-xs text-slate-400 mb-1">Active</p><p className="text-2xl font-bold text-white">{s.c}</p></Card><Card><p className="text-xs text-slate-400 mb-1">Value</p><p className="text-2xl font-bold text-emerald-400">{fmt(s.v)}</p></Card><Card><p className="text-xs text-slate-400 mb-1">Avg pWin</p><p className="text-2xl font-bold text-cyan-400">{s.p}%</p></Card><Card><p className="text-xs text-slate-400 mb-1">Status</p><p className="text-lg font-bold" style={{ color: live.opps ? '#22c55e' : '#f59e0b' }}>{live.opps ? 'LIVE' : 'DEMO'}</p></Card></div><Card><h3 className="text-lg font-semibold text-white mb-4">Opportunities</h3><table className="w-full"><thead className="bg-slate-800/50"><tr><th className="px-4 py-3 text-left text-xs text-slate-400 uppercase">Opportunity</th><th className="px-4 py-3 text-left text-xs text-slate-400 uppercase">Agency</th><th className="px-4 py-3 text-left text-xs text-slate-400 uppercase">Ceiling</th><th className="px-4 py-3 text-left text-xs text-slate-400 uppercase">Phase</th><th className="px-4 py-3 text-left text-xs text-slate-400 uppercase">pWin</th></tr></thead><tbody className="divide-y divide-slate-700/50">{d.opps.map(o => (<tr key={o.id} className="hover:bg-slate-800/30"><td className="px-4 py-3 text-sm text-white">{o.name}</td><td className="px-4 py-3"><Badge color="#60a5fa">{o.agency}</Badge></td><td className="px-4 py-3 text-sm text-emerald-400 font-mono">{fmt(o.ceiling)}</td><td className="px-4 py-3"><Badge color="#8b5cf6">{o.phase}</Badge></td><td className="px-4 py-3"><div className="flex items-center gap-2"><div className="w-16 h-2 bg-slate-700 rounded-full"><div className="h-full bg-cyan-500 rounded-full" style={{ width: `${o.pWin}%` }} /></div><span className="text-xs text-cyan-400">{o.pWin}%</span></div></td></tr>))}</tbody></table></Card></div>); };
const WarRoom = () => { const { d, live, loading } = useData(); if (loading) return <Loading text="Loading..." />; const tc = { HIGH: '#ef4444', MEDIUM: '#f59e0b', LOW: '#22c55e' }; return (<div className="p-6 space-y-6 animate-fadeIn"><div className="flex justify-between"><h2 className="text-xl font-bold text-white">War Room</h2><div className="flex gap-2"><DataBadge live={live.opps} count={d.opps.length} label="opps" /><DataBadge live={live.comps} count={d.comps.length} label="competitors" /></div></div><div className="grid grid-cols-2 gap-6"><Card><h3 className="text-lg font-semibold text-white mb-4">Competitor Intel</h3><div className="space-y-3">{d.comps.map(c => (<div key={c.id} className="p-3 bg-slate-800/50 rounded-lg" style={{ borderLeft: `3px solid ${tc[c.threat]}` }}><div className="flex justify-between mb-2"><span className="text-sm font-semibold text-white">{c.name}</span><Badge color={tc[c.threat]}>{c.threat}</Badge></div><p className="text-xs text-slate-400"><span className="text-emerald-400">+</span> {c.strength}</p><p className="text-xs text-slate-400"><span className="text-red-400">-</span> {c.weakness}</p></div>))}</div></Card><Card><h3 className="text-lg font-semibold text-white mb-4">Priority Pursuits</h3><div className="space-y-3">{d.opps.slice(0,5).map(o => (<div key={o.id} className="p-3 bg-slate-800/50 rounded-lg flex justify-between items-center"><div><p className="text-sm font-medium text-white">{o.name}</p><p className="text-xs text-slate-500">{o.agency}</p></div><Badge color={o.priority === 'P-0' ? '#ef4444' : '#f59e0b'}>{o.priority}</Badge></div>))}</div></Card></div></div>); };
const IronDome = () => { const { d, live, loading } = useData(); const [f, setF] = useState('ALL'); if (loading) return <Loading text="Loading..." />; const s = { t: d.reqs.length, ok: d.reqs.filter(r => r.status === 'COMPLIANT').length, pa: d.reqs.filter(r => r.status === 'PARTIAL').length, hr: d.reqs.filter(r => r.status === 'HIGH_RISK').length }; const filtered = f === 'ALL' ? d.reqs : d.reqs.filter(r => r.risk === f); return (<div className="p-6 space-y-6 animate-fadeIn"><div className="flex justify-between"><div><h2 className="text-xl font-bold text-white">Iron Dome</h2><p className="text-sm text-slate-400">Compliance Matrix</p></div><DataBadge live={live.reqs} count={s.t} label="requirements" /></div><div className="grid grid-cols-5 gap-4"><Card className="text-center"><p className="text-xs text-slate-400 mb-1">Total</p><p className="text-2xl font-bold text-white">{s.t}</p></Card><Card className="text-center border-l-2 border-emerald-500"><p className="text-xs text-slate-400 mb-1">Compliant</p><p className="text-2xl font-bold text-emerald-400">{s.ok}</p></Card><Card className="text-center border-l-2 border-amber-500"><p className="text-xs text-slate-400 mb-1">Partial</p><p className="text-2xl font-bold text-amber-400">{s.pa}</p></Card><Card className="text-center border-l-2 border-red-500"><p className="text-xs text-slate-400 mb-1">High Risk</p><p className="text-2xl font-bold text-red-400">{s.hr}</p></Card><Card className="text-center"><p className="text-xs text-slate-400 mb-1">Score</p><p className="text-2xl font-bold text-cyan-400">{s.t ? Math.round((s.ok / s.t) * 100) : 0}%</p></Card></div><div className="flex gap-2">{['ALL', 'RED', 'YELLOW', 'GREEN'].map(x => (<button key={x} onClick={() => setF(x)} className={`px-4 py-2 rounded-lg text-xs font-medium ${f === x ? 'bg-cyan-500/20 text-cyan-400 border border-cyan-500/50' : 'bg-slate-800 text-slate-400'}`}>{x}</button>))}</div><Card><h3 className="text-lg font-semibold text-white mb-4">Requirements ({filtered.length})</h3><div className="space-y-2">{filtered.map(r => (<div key={r.id} className={`p-4 rounded-lg risk-${r.risk?.toLowerCase()}`}><div className="flex justify-between"><div><div className="flex items-center gap-3 mb-1"><span className="text-xs font-mono text-cyan-400">{r.ref}</span><span className="text-sm font-semibold text-white">{r.title}</span></div><p className="text-xs text-slate-400">{r.text}</p><p className="text-xs text-slate-500 mt-1">Owner: {r.owner}</p></div><Badge color={r.risk === 'RED' ? '#ef4444' : r.risk === 'YELLOW' ? '#f59e0b' : '#22c55e'}>{r.status?.replace('_', ' ')}</Badge></div></div>))}</div></Card></div>); };
const Pricing = () => { const { d, live, loading } = useData(); if (loading) return <Loading text="Loading..." />; const s = { c: d.team.length, k: d.team.filter(t => t.key).length, r: d.team.length ? Math.round(d.team.reduce((a, t) => a + (t.rate || 0), 0) / d.team.length) : 0 }; const boe = useMemo(() => { const direct = d.team.reduce((a, t) => a + ((t.rate || 0) * 2080), 0) * 5; const oh = direct * 0.35, gna = (direct + oh) * 0.08, profit = (direct + oh + gna) * 0.10; return { direct, oh, gna, profit, total: direct + oh + gna + profit }; }, [d.team]); return (<div className="p-6 space-y-6 animate-fadeIn"><div className="flex justify-between"><div><h2 className="text-xl font-bold text-white">Pricing Studio</h2><p className="text-sm text-slate-400">BOE & Labor</p></div><DataBadge live={live.team} count={s.c} label="team" /></div><div className="grid grid-cols-5 gap-4"><Card className="text-center"><p className="text-xs text-slate-400 mb-1">Team</p><p className="text-2xl font-bold text-white">{s.c}</p></Card><Card className="text-center"><p className="text-xs text-slate-400 mb-1">Key</p><p className="text-2xl font-bold text-amber-400">{s.k}</p></Card><Card className="text-center"><p className="text-xs text-slate-400 mb-1">Blended</p><p className="text-2xl font-bold text-cyan-400">${s.r}/hr</p></Card><Card className="text-center"><p className="text-xs text-slate-400 mb-1">Direct</p><p className="text-2xl font-bold text-blue-400">{fmt(boe.direct)}</p></Card><Card className="text-center"><p className="text-xs text-slate-400 mb-1">5yr BOE</p><p className="text-2xl font-bold text-purple-400">{fmt(boe.total)}</p></Card></div><Card><h3 className="text-lg font-semibold text-white mb-4">Team</h3><table className="w-full"><thead className="bg-slate-800/50"><tr><th className="px-4 py-3 text-left text-xs text-slate-400">Name</th><th className="px-4 py-3 text-left text-xs text-slate-400">Category</th><th className="px-4 py-3 text-left text-xs text-slate-400">Clearance</th><th className="px-4 py-3 text-left text-xs text-slate-400">Rate</th><th className="px-4 py-3 text-left text-xs text-slate-400">Key</th></tr></thead><tbody className="divide-y divide-slate-700/50">{d.team.map(m => (<tr key={m.id} className="hover:bg-slate-800/30"><td className="px-4 py-3"><p className="text-sm text-white">{m.name}</p><p className="text-xs text-slate-500">{m.role}</p></td><td className="px-4 py-3 text-sm text-slate-300">{m.cat}</td><td className="px-4 py-3"><Badge color={m.clearance?.includes('TS') ? '#ef4444' : '#22c55e'}>{m.clearance}</Badge></td><td className="px-4 py-3 text-sm text-emerald-400 font-mono">${m.rate}/hr</td><td className="px-4 py-3">{m.key && <Badge color="#fbbf24">KEY</Badge>}</td></tr>))}</tbody></table></Card></div>); };
const Placeholder = ({ m }) => <div className="p-6 flex items-center justify-center h-64"><div className="text-center"><Icon name={m?.icon || 'home'} size={48} className="text-slate-600 mx-auto mb-4" /><h3 className="text-xl font-semibold text-slate-400">{m?.name || 'Module'}</h3><p className="text-sm text-slate-500 mt-2">{m?.desc || 'Coming soon'}</p></div></div>;
const Sidebar = ({ cur, setCur, role, col, setCol }) => (<div className={`h-full bg-slate-900/95 border-r border-slate-800 flex flex-col transition-all ${col ? 'w-16' : 'w-56'}`}><div className="p-4 border-b border-slate-800 flex items-center justify-between">{!col && <div className="flex items-center gap-2"><div className="w-8 h-8 rounded-lg bg-gradient-to-br from-cyan-400 to-blue-600 flex items-center justify-center"><span className="text-white text-xs font-bold">MP</span></div><div><h1 className="text-sm font-bold text-white">MissionPulse</h1><p className="text-[10px] text-cyan-400">v12.0 Production</p></div></div>}<button onClick={() => setCol(!col)} className="p-1.5 hover:bg-slate-800 rounded"><Icon name="menu" size={16} className="text-slate-400" /></button></div><nav className="flex-1 p-2 space-y-1 overflow-y-auto">{MODULES.filter(m => role.access.includes(m.id) || m.id === 'dashboard').map(m => (<button key={m.id} onClick={() => setCur(m.id)} className={`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg transition-all ${cur === m.id ? 'bg-cyan-500/20 text-cyan-400 border border-cyan-500/30' : 'text-slate-400 hover:bg-slate-800'}`}><Icon name={m.icon} size={18} />{!col && <span className="text-sm font-medium">{m.name}</span>}</button>))}</nav>{!col && <div className="p-3 border-t border-slate-800"><div className="flex items-center gap-2 px-2 py-1.5 rounded-lg" style={{ backgroundColor: role.bg }}><div className="w-6 h-6 rounded-full flex items-center justify-center" style={{ backgroundColor: role.color }}><Icon name={role.icon} size={12} className="text-slate-900" /></div><div><p className="text-xs font-semibold" style={{ color: role.color }}>{role.name}</p><p className="text-[10px] text-slate-500">{role.full}</p></div></div></div>}</div>);
function App() {
  const [role, setRole] = useState(ROLES[0]);
  const [cur, setCur] = useState('dashboard');
  const [col, setCol] = useState(false);
  const render = () => { switch (cur) { case 'dashboard': return <Dashboard />; case 'pipeline': return <Pipeline />; case 'warroom': case 'frenemy': return <WarRoom />; case 'compliance': return <IronDome />; case 'pricing': return <Pricing />; default: return <Placeholder m={MODULES.find(m => m.id === cur)} />; } };
  return (<RoleContext.Provider value={role}><div className="h-screen flex"><Sidebar cur={cur} setCur={setCur} role={role} col={col} setCol={setCol} /><div className="flex-1 flex flex-col overflow-hidden"><div className="h-14 bg-slate-900/95 border-b border-slate-800 flex items-center justify-between px-6"><h2 className="text-lg font-semibold text-white">{MODULES.find(m => m.id === cur)?.name || 'Dashboard'}</h2><select value={role.id} onChange={e => setRole(ROLES.find(r => r.id === e.target.value) || ROLES[0])} className="bg-slate-800 border border-slate-700 rounded-lg px-3 py-1.5 text-sm text-white">{ROLES.map(r => <option key={r.id} value={r.id}>{r.name} - {r.full}</option>)}</select></div><div className="flex-1 overflow-y-auto bg-slate-950">{render()}</div></div></div><div className="fixed bottom-0 left-0 right-0 h-6 bg-slate-900/95 border-t border-slate-800 flex items-center justify-center z-50"><span className="text-[10px] text-slate-500">AI GENERATED - REQUIRES HUMAN REVIEW • MissionPulse v12.0 • © 2026 Mission Meets Tech</span></div></RoleContext.Provider>);
}
ReactDOM.createRoot(document.getElementById('root')).render(<App />);
    </script>
</body>
</html>
