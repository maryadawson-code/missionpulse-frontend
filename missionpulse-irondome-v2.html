<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MissionPulse ‚Äî Iron Dome V2</title>
  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
    *{margin:0;padding:0;box-sizing:border-box}
    body{font-family:'Inter',sans-serif;background:#00050F;min-height:100vh;color:#fff}
    @keyframes fadeIn{from{opacity:0;transform:translateY(8px)}to{opacity:1;transform:translateY(0)}}
    @keyframes shieldPulse{0%,100%{filter:drop-shadow(0 0 6px rgba(0,229,250,.2))}50%{filter:drop-shadow(0 0 16px rgba(0,229,250,.5))}}
    @keyframes scan{0%{background-position:0% 0}100%{background-position:200% 0}}
    .animate-fadeIn{animation:fadeIn .4s ease-out forwards}
    .glass{background:rgba(255,255,255,.03);border:1px solid rgba(255,255,255,.06);backdrop-filter:blur(20px)}
    .glow{box-shadow:0 0 20px rgba(0,229,250,.08)}
    .shield-pulse{animation:shieldPulse 3s ease-in-out infinite}
    .scan-bar{background:linear-gradient(90deg,transparent,rgba(0,229,250,.08),transparent);background-size:200% 100%;animation:scan 3s linear infinite}
    input,textarea,select{font-family:'Inter',sans-serif}
    input:focus,textarea:focus,select:focus{outline:none;box-shadow:0 0 0 2px rgba(0,229,250,.3)}
    .section-card{transition:all .2s;border:1px solid rgba(255,255,255,.06)}
    .section-card:hover{border-color:rgba(0,229,250,.25);transform:translateY(-1px)}
  </style>
</head>
<body>
<div id="root"></div>
<script type="text/babel">
const {useState,useEffect,useMemo} = React;

const SB_URL='https://qdrtpnpnhkxvfmvfziop.supabase.co';
const SB_KEY='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFkcnRwbnBuaGt4dmZtdmZ6aW9wIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzY3MTcyNjUsImV4cCI6MjA1MjI5MzI2NX0.DACT1xnVtJeHx5tL7_K8y1hOx9NyJE7B6UBhPqwHHx8';
var sbClient;try{sbClient=supabase.createClient(SB_URL,SB_KEY)}catch(e){sbClient=null}

const ROLES_ALLOWED=['CEO','COO','CAP','PM','SA','CON','QA','Admin'];

const DEMO_SECTIONS=[
  {id:'ps1',opportunity_id:'opp1',opportunity_name:'DHA EHR Modernization',volume:'Technical',volume_num:1,section:'3.1',title:'Data Migration Approach',owner:'SA',status:'green',compliance_score:95,page_limit:15,current_pages:13,ai_draft:true,ai_confidence:87,review_status:'approved',reviewer:'Mary Womack',last_updated:'2026-02-17T10:00:00Z',compliance_refs:['L.4.1'],win_theme:'Mission-First Healthcare Innovation',notes:'Final version - ready for production'},
  {id:'ps2',opportunity_id:'opp1',opportunity_name:'DHA EHR Modernization',volume:'Technical',volume_num:1,section:'3.2',title:'System Architecture',owner:'SA',status:'yellow',compliance_score:78,page_limit:10,current_pages:7,ai_draft:true,ai_confidence:72,review_status:'in_review',reviewer:'',last_updated:'2026-02-16T14:00:00Z',compliance_refs:['L.4.2'],win_theme:'Mission-First Healthcare Innovation',notes:'Architecture diagram pending from engineering'},
  {id:'ps3',opportunity_id:'opp1',opportunity_name:'DHA EHR Modernization',volume:'Technical',volume_num:1,section:'3.3',title:'Cybersecurity Framework',owner:'CON',status:'yellow',compliance_score:68,page_limit:8,current_pages:5,ai_draft:true,ai_confidence:81,review_status:'draft',reviewer:'',last_updated:'2026-02-15T09:00:00Z',compliance_refs:['L.4.3'],win_theme:'Mission-First Healthcare Innovation',notes:'Need CMMC 2.0 narrative finalized'},
  {id:'ps4',opportunity_id:'opp1',opportunity_name:'DHA EHR Modernization',volume:'Management',volume_num:2,section:'2.1',title:'Program Management Methodology',owner:'PM',status:'green',compliance_score:92,page_limit:12,current_pages:11,ai_draft:false,ai_confidence:null,review_status:'approved',reviewer:'Mary Womack',last_updated:'2026-02-17T08:00:00Z',compliance_refs:['L.5.1'],win_theme:'Proven Transition Excellence',notes:'Human-authored ‚Äî PM lead'},
  {id:'ps5',opportunity_id:'opp1',opportunity_name:'DHA EHR Modernization',volume:'Management',volume_num:2,section:'2.2',title:'Transition Plan',owner:'PM',status:'red',compliance_score:35,page_limit:8,current_pages:3,ai_draft:true,ai_confidence:65,review_status:'draft',reviewer:'',last_updated:'2026-02-14T16:00:00Z',compliance_refs:['L.5.2'],win_theme:'Proven Transition Excellence',notes:'CRITICAL ‚Äî needs zero-disruption language per debrief intel. Only 3 of 8 pages.'},
  {id:'ps6',opportunity_id:'opp1',opportunity_name:'DHA EHR Modernization',volume:'Management',volume_num:2,section:'2.3',title:'Quality Assurance Plan',owner:'QA',status:'red',compliance_score:0,page_limit:6,current_pages:0,ai_draft:false,ai_confidence:null,review_status:'not_started',reviewer:'',last_updated:null,compliance_refs:['L.5.3'],win_theme:null,notes:'NOT STARTED ‚Äî assign to QA lead immediately'},
  {id:'ps7',opportunity_id:'opp1',opportunity_name:'DHA EHR Modernization',volume:'Price',volume_num:3,section:'1.0',title:'Price Volume ‚Äî FFP CLINs',owner:'FIN',status:'yellow',compliance_score:72,page_limit:null,current_pages:null,ai_draft:false,ai_confidence:null,review_status:'in_review',reviewer:'',last_updated:'2026-02-16T11:00:00Z',compliance_refs:['L.6'],win_theme:'Best Value Cost Efficiency',notes:'CUI ‚Äî Rate data restricted. Awaiting final wrap rates from FIN.'},
  {id:'ps8',opportunity_id:'opp1',opportunity_name:'DHA EHR Modernization',volume:'Past Performance',volume_num:4,section:'1.0',title:'Past Performance Narratives',owner:'CAP',status:'green',compliance_score:88,page_limit:10,current_pages:9,ai_draft:true,ai_confidence:91,review_status:'approved',reviewer:'Mary Womack',last_updated:'2026-02-17T12:00:00Z',compliance_refs:[],win_theme:null,notes:'3 CPARs selected ‚Äî all Exceptional/Very Good'},
  {id:'ps9',opportunity_id:'opp2',opportunity_name:'VA Claims Processing AI',volume:'Technical',volume_num:1,section:'2.1',title:'AI/ML Architecture',owner:'SA',status:'yellow',compliance_score:62,page_limit:20,current_pages:8,ai_draft:true,ai_confidence:78,review_status:'draft',reviewer:'',last_updated:'2026-02-15T10:00:00Z',compliance_refs:['L.3.1'],win_theme:'Veteran-Centric AI Automation',notes:'HITL framework section needs expansion'},
  {id:'ps10',opportunity_id:'opp2',opportunity_name:'VA Claims Processing AI',volume:'Technical',volume_num:1,section:'2.2',title:'Data Security & CUI Handling',owner:'CON',status:'red',compliance_score:15,page_limit:10,current_pages:1,ai_draft:false,ai_confidence:null,review_status:'not_started',reviewer:'',last_updated:'2026-02-12T08:00:00Z',compliance_refs:['L.3.2'],win_theme:'Veteran-Centric AI Automation',notes:'CRITICAL GAP ‚Äî Must address NIST AI RMF + FedRAMP for AI components'},
];

function fmtDate(d){if(!d)return '‚Äî';return new Date(d).toLocaleDateString('en-US',{month:'short',day:'numeric',hour:'numeric',minute:'2-digit'})}

function App(){
  const [userRole]=useState('CEO');
  const [dbStatus,setDbStatus]=useState('checking');
  const [loading,setLoading]=useState(true);
  const [sections,setSections]=useState([]);
  const [search,setSearch]=useState('');
  const [volFilter,setVolFilter]=useState('all');
  const [statusFilter,setStatusFilter]=useState('all');
  const [oppFilter,setOppFilter]=useState('all');
  const [expanded,setExpanded]=useState({});

  useEffect(()=>{
    if(!ROLES_ALLOWED.includes(userRole)){window.location.href='/';return}
    loadData();
  },[]);

  async function loadData(){
    try{
      if(!sbClient) throw new Error('No DB');
      const {data,error}=await sbClient.from('proposal_sections').select('*');
      if(error) throw error;
      if(data?.length>0){setSections(data);setDbStatus('live')}
      else{setSections(DEMO_SECTIONS);setDbStatus('demo')}
    }catch{setSections(DEMO_SECTIONS);setDbStatus('demo')}
    finally{setLoading(false)}
  }

  const toggle=(id)=>setExpanded(p=>({...p,[id]:!p[id]}));

  const opps=[...new Set(sections.map(s=>s.opportunity_name))];
  const volumes=[...new Set(sections.map(s=>s.volume))];

  const filtered=sections.filter(s=>{
    const q=search.toLowerCase();
    const matchSearch=!q||s.title.toLowerCase().includes(q)||s.section.toLowerCase().includes(q)||s.owner.toLowerCase().includes(q);
    const matchVol=volFilter==='all'||s.volume===volFilter;
    const matchStatus=statusFilter==='all'||s.status===statusFilter;
    const matchOpp=oppFilter==='all'||s.opportunity_name===oppFilter;
    return matchSearch&&matchVol&&matchStatus&&matchOpp;
  });

  // Group by volume
  const grouped=useMemo(()=>{
    const g={};
    filtered.forEach(s=>{
      const key=`${s.opportunity_name} ‚Äî Vol ${s.volume_num}: ${s.volume}`;
      if(!g[key])g[key]=[];
      g[key].push(s);
    });
    Object.values(g).forEach(arr=>arr.sort((a,b)=>a.section.localeCompare(b.section)));
    return g;
  },[filtered]);

  // Stats
  const stats=useMemo(()=>{
    const total=sections.length;
    const green=sections.filter(s=>s.status==='green').length;
    const yellow=sections.filter(s=>s.status==='yellow').length;
    const red=sections.filter(s=>s.status==='red').length;
    const avgComp=total?Math.round(sections.reduce((a,s)=>a+s.compliance_score,0)/total):0;
    const aiDrafted=sections.filter(s=>s.ai_draft).length;
    const pagesUsed=sections.reduce((a,s)=>a+(s.current_pages||0),0);
    const pagesTotal=sections.reduce((a,s)=>a+(s.page_limit||0),0);
    return{total,green,yellow,red,avgComp,aiDrafted,pagesUsed,pagesTotal};
  },[sections]);

  const stColor=(s)=>({green:'#00BDAE',yellow:'#F59E0B',red:'#EF4444'}[s]||'#64748B');
  const stLabel=(s)=>({green:'On Track',yellow:'At Risk',red:'Critical'}[s]||s);
  const stIcon=(s)=>({green:'üü¢',yellow:'üü°',red:'üî¥'}[s]||'‚ö™');
  const revColor=(r)=>({approved:'#00BDAE',in_review:'#F59E0B',draft:'#3B82F6',not_started:'#EF4444'}[r]||'#64748B');
  const revLabel=(r)=>({approved:'Approved',in_review:'In Review',draft:'Draft',not_started:'Not Started'}[r]||r);

  if(loading) return <div style={{display:'flex',alignItems:'center',justifyContent:'center',minHeight:'100vh',color:'#64748B'}}>Initializing Iron Dome...</div>;

  return(
    <div style={{maxWidth:1440,margin:'0 auto',padding:'24px 20px 80px'}}>
      {/* Header */}
      <div style={{display:'flex',alignItems:'center',justifyContent:'space-between',marginBottom:24,flexWrap:'wrap',gap:12}}>
        <div style={{display:'flex',alignItems:'center',gap:12}}>
          <a href="/" style={{color:'#64748B',textDecoration:'none',fontSize:13}}>‚Üê Dashboard</a>
          <span style={{color:'#1A2942'}}>|</span>
          <span style={{fontSize:13,color:'#64748B'}}>Iron Dome</span>
        </div>
        <div style={{display:'flex',alignItems:'center',gap:8}}>
          <span style={{width:8,height:8,borderRadius:'50%',background:dbStatus==='live'?'#00BDAE':'#F59E0B'}}></span>
          <span style={{fontSize:12,color:dbStatus==='live'?'#00BDAE':'#F59E0B'}}>{dbStatus==='live'?'Supabase Live':'Demo Data'}</span>
        </div>
      </div>

      {/* Title with Shield */}
      <div style={{display:'flex',alignItems:'center',gap:16,marginBottom:24}}>
        <div className="shield-pulse">
          <svg width="48" height="56" viewBox="0 0 80 92" fill="none">
            <path d="M40 4L8 20V44C8 66 22 82 40 88C58 82 72 66 72 44V20L40 4Z" stroke="#00E5FA" strokeWidth="2.5" fill="rgba(0,229,250,.06)"/>
            <polyline points="28,46 34,46 37,38 40,54 43,42 46,46 52,46" stroke="#00E5FA" strokeWidth="2" fill="none" strokeLinecap="round" strokeLinejoin="round"/>
          </svg>
        </div>
        <div>
          <h1 style={{fontSize:28,fontWeight:800}}>Iron Dome</h1>
          <p style={{color:'#94A3B8',fontSize:14}}>Proposal section tracker, compliance shield & AI draft management</p>
        </div>
      </div>

      {/* Shield Status Bar */}
      <div className="glass glow scan-bar" style={{padding:20,borderRadius:14,marginBottom:24}}>
        <div style={{display:'grid',gridTemplateColumns:'repeat(auto-fit,minmax(110px,1fr))',gap:14}}>
          {[
            {label:'Total Sections',val:stats.total,color:'#00E5FA'},
            {label:'On Track',val:stats.green,color:'#00BDAE',icon:'üü¢'},
            {label:'At Risk',val:stats.yellow,color:'#F59E0B',icon:'üü°'},
            {label:'Critical',val:stats.red,color:'#EF4444',icon:'üî¥'},
            {label:'Avg Compliance',val:`${stats.avgComp}%`,color:stats.avgComp>=80?'#00BDAE':stats.avgComp>=50?'#F59E0B':'#EF4444'},
            {label:'AI Drafted',val:stats.aiDrafted,color:'#A855F7'},
            {label:'Pages',val:`${stats.pagesUsed}/${stats.pagesTotal}`,color:'#00E5FA'},
          ].map((s,i)=>(
            <div key={i} style={{textAlign:'center'}}>
              <div style={{fontSize:22,fontWeight:800,color:s.color}}>{s.icon||''}{s.val}</div>
              <div style={{fontSize:10,color:'#94A3B8',marginTop:2}}>{s.label}</div>
            </div>
          ))}
        </div>
        {/* Overall bar */}
        <div style={{marginTop:14,display:'flex',gap:2,height:8,borderRadius:4,overflow:'hidden'}}>
          <div style={{flex:stats.green,background:'#00BDAE',borderRadius:stats.yellow+stats.red===0?'4px':'4px 0 0 4px',transition:'flex .6s'}}/>
          <div style={{flex:stats.yellow,background:'#F59E0B',transition:'flex .6s'}}/>
          <div style={{flex:stats.red,background:'#EF4444',borderRadius:stats.green+stats.yellow===0?'4px':'0 4px 4px 0',transition:'flex .6s'}}/>
        </div>
      </div>

      {/* Filters */}
      <div style={{display:'flex',gap:8,marginBottom:12,flexWrap:'wrap'}}>
        <input value={search} onChange={e=>setSearch(e.target.value)} placeholder="Search sections, owners..." style={{flex:1,minWidth:200,padding:'10px 14px',borderRadius:10,background:'rgba(255,255,255,.04)',border:'1px solid rgba(255,255,255,.08)',color:'#fff',fontSize:13,outline:'none'}}/>
        <select value={oppFilter} onChange={e=>setOppFilter(e.target.value)} style={{padding:'8px 12px',borderRadius:8,background:'#0A1628',border:'1px solid rgba(255,255,255,.08)',color:'#94A3B8',fontSize:12,cursor:'pointer'}}>
          <option value="all">All Opportunities</option>
          {opps.map(o=><option key={o} value={o}>{o}</option>)}
        </select>
      </div>
      <div style={{display:'flex',gap:6,marginBottom:20,flexWrap:'wrap'}}>
        {['all',...volumes].map(v=>(
          <button key={v} onClick={()=>setVolFilter(v)} style={{padding:'6px 14px',borderRadius:7,border:'1px solid',borderColor:volFilter===v?'rgba(0,229,250,.4)':'rgba(255,255,255,.08)',background:volFilter===v?'rgba(0,229,250,.12)':'transparent',color:volFilter===v?'#00E5FA':'#94A3B8',fontSize:11,fontWeight:600,cursor:'pointer',fontFamily:'inherit'}}>{v==='all'?'All Volumes':v}</button>
        ))}
        <span style={{color:'#1A2942',margin:'0 2px'}}>|</span>
        {['all','green','yellow','red'].map(s=>(
          <button key={s} onClick={()=>setStatusFilter(s)} style={{padding:'6px 12px',borderRadius:7,border:'1px solid',borderColor:statusFilter===s?`${stColor(s)}60`:'rgba(255,255,255,.08)',background:statusFilter===s?`${stColor(s)}18`:'transparent',color:statusFilter===s?stColor(s):'#94A3B8',fontSize:11,fontWeight:600,cursor:'pointer',fontFamily:'inherit'}}>{s==='all'?'All Status':stLabel(s)}</button>
        ))}
      </div>

      {/* Sections grouped by volume */}
      {Object.entries(grouped).map(([volKey,secs])=>(
        <div key={volKey} style={{marginBottom:24}}>
          <div style={{fontSize:14,fontWeight:700,color:'#00E5FA',marginBottom:10,padding:'8px 14px',borderRadius:8,background:'rgba(0,229,250,.04)',border:'1px solid rgba(0,229,250,.1)'}}>
            üìÅ {volKey}
            <span style={{float:'right',fontSize:12,color:'#94A3B8',fontWeight:400}}>{secs.length} sections</span>
          </div>

          <div style={{display:'flex',flexDirection:'column',gap:10}}>
            {secs.map((s,i)=>(
              <div key={s.id} className="section-card glass animate-fadeIn" style={{borderRadius:12,overflow:'hidden',animationDelay:`${i*0.04}s`,opacity:0,borderLeft:`4px solid ${stColor(s.status)}`}}>
                <div style={{padding:16,cursor:'pointer'}} onClick={()=>toggle(s.id)}>
                  <div style={{display:'flex',justifyContent:'space-between',alignItems:'flex-start',gap:12}}>
                    <div style={{flex:1}}>
                      <div style={{display:'flex',alignItems:'center',gap:8,marginBottom:4,flexWrap:'wrap'}}>
                        <span style={{fontSize:13,fontWeight:800,color:'#00E5FA'}}>¬ß{s.section}</span>
                        <span style={{fontSize:15,fontWeight:700}}>{s.title}</span>
                        {s.ai_draft&&<span style={{padding:'2px 7px',borderRadius:5,fontSize:9,fontWeight:700,background:'rgba(168,85,247,.15)',color:'#A855F7',border:'1px solid rgba(168,85,247,.25)'}}>ü§ñ AI DRAFT</span>}
                        {s.compliance_refs?.includes('L.6')&&<span style={{padding:'2px 7px',borderRadius:5,fontSize:9,fontWeight:700,background:'rgba(245,158,11,.15)',color:'#F59E0B'}}>üõ°Ô∏è CUI</span>}
                      </div>
                      <div style={{display:'flex',gap:12,fontSize:11,color:'#64748B',flexWrap:'wrap'}}>
                        <span>Owner: <strong style={{color:'#94A3B8'}}>{s.owner}</strong></span>
                        {s.win_theme&&<span>Theme: <strong style={{color:'#94A3B8'}}>{s.win_theme}</strong></span>}
                        <span>Refs: {s.compliance_refs?.join(', ')||'‚Äî'}</span>
                      </div>
                    </div>
                    <div style={{display:'flex',gap:10,alignItems:'center',flexShrink:0}}>
                      {/* Compliance score */}
                      <div style={{textAlign:'center'}}>
                        <div style={{fontSize:18,fontWeight:800,color:s.compliance_score>=80?'#00BDAE':s.compliance_score>=50?'#F59E0B':'#EF4444'}}>{s.compliance_score}%</div>
                        <div style={{fontSize:9,color:'#64748B'}}>COMPLIANCE</div>
                      </div>
                      {/* Status badge */}
                      <div style={{textAlign:'center',minWidth:60}}>
                        <span style={{padding:'4px 10px',borderRadius:6,fontSize:11,fontWeight:600,background:`${stColor(s.status)}18`,color:stColor(s.status)}}>{stIcon(s.status)} {stLabel(s.status)}</span>
                      </div>
                      {/* Pages */}
                      {s.page_limit&&(
                        <div style={{textAlign:'center',minWidth:50}}>
                          <div style={{fontSize:14,fontWeight:700,color:s.current_pages>=s.page_limit?'#EF4444':'#94A3B8'}}>{s.current_pages}/{s.page_limit}</div>
                          <div style={{fontSize:9,color:'#64748B'}}>PAGES</div>
                        </div>
                      )}
                    </div>
                  </div>
                </div>

                {expanded[s.id]&&(
                  <div style={{borderTop:'1px solid rgba(255,255,255,.06)',padding:16,background:'rgba(0,229,250,.015)'}}>
                    <div style={{display:'grid',gridTemplateColumns:'1fr 1fr 1fr 1fr',gap:14,marginBottom:14}}>
                      <div>
                        <div style={{fontSize:11,fontWeight:600,color:'#64748B',marginBottom:4}}>Review Status</div>
                        <span style={{padding:'4px 10px',borderRadius:6,fontSize:11,fontWeight:600,background:`${revColor(s.review_status)}18`,color:revColor(s.review_status)}}>{revLabel(s.review_status)}</span>
                      </div>
                      <div>
                        <div style={{fontSize:11,fontWeight:600,color:'#64748B',marginBottom:4}}>Reviewer</div>
                        <div style={{fontSize:13,color:'#E2E8F0'}}>{s.reviewer||'Unassigned'}</div>
                      </div>
                      <div>
                        <div style={{fontSize:11,fontWeight:600,color:'#64748B',marginBottom:4}}>Last Updated</div>
                        <div style={{fontSize:12,color:'#94A3B8'}}>{fmtDate(s.last_updated)}</div>
                      </div>
                      {s.ai_draft&&s.ai_confidence!=null&&(
                        <div>
                          <div style={{fontSize:11,fontWeight:600,color:'#64748B',marginBottom:4}}>AI Confidence</div>
                          <div style={{display:'flex',alignItems:'center',gap:6}}>
                            <div style={{flex:1,height:6,borderRadius:3,background:'rgba(255,255,255,.06)',overflow:'hidden'}}>
                              <div style={{height:'100%',borderRadius:3,width:`${s.ai_confidence}%`,background:s.ai_confidence>=80?'#A855F7':s.ai_confidence>=60?'#F59E0B':'#EF4444'}}/>
                            </div>
                            <span style={{fontSize:12,fontWeight:700,color:s.ai_confidence>=80?'#A855F7':'#F59E0B'}}>{s.ai_confidence}%</span>
                          </div>
                        </div>
                      )}
                    </div>

                    {/* Page progress */}
                    {s.page_limit&&(
                      <div style={{marginBottom:14}}>
                        <div style={{display:'flex',justifyContent:'space-between',fontSize:11,color:'#64748B',marginBottom:4}}>
                          <span>Page Usage</span>
                          <span style={{color:s.current_pages>=s.page_limit?'#EF4444':s.current_pages>=s.page_limit*.9?'#F59E0B':'#94A3B8'}}>{s.current_pages}/{s.page_limit} pages ({s.page_limit>0?Math.round(s.current_pages/s.page_limit*100):0}%)</span>
                        </div>
                        <div style={{height:6,borderRadius:3,background:'rgba(255,255,255,.06)',overflow:'hidden'}}>
                          <div style={{height:'100%',borderRadius:3,width:`${s.page_limit>0?Math.min(s.current_pages/s.page_limit*100,100):0}%`,background:s.current_pages>=s.page_limit?'#EF4444':s.current_pages>=s.page_limit*.9?'#F59E0B':'#00E5FA',transition:'width .6s'}}/>
                        </div>
                      </div>
                    )}

                    {s.notes&&(
                      <div style={{padding:10,borderRadius:8,background:s.status==='red'?'rgba(239,68,68,.06)':'rgba(245,158,11,.06)',border:`1px solid ${s.status==='red'?'rgba(239,68,68,.15)':'rgba(245,158,11,.1)'}`,fontSize:12,color:'#94A3B8'}}>
                        <strong style={{color:s.status==='red'?'#EF4444':'#F59E0B'}}>Notes:</strong> {s.notes}
                      </div>
                    )}

                    {s.ai_draft&&(
                      <div style={{marginTop:10,padding:8,borderRadius:6,background:'rgba(168,85,247,.06)',border:'1px solid rgba(168,85,247,.1)',fontSize:11,color:'#A855F7',textAlign:'center'}}>
                        ü§ñ AI-generated draft ‚Äî <strong>REQUIRES HUMAN REVIEW</strong> before submission
                      </div>
                    )}
                  </div>
                )}
              </div>
            ))}
          </div>
        </div>
      ))}

      {filtered.length===0&&<div style={{textAlign:'center',padding:40,color:'#64748B',fontSize:13}}>No sections match your filters</div>}

      <footer style={{position:'fixed',bottom:0,left:0,right:0,textAlign:'center',padding:'10px 16px',background:'linear-gradient(transparent,rgba(0,5,15,.95))',zIndex:50}}>
        <div style={{display:'flex',alignItems:'center',justifyContent:'center',gap:8,flexWrap:'wrap'}}>
          <span style={{fontSize:11,color:'#64748B'}}>‚ö†Ô∏è AI GENERATED ‚Äî REQUIRES HUMAN REVIEW</span>
          <span style={{fontSize:11,color:'#475569'}}>|</span>
          <span style={{fontSize:11,color:'#475569'}}>MissionPulse v12.0 ‚Äî Mission Meets Tech</span>
          <span style={{fontSize:11,color:'#475569'}}>|</span>
          <span style={{fontSize:11,color:'#475569'}}>CMMC 2.0 L2 Compliant</span>
        </div>
      </footer>
    </div>
  );
}

ReactDOM.render(<App/>,document.getElementById('root'));
</script>
</body>
</html>
