<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MissionPulse ‚Äî Submission Tracker</title>
<script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
<script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
<style>*{margin:0;padding:0;box-sizing:border-box}body{font-family:'Inter',sans-serif;background:#00050F;min-height:100vh}@keyframes fadeIn{from{opacity:0;transform:translateY(8px)}to{opacity:1;transform:translateY(0)}}.fade-in{animation:fadeIn .3s ease-out forwards}@keyframes pulse{0%,100%{opacity:1}50%{opacity:.6}}</style>
  <script src="rbac-guard.js"></script>
</head>
<body>
<div id="root"></div>
<script type="text/babel">
const SB_URL='https://djuviwarqdvlbgcfuupa.supabase.co';
const SB_KEY='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRqdXZpd2FycWR2bGJnY2Z1dXBhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mzc4MzUyMjQsImV4cCI6MjA1MzQxMTIyNH0.pBPL9l2zL7LLd_A5I--hPBzw5YwG3ajPMtbYsqsxIgQ';
var sbClient=null;let connected=false;
try{sbClient=supabase.createClient(SB_URL,SB_KEY);connected=true}catch(e){}

const DEADLINE=new Date('2026-03-25T14:00:00-05:00');

const VOLUMES=[
  {id:1,name:'Technical Volume',pages:85,maxPages:100,status:'final_qc',uploads:['tech-vol-v4.2.pdf','tech-appendix-A.pdf'],qc:['Page count ‚â§ limit','Section numbering correct','All figures referenced','Headers/footers consistent','Font/margin compliance','Cross-references validated'],qcDone:[true,true,true,true,false,false]},
  {id:2,name:'Management Volume',pages:42,maxPages:50,status:'uploaded',uploads:['mgmt-vol-v3.1.pdf'],qc:['Page count ‚â§ limit','Org chart current','Key personnel resumes included','Transition plan complete','Risk register attached'],qcDone:[true,true,true,true,true]},
  {id:3,name:'Past Performance Volume',pages:18,maxPages:25,status:'uploaded',uploads:['pp-vol-v2.0.pdf','cpars-attachments.pdf'],qc:['Page count ‚â§ limit','All contracts cited','CPARS ratings included','POC info verified'],qcDone:[true,true,true,true]},
  {id:4,name:'Price/Cost Volume',pages:55,maxPages:60,status:'final_qc',uploads:['price-vol-v5.0.xlsx','price-narrative.pdf'],qc:['BOE calculations verified','Labor rates current','Indirect rates approved','Subcontractor pricing included','Price summary table complete','CUI marking applied'],qcDone:[true,true,true,false,false,true]},
  {id:5,name:'Small Business Plan',pages:8,maxPages:15,status:'uploaded',uploads:['sb-plan-v1.2.pdf'],qc:['Subcontracting goals met','SB categories listed','Monitoring plan included'],qcDone:[true,true,true]},
  {id:6,name:'Security Volume',pages:12,maxPages:20,status:'pending',uploads:[],qc:['CMMC attestation included','FedRAMP narrative','Personnel clearance list','Incident response plan'],qcDone:[false,false,false,false]},
  {id:7,name:'Oral Presentation Deck',pages:25,maxPages:30,status:'final_qc',uploads:['orals-deck-v3.pptx'],qc:['Slide count ‚â§ limit','Branding consistent','Speaker notes complete','Q&A prep attached'],qcDone:[true,true,false,false]},
  {id:8,name:'Administrative Volume',pages:6,maxPages:10,status:'uploaded',uploads:['admin-vol-v1.0.pdf','sf330.pdf','reps-certs.pdf'],qc:['SF330 signed','Reps & Certs current','Cage code verified'],qcDone:[true,true,true]},
];

const STATUS_MAP={uploaded:{label:'UPLOADED',color:'text-green-400 bg-green-500/10'},final_qc:{label:'FINAL QC',color:'text-amber-400 bg-amber-500/10'},pending:{label:'PENDING',color:'text-red-400 bg-red-500/10'}};

const ACTIVITY=[
  {time:'2026-03-20 09:15',user:'Tom Garcia',action:'Uploaded mgmt-vol-v3.1.pdf','volume':'Management'},
  {time:'2026-03-20 08:42',user:'Mike Chen',action:'Uploaded tech-vol-v4.2.pdf','volume':'Technical'},
  {time:'2026-03-19 16:30',user:'James Wilson',action:'Updated price-vol-v5.0.xlsx','volume':'Price/Cost'},
  {time:'2026-03-19 14:00',user:'Sarah Johnson',action:'Completed Blue Team QC on Past Performance','volume':'Past Performance'},
  {time:'2026-03-19 11:20',user:'Mary Womack',action:'Approved orals-deck-v3.pptx for final review','volume':'Oral Presentation'},
  {time:'2026-03-18 17:45',user:'Lisa Brown',action:'Uploaded reps-certs.pdf','volume':'Administrative'},
  {time:'2026-03-18 10:00',user:'Tom Garcia',action:'Completed compliance check on SB plan','volume':'Small Business'},
];

function App(){
  const[now,setNow]=React.useState(new Date());
  const[tab,setTab]=React.useState('volumes');
  const[expandedVol,setExpandedVol]=React.useState(null);

  React.useEffect(()=>{const t=setInterval(()=>setNow(new Date()),1000);return()=>clearInterval(t)},[]);

  const diff=DEADLINE-now;
  const days=Math.max(0,Math.floor(diff/(1000*60*60*24)));
  const hrs=Math.max(0,Math.floor((diff%(1000*60*60*24))/(1000*60*60)));
  const mins=Math.max(0,Math.floor((diff%(1000*60*60))/(1000*60)));
  const secs=Math.max(0,Math.floor((diff%(1000*60))/1000));
  const urgent=days<3;

  const uploaded=VOLUMES.filter(v=>v.status==='uploaded').length;
  const inQC=VOLUMES.filter(v=>v.status==='final_qc').length;
  const pending=VOLUMES.filter(v=>v.status==='pending').length;
  const totalPages=VOLUMES.reduce((a,v)=>a+v.pages,0);

  return(
    <div className="min-h-screen p-6 max-w-6xl mx-auto">
      <div className="flex items-center justify-between mb-6">
        <div><a href="index.html" className="text-cyan-400 text-xs hover:underline mb-1 inline-block">‚Üê Dashboard</a><h1 className="text-2xl font-extrabold text-white">Submission Tracker</h1><p className="text-sm text-gray-500">{VOLUMES.length} volumes ¬∑ {totalPages} total pages</p></div>
        <span className={`px-3 py-1 rounded-full text-xs font-mono font-semibold ${connected?'bg-green-500/10 text-green-400':'bg-red-500/10 text-red-400'}`}>{connected?'LIVE':'DEMO'}</span>
      </div>

      {/* Countdown */}
      <div className={`rounded-xl border p-6 mb-6 text-center ${urgent?'bg-red-500/5 border-red-500/20':'bg-[#0a1628] border-gray-800'}`}>
        <div className="text-xs text-gray-500 mb-2 uppercase tracking-wider font-mono">Submission Deadline</div>
        <div className="flex justify-center gap-4 mb-2">
          {[[days,'DAYS'],[hrs,'HRS'],[mins,'MIN'],[secs,'SEC']].map(([v,l])=>(
            <div key={l} className="text-center"><div className={`text-3xl font-extrabold font-mono ${urgent?'text-red-400':'text-cyan-400'}`} style={urgent&&l==='SEC'?{animation:'pulse 1s infinite'}:{}}>{String(v).padStart(2,'0')}</div><div className="text-[10px] text-gray-500 mt-1">{l}</div></div>
          ))}
        </div>
        <div className="text-xs text-gray-500">{DEADLINE.toLocaleString('en-US',{weekday:'long',year:'numeric',month:'long',day:'numeric',hour:'2-digit',minute:'2-digit',timeZoneName:'short'})}</div>
      </div>

      {/* Stats */}
      <div className="grid grid-cols-4 gap-4 mb-6">
        <div className="bg-[#0a1628] border border-gray-800 rounded-lg p-4 text-center"><div className="text-2xl font-extrabold text-green-400">{uploaded}</div><div className="text-xs text-gray-500">Uploaded</div></div>
        <div className="bg-[#0a1628] border border-gray-800 rounded-lg p-4 text-center"><div className="text-2xl font-extrabold text-amber-400">{inQC}</div><div className="text-xs text-gray-500">In QC</div></div>
        <div className="bg-[#0a1628] border border-gray-800 rounded-lg p-4 text-center"><div className="text-2xl font-extrabold text-red-400">{pending}</div><div className="text-xs text-gray-500">Pending</div></div>
        <div className="bg-[#0a1628] border border-gray-800 rounded-lg p-4 text-center"><div className="text-2xl font-extrabold text-cyan-400">{Math.round((uploaded/VOLUMES.length)*100)}%</div><div className="text-xs text-gray-500">Ready</div></div>
      </div>

      {/* Tabs */}
      <div className="flex gap-2 mb-4">
        {[['volumes','Volumes'],['activity','Activity Log']].map(([k,l])=>(
          <button key={k} onClick={()=>setTab(k)} className={`px-3 py-1.5 rounded-lg text-xs font-semibold ${tab===k?'bg-cyan-500/15 text-cyan-400 border border-cyan-500/30':'bg-[#0a1628] text-gray-500 border border-gray-800'}`}>{l}</button>
        ))}
      </div>

      {/* Volumes */}
      {tab==='volumes'&&(
        <div className="space-y-3">
          {VOLUMES.map(vol=>{
            const qcDoneCount=vol.qcDone.filter(Boolean).length;
            const qcPct=Math.round((qcDoneCount/vol.qc.length)*100);
            return(
              <div key={vol.id} className="bg-[#0a1628] border border-gray-800 rounded-xl overflow-hidden fade-in">
                <div className="flex items-center justify-between px-5 py-4 cursor-pointer hover:bg-gray-800/20" onClick={()=>setExpandedVol(expandedVol===vol.id?null:vol.id)}>
                  <div className="flex items-center gap-3">
                    <span className="text-white font-semibold text-sm">{vol.name}</span>
                    <span className="text-xs font-mono text-gray-500">{vol.pages}/{vol.maxPages} pages</span>
                  </div>
                  <div className="flex items-center gap-2">
                    <span className={`text-[10px] font-semibold px-2 py-0.5 rounded ${STATUS_MAP[vol.status].color}`}>{STATUS_MAP[vol.status].label}</span>
                    <span className="text-xs font-mono text-gray-500">QC {qcPct}%</span>
                    <span className="text-gray-600">{expandedVol===vol.id?'‚ñ≤':'‚ñº'}</span>
                  </div>
                </div>
                {expandedVol===vol.id&&(
                  <div className="px-5 pb-4 border-t border-gray-800 pt-3 fade-in">
                    <div className="mb-3">
                      <div className="text-xs text-gray-500 mb-1.5 font-medium">QC Checklist ({qcDoneCount}/{vol.qc.length})</div>
                      <div className="space-y-1">{vol.qc.map((item,i)=>(
                        <div key={i} className="flex items-center gap-2 text-xs"><span className={vol.qcDone[i]?'text-green-400':'text-gray-600'}>{vol.qcDone[i]?'‚úì':'‚óã'}</span><span className={vol.qcDone[i]?'text-gray-300':'text-gray-500'}>{item}</span></div>
                      ))}</div>
                    </div>
                    {vol.uploads.length>0&&(
                      <div><div className="text-xs text-gray-500 mb-1 font-medium">Files</div>{vol.uploads.map((f,i)=><div key={i} className="text-xs text-cyan-400 font-mono">üìé {f}</div>)}</div>
                    )}
                    {vol.pages>vol.maxPages&&<div className="mt-2 text-xs text-red-400 font-bold">‚ö†Ô∏è OVER PAGE LIMIT by {vol.pages-vol.maxPages} pages</div>}
                  </div>
                )}
              </div>
            );
          })}
        </div>
      )}

      {/* Activity */}
      {tab==='activity'&&(
        <div className="space-y-2">
          {ACTIVITY.map((a,i)=>(
            <div key={i} className="bg-[#0a1628] border border-gray-800 rounded-lg px-4 py-3 flex items-center gap-3 fade-in">
              <div className="text-xs font-mono text-gray-600 w-32 flex-shrink-0">{a.time}</div>
              <div className="w-6 h-6 rounded-full bg-cyan-500/10 flex items-center justify-center text-[10px] font-bold text-cyan-400">{a.user[0]}</div>
              <div className="flex-1"><span className="text-sm text-white">{a.action}</span><span className="text-xs text-gray-500 ml-2">¬∑ {a.volume}</span></div>
            </div>
          ))}
        </div>
      )}

      <p className="text-center text-[10px] text-gray-600 mt-8 font-mono">‚ö†Ô∏è AI GENERATED ‚Äî REQUIRES HUMAN REVIEW | MissionPulse v12.0 ‚Äî Mission Meets Tech</p>
    </div>
  );
}
ReactDOM.createRoot(document.getElementById('root')).render(<App/>);
</script>
</body>
</html>
