<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MissionPulse M13 - ROI & Launch Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'mmt-cyan': '#00E5FA',
                        'mmt-navy': '#00050F',
                        'mmt-cyan-dark': '#00B8C8',
                        'mmt-slate': '#0A1628',
                        'mmt-gray': '#1E293B',
                    },
                    fontFamily: {
                        'inter': ['Inter', 'sans-serif'],
                    }
                }
            }
        }
    </script>
    <style>
        body { font-family: 'Inter', sans-serif; }
        .glow-cyan { box-shadow: 0 0 20px rgba(0, 229, 250, 0.3); }
        .pulse-dot { animation: pulse-dot 2s ease-in-out infinite; }
        @keyframes pulse-dot {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.7; transform: scale(1.1); }
        }
        .funnel-stage { clip-path: polygon(0 0, 100% 0, 95% 100%, 5% 100%); }
        .trend-up { color: #10B981; }
        .trend-down { color: #EF4444; }
        .chart-line { stroke-dasharray: 1000; stroke-dashoffset: 1000; animation: draw-line 2s ease forwards; }
        @keyframes draw-line {
            to { stroke-dashoffset: 0; }
        }
        .metric-card:hover { transform: translateY(-2px); transition: all 0.2s ease; }
        .checklist-item.completed { text-decoration: line-through; opacity: 0.6; }
        .progress-ring { transform: rotate(-90deg); }
        .restricted-blur { filter: blur(8px); user-select: none; }
    </style>
</head>
<body class="bg-mmt-navy min-h-screen">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo } = React;

        // ============== DEMO DATA ==============
        const DEMO_OPPORTUNITY = {
            id: "OPP-2025-001",
            title: "VA Electronic Health Record Modernization",
            agency: "Department of Veterans Affairs",
            value: "$47.2M",
            dueDate: "2025-02-28",
            stage: "Gold Team (90%)"
        };

        const RBAC_ROLES = [
            { id: "ceo", label: "CEO", accessLevel: "full", canExport: true },
            { id: "coo", label: "COO", accessLevel: "full", canExport: true },
            { id: "cap", label: "CAP Manager", accessLevel: "limited", canExport: false },
            { id: "pm", label: "Proposal Manager", accessLevel: "limited", canExport: false },
            { id: "sa", label: "Solution Architect", accessLevel: "limited", canExport: false },
            { id: "fin", label: "Pricing Lead", accessLevel: "limited", canExport: false },
            { id: "con", label: "Contracts Lead", accessLevel: "limited", canExport: false },
            { id: "del", label: "Delivery Lead", accessLevel: "limited", canExport: false },
            { id: "writer", label: "Proposal Writer", accessLevel: "restricted", canExport: false },
            { id: "reviewer", label: "Reviewer", accessLevel: "restricted", canExport: false },
            { id: "admin", label: "Admin", accessLevel: "full", canExport: true }
        ];

        // Win Probability Trend Data (over 8 weeks)
        const WIN_PROBABILITY_TREND = [
            { week: "W1", date: "Dec 2", pWin: 35, stage: "Gate 1" },
            { week: "W2", date: "Dec 9", pWin: 42, stage: "Blue Team" },
            { week: "W3", date: "Dec 16", pWin: 48, stage: "Kickoff" },
            { week: "W4", date: "Dec 23", pWin: 55, stage: "Pink (30%)" },
            { week: "W5", date: "Dec 30", pWin: 62, stage: "Pink (30%)" },
            { week: "W6", date: "Jan 6", pWin: 68, stage: "Red (70%)" },
            { week: "W7", date: "Jan 13", pWin: 74, stage: "Red (70%)" },
            { week: "W8", date: "Jan 20", pWin: 78, stage: "Gold (90%)" }
        ];

        // Pipeline Funnel Data
        const PIPELINE_FUNNEL = [
            { stage: "Identified", count: 24, value: "$312M", color: "from-purple-500 to-purple-600" },
            { stage: "Qualified", count: 18, value: "$245M", color: "from-blue-500 to-blue-600" },
            { stage: "Capture", count: 12, value: "$178M", color: "from-cyan-500 to-cyan-600" },
            { stage: "Proposal", count: 6, value: "$89M", color: "from-green-500 to-green-600" },
            { stage: "Submitted", count: 3, value: "$52M", color: "from-yellow-500 to-yellow-600" },
            { stage: "Won", count: 1, value: "$18M", color: "from-emerald-500 to-emerald-600" }
        ];

        // Cost Savings Data
        const COST_SAVINGS = {
            aiHoursUsed: 847,
            manualEquivalent: 3420,
            hourlyRate: 125,
            aiCostPerHour: 2.50,
            monthlyData: [
                { month: "Oct", aiHours: 156, manualHours: 624 },
                { month: "Nov", aiHours: 203, manualHours: 812 },
                { month: "Dec", aiHours: 245, manualHours: 980 },
                { month: "Jan", aiHours: 243, manualHours: 1004 }
            ]
        };

        // Go-Live Readiness Checklist
        const GO_LIVE_CHECKLIST = [
            { id: 1, category: "Technical", item: "API endpoints tested and validated", completed: true, owner: "SA" },
            { id: 2, category: "Technical", item: "Load testing completed (100 concurrent users)", completed: true, owner: "SA" },
            { id: 3, category: "Technical", item: "Security audit passed", completed: true, owner: "Admin" },
            { id: 4, category: "Technical", item: "Database backup/restore verified", completed: false, owner: "Admin" },
            { id: 5, category: "Training", item: "User training materials created", completed: true, owner: "PM" },
            { id: 6, category: "Training", item: "Admin training completed", completed: true, owner: "PM" },
            { id: 7, category: "Training", item: "End-user training sessions scheduled", completed: false, owner: "PM" },
            { id: 8, category: "Compliance", item: "CMMC Level 2 checklist reviewed", completed: true, owner: "CON" },
            { id: 9, category: "Compliance", item: "Data handling procedures documented", completed: true, owner: "CON" },
            { id: 10, category: "Compliance", item: "AI disclaimer notices in place", completed: true, owner: "CON" },
            { id: 11, category: "Operations", item: "Support escalation path defined", completed: true, owner: "COO" },
            { id: 12, category: "Operations", item: "Monitoring & alerting configured", completed: false, owner: "Admin" },
            { id: 13, category: "Operations", item: "Rollback procedures documented", completed: true, owner: "SA" },
            { id: 14, category: "Business", item: "Stakeholder sign-off obtained", completed: false, owner: "CEO" },
            { id: 15, category: "Business", item: "Go-live communication drafted", completed: true, owner: "PM" }
        ];

        // ============== COMPONENTS ==============

        // Shield Logo Component
        const ShieldLogo = () => (
            <svg width="32" height="32" viewBox="0 0 100 100" className="text-mmt-cyan">
                <path d="M50 5 L90 20 L90 50 C90 75 70 95 50 95 C30 95 10 75 10 50 L10 20 Z" 
                      fill="none" stroke="currentColor" strokeWidth="4"/>
                <path d="M50 25 L50 75 M30 50 L70 50" stroke="currentColor" strokeWidth="4" strokeLinecap="round"/>
                <circle cx="50" cy="50" r="8" fill="currentColor"/>
            </svg>
        );

        // Metric Card Component
        const MetricCard = ({ title, value, subtitle, trend, trendValue, icon, restricted }) => (
            <div className={`metric-card bg-mmt-slate rounded-xl p-6 border border-mmt-gray ${restricted ? 'relative overflow-hidden' : ''}`}>
                {restricted && (
                    <div className="absolute inset-0 flex items-center justify-center z-10 bg-mmt-slate/80">
                        <div className="text-center">
                            <span className="text-2xl">ðŸ”’</span>
                            <p className="text-xs text-gray-400 mt-1">Executive Only</p>
                        </div>
                    </div>
                )}
                <div className={restricted ? 'restricted-blur' : ''}>
                    <div className="flex items-center justify-between mb-2">
                        <span className="text-gray-400 text-sm">{title}</span>
                        <span className="text-2xl">{icon}</span>
                    </div>
                    <div className="text-3xl font-bold text-white mb-1">{value}</div>
                    <div className="flex items-center justify-between">
                        <span className="text-sm text-gray-500">{subtitle}</span>
                        {trend && (
                            <span className={`text-sm font-medium ${trend === 'up' ? 'trend-up' : 'trend-down'}`}>
                                {trend === 'up' ? 'â†‘' : 'â†“'} {trendValue}
                            </span>
                        )}
                    </div>
                </div>
            </div>
        );

        // Win Probability Chart Component
        const WinProbabilityChart = ({ data, restricted }) => {
            const maxPWin = 100;
            const chartHeight = 200;
            const chartWidth = 600;
            const padding = { top: 20, right: 20, bottom: 40, left: 50 };
            
            const points = data.map((d, i) => {
                const x = padding.left + (i / (data.length - 1)) * (chartWidth - padding.left - padding.right);
                const y = chartHeight - padding.bottom - (d.pWin / maxPWin) * (chartHeight - padding.top - padding.bottom);
                return { x, y, ...d };
            });

            const pathD = points.map((p, i) => `${i === 0 ? 'M' : 'L'} ${p.x} ${p.y}`).join(' ');
            const areaD = pathD + ` L ${points[points.length - 1].x} ${chartHeight - padding.bottom} L ${points[0].x} ${chartHeight - padding.bottom} Z`;

            return (
                <div className={`bg-mmt-slate rounded-xl p-6 border border-mmt-gray ${restricted ? 'relative overflow-hidden' : ''}`}>
                    {restricted && (
                        <div className="absolute inset-0 flex items-center justify-center z-10 bg-mmt-slate/80">
                            <div className="text-center">
                                <span className="text-2xl">ðŸ”’</span>
                                <p className="text-xs text-gray-400 mt-1">Executive Only</p>
                            </div>
                        </div>
                    )}
                    <div className={restricted ? 'restricted-blur' : ''}>
                        <div className="flex items-center justify-between mb-4">
                            <div>
                                <h3 className="text-lg font-semibold text-white">Win Probability Trend</h3>
                                <p className="text-sm text-gray-400">8-week progression</p>
                            </div>
                            <div className="text-right">
                                <div className="text-2xl font-bold text-mmt-cyan">{data[data.length - 1].pWin}%</div>
                                <div className="text-xs text-green-400">+{data[data.length - 1].pWin - data[0].pWin}% from start</div>
                            </div>
                        </div>
                        
                        <svg viewBox={`0 0 ${chartWidth} ${chartHeight}`} className="w-full h-48">
                            {/* Grid lines */}
                            {[0, 25, 50, 75, 100].map(v => {
                                const y = chartHeight - padding.bottom - (v / maxPWin) * (chartHeight - padding.top - padding.bottom);
                                return (
                                    <g key={v}>
                                        <line x1={padding.left} y1={y} x2={chartWidth - padding.right} y2={y} stroke="#1E293B" strokeDasharray="4" />
                                        <text x={padding.left - 10} y={y + 4} fill="#64748B" fontSize="10" textAnchor="end">{v}%</text>
                                    </g>
                                );
                            })}
                            
                            {/* Area fill */}
                            <path d={areaD} fill="url(#areaGradient)" opacity="0.3" />
                            
                            {/* Line */}
                            <path d={pathD} fill="none" stroke="#00E5FA" strokeWidth="3" className="chart-line" />
                            
                            {/* Data points */}
                            {points.map((p, i) => (
                                <g key={i}>
                                    <circle cx={p.x} cy={p.y} r="6" fill="#0A1628" stroke="#00E5FA" strokeWidth="2" />
                                    <text x={p.x} y={chartHeight - 10} fill="#64748B" fontSize="10" textAnchor="middle">{p.week}</text>
                                </g>
                            ))}
                            
                            {/* Gradient definition */}
                            <defs>
                                <linearGradient id="areaGradient" x1="0%" y1="0%" x2="0%" y2="100%">
                                    <stop offset="0%" stopColor="#00E5FA" />
                                    <stop offset="100%" stopColor="#00E5FA" stopOpacity="0" />
                                </linearGradient>
                            </defs>
                        </svg>
                        
                        {/* Stage indicators */}
                        <div className="flex justify-between mt-4 text-xs">
                            {data.filter((_, i) => i % 2 === 0 || i === data.length - 1).map((d, i) => (
                                <div key={i} className="text-center">
                                    <div className="text-gray-500">{d.date}</div>
                                    <div className="text-mmt-cyan">{d.stage}</div>
                                </div>
                            ))}
                        </div>
                    </div>
                </div>
            );
        };

        // Pipeline Funnel Component
        const PipelineFunnel = ({ data }) => {
            const maxCount = Math.max(...data.map(d => d.count));
            
            return (
                <div className="bg-mmt-slate rounded-xl p-6 border border-mmt-gray">
                    <div className="flex items-center justify-between mb-4">
                        <div>
                            <h3 className="text-lg font-semibold text-white">Proposal Pipeline</h3>
                            <p className="text-sm text-gray-400">Active opportunities by stage</p>
                        </div>
                        <div className="text-right">
                            <div className="text-xl font-bold text-white">{data.reduce((sum, d) => sum + d.count, 0)}</div>
                            <div className="text-xs text-gray-400">Total Opportunities</div>
                        </div>
                    </div>
                    
                    <div className="space-y-2">
                        {data.map((stage, i) => {
                            const widthPercent = 100 - (i * 12);
                            return (
                                <div key={stage.stage} className="relative" style={{ width: `${widthPercent}%`, margin: '0 auto' }}>
                                    <div className={`funnel-stage bg-gradient-to-r ${stage.color} p-3 rounded`}>
                                        <div className="flex items-center justify-between text-white">
                                            <span className="font-medium">{stage.stage}</span>
                                            <div className="text-right">
                                                <span className="font-bold">{stage.count}</span>
                                                <span className="text-xs ml-2 opacity-80">{stage.value}</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            );
                        })}
                    </div>
                    
                    {/* Conversion rates */}
                    <div className="mt-4 pt-4 border-t border-mmt-gray">
                        <div className="grid grid-cols-5 gap-2 text-center text-xs">
                            {data.slice(0, -1).map((stage, i) => {
                                const nextStage = data[i + 1];
                                const convRate = Math.round((nextStage.count / stage.count) * 100);
                                return (
                                    <div key={i}>
                                        <div className="text-gray-500">â†’</div>
                                        <div className="text-mmt-cyan font-medium">{convRate}%</div>
                                    </div>
                                );
                            })}
                        </div>
                    </div>
                </div>
            );
        };

        // Cost Savings Calculator Component
        const CostSavingsCalculator = ({ data, restricted }) => {
            const manualCost = data.manualEquivalent * data.hourlyRate;
            const aiCost = data.aiHoursUsed * data.aiCostPerHour;
            const totalSavings = manualCost - aiCost;
            const savingsPercent = Math.round((totalSavings / manualCost) * 100);
            const hoursReclaimed = data.manualEquivalent - data.aiHoursUsed;

            return (
                <div className={`bg-mmt-slate rounded-xl p-6 border border-mmt-gray ${restricted ? 'relative overflow-hidden' : ''}`}>
                    {restricted && (
                        <div className="absolute inset-0 flex items-center justify-center z-10 bg-mmt-slate/80">
                            <div className="text-center">
                                <span className="text-2xl">ðŸ”’</span>
                                <p className="text-xs text-gray-400 mt-1">Executive Only</p>
                            </div>
                        </div>
                    )}
                    <div className={restricted ? 'restricted-blur' : ''}>
                        <div className="flex items-center justify-between mb-4">
                            <div>
                                <h3 className="text-lg font-semibold text-white">Cost Savings Analysis</h3>
                                <p className="text-sm text-gray-400">AI vs Manual effort comparison</p>
                            </div>
                            <span className="text-2xl">ðŸ’°</span>
                        </div>
                        
                        {/* Savings Summary */}
                        <div className="grid grid-cols-3 gap-4 mb-6">
                            <div className="bg-mmt-navy rounded-lg p-4 text-center">
                                <div className="text-2xl font-bold text-green-400">${(totalSavings / 1000).toFixed(0)}K</div>
                                <div className="text-xs text-gray-400">Total Saved</div>
                            </div>
                            <div className="bg-mmt-navy rounded-lg p-4 text-center">
                                <div className="text-2xl font-bold text-mmt-cyan">{hoursReclaimed.toLocaleString()}</div>
                                <div className="text-xs text-gray-400">Hours Reclaimed</div>
                            </div>
                            <div className="bg-mmt-navy rounded-lg p-4 text-center">
                                <div className="text-2xl font-bold text-purple-400">{savingsPercent}%</div>
                                <div className="text-xs text-gray-400">Cost Reduction</div>
                            </div>
                        </div>
                        
                        {/* Comparison Bars */}
                        <div className="space-y-4">
                            <div>
                                <div className="flex justify-between text-sm mb-1">
                                    <span className="text-gray-400">Manual Process Cost</span>
                                    <span className="text-red-400">${manualCost.toLocaleString()}</span>
                                </div>
                                <div className="h-3 bg-mmt-gray rounded-full overflow-hidden">
                                    <div className="h-full bg-red-500" style={{ width: '100%' }} />
                                </div>
                            </div>
                            <div>
                                <div className="flex justify-between text-sm mb-1">
                                    <span className="text-gray-400">AI-Assisted Cost</span>
                                    <span className="text-green-400">${aiCost.toLocaleString()}</span>
                                </div>
                                <div className="h-3 bg-mmt-gray rounded-full overflow-hidden">
                                    <div className="h-full bg-green-500" style={{ width: `${(aiCost / manualCost) * 100}%` }} />
                                </div>
                            </div>
                        </div>
                        
                        {/* Monthly Breakdown */}
                        <div className="mt-6 pt-4 border-t border-mmt-gray">
                            <div className="text-sm text-gray-400 mb-2">Monthly Hours Comparison</div>
                            <div className="grid grid-cols-4 gap-2">
                                {data.monthlyData.map(m => (
                                    <div key={m.month} className="text-center">
                                        <div className="text-xs text-gray-500 mb-1">{m.month}</div>
                                        <div className="bg-mmt-navy rounded p-2">
                                            <div className="text-xs text-red-400">{m.manualHours}h</div>
                                            <div className="text-xs text-green-400">{m.aiHours}h</div>
                                        </div>
                                    </div>
                                ))}
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        // Go-Live Checklist Component
        const GoLiveChecklist = ({ items, onToggle }) => {
            const categories = [...new Set(items.map(i => i.category))];
            const completedCount = items.filter(i => i.completed).length;
            const totalCount = items.length;
            const progressPercent = Math.round((completedCount / totalCount) * 100);

            return (
                <div className="bg-mmt-slate rounded-xl p-6 border border-mmt-gray">
                    <div className="flex items-center justify-between mb-4">
                        <div>
                            <h3 className="text-lg font-semibold text-white">Go-Live Readiness</h3>
                            <p className="text-sm text-gray-400">Pre-launch checklist status</p>
                        </div>
                        <div className="flex items-center gap-3">
                            {/* Circular Progress */}
                            <div className="relative w-16 h-16">
                                <svg className="w-full h-full progress-ring" viewBox="0 0 36 36">
                                    <path
                                        d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"
                                        fill="none"
                                        stroke="#1E293B"
                                        strokeWidth="3"
                                    />
                                    <path
                                        d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"
                                        fill="none"
                                        stroke={progressPercent >= 80 ? '#10B981' : progressPercent >= 50 ? '#F59E0B' : '#EF4444'}
                                        strokeWidth="3"
                                        strokeDasharray={`${progressPercent}, 100`}
                                    />
                                </svg>
                                <div className="absolute inset-0 flex items-center justify-center">
                                    <span className="text-sm font-bold text-white">{progressPercent}%</span>
                                </div>
                            </div>
                            <div className="text-right">
                                <div className="text-xl font-bold text-white">{completedCount}/{totalCount}</div>
                                <div className="text-xs text-gray-400">Tasks Done</div>
                            </div>
                        </div>
                    </div>
                    
                    {/* Checklist by Category */}
                    <div className="space-y-4 max-h-80 overflow-y-auto">
                        {categories.map(category => (
                            <div key={category}>
                                <div className="text-xs font-medium text-mmt-cyan uppercase tracking-wider mb-2">{category}</div>
                                <div className="space-y-1">
                                    {items.filter(i => i.category === category).map(item => (
                                        <div 
                                            key={item.id}
                                            className={`flex items-center gap-3 p-2 rounded hover:bg-mmt-gray/30 cursor-pointer ${item.completed ? 'opacity-60' : ''}`}
                                            onClick={() => onToggle(item.id)}
                                        >
                                            <div className={`w-5 h-5 rounded border-2 flex items-center justify-center flex-shrink-0 ${
                                                item.completed ? 'bg-green-500 border-green-500' : 'border-gray-500'
                                            }`}>
                                                {item.completed && <span className="text-white text-xs">âœ“</span>}
                                            </div>
                                            <span className={`text-sm flex-1 ${item.completed ? 'text-gray-500 line-through' : 'text-white'}`}>
                                                {item.item}
                                            </span>
                                            <span className="text-xs text-gray-500 bg-mmt-gray px-2 py-0.5 rounded">{item.owner}</span>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        ))}
                    </div>
                </div>
            );
        };

        // Executive Summary Component
        const ExecutiveSummary = ({ onExport, canExport }) => (
            <div className="bg-mmt-slate rounded-xl p-6 border border-mmt-gray">
                <div className="flex items-center justify-between mb-4">
                    <div>
                        <h3 className="text-lg font-semibold text-white">Executive Summary</h3>
                        <p className="text-sm text-gray-400">Key metrics for leadership review</p>
                    </div>
                    {canExport ? (
                        <button 
                            onClick={onExport}
                            className="px-4 py-2 bg-mmt-cyan text-mmt-navy font-medium rounded-lg hover:bg-mmt-cyan-dark transition-all"
                        >
                            ðŸ“Š Export PDF
                        </button>
                    ) : (
                        <span className="px-4 py-2 bg-mmt-gray text-gray-500 rounded-lg text-sm">ðŸ”’ Export Locked</span>
                    )}
                </div>
                
                <div className="grid md:grid-cols-2 gap-4 mb-4">
                    <div className="bg-mmt-navy rounded-lg p-4">
                        <div className="text-xs text-gray-400 uppercase tracking-wider mb-2">Pipeline Health</div>
                        <div className="flex items-baseline gap-2">
                            <span className="text-3xl font-bold text-green-400">Strong</span>
                            <span className="text-sm text-gray-400">24 opportunities tracked</span>
                        </div>
                    </div>
                    <div className="bg-mmt-navy rounded-lg p-4">
                        <div className="text-xs text-gray-400 uppercase tracking-wider mb-2">Win Rate (YTD)</div>
                        <div className="flex items-baseline gap-2">
                            <span className="text-3xl font-bold text-mmt-cyan">42%</span>
                            <span className="text-sm text-green-400">â†‘ 8% vs last year</span>
                        </div>
                    </div>
                </div>
                
                <div className="bg-mmt-navy rounded-lg p-4">
                    <div className="text-xs text-gray-400 uppercase tracking-wider mb-2">Key Insights</div>
                    <ul className="space-y-2 text-sm text-gray-300">
                        <li className="flex items-start gap-2">
                            <span className="text-green-400">âœ“</span>
                            VA EHR pursuit trending above target pWin (78% vs 70% threshold)
                        </li>
                        <li className="flex items-start gap-2">
                            <span className="text-green-400">âœ“</span>
                            AI-assisted workflows reduced proposal costs by $424K this quarter
                        </li>
                        <li className="flex items-start gap-2">
                            <span className="text-yellow-400">!</span>
                            Go-live readiness at 73% - 4 critical items pending
                        </li>
                        <li className="flex items-start gap-2">
                            <span className="text-mmt-cyan">â†’</span>
                            Recommend accelerating orals prep for VA opportunity
                        </li>
                    </ul>
                </div>
            </div>
        );

        // ============== MAIN APP ==============
        const ROIDashboardApp = () => {
            const [currentRole, setCurrentRole] = useState(RBAC_ROLES[0]);
            const [checklistItems, setChecklistItems] = useState(GO_LIVE_CHECKLIST);
            const [activeTab, setActiveTab] = useState('overview');

            const accessLevel = currentRole.accessLevel;
            const isRestricted = accessLevel === 'restricted';
            const isLimited = accessLevel === 'limited';

            const handleChecklistToggle = (itemId) => {
                setChecklistItems(prev => prev.map(item => 
                    item.id === itemId ? { ...item, completed: !item.completed } : item
                ));
            };

            const handleExport = () => {
                alert('Exporting Executive Summary PDF...\n\nIn production, this would generate a branded PDF report.');
            };

            return (
                <div className="min-h-screen bg-mmt-navy">
                    {/* Header */}
                    <header className="bg-mmt-slate border-b border-mmt-gray sticky top-0 z-40">
                        <div className="max-w-7xl mx-auto px-4 py-3">
                            <div className="flex items-center justify-between">
                                <div className="flex items-center gap-4">
                                    <div className="flex items-center gap-2">
                                        <ShieldLogo />
                                        <div>
                                            <span className="text-mmt-cyan font-bold text-lg">MissionPulse</span>
                                            <span className="text-gray-400 text-sm ml-2">M13 ROI & Launch Dashboard</span>
                                        </div>
                                    </div>
                                </div>
                                <div className="flex items-center gap-4">
                                    <select
                                        value={currentRole.id}
                                        onChange={(e) => setCurrentRole(RBAC_ROLES.find(r => r.id === e.target.value))}
                                        className="bg-mmt-gray border border-mmt-gray rounded-lg px-3 py-2 text-sm text-white focus:border-mmt-cyan focus:outline-none"
                                    >
                                        {RBAC_ROLES.map(role => (
                                            <option key={role.id} value={role.id}>{role.label}</option>
                                        ))}
                                    </select>
                                    <div className={`px-2 py-1 rounded text-xs ${
                                        accessLevel === 'full' ? 'bg-green-500/20 text-green-400' :
                                        accessLevel === 'limited' ? 'bg-yellow-500/20 text-yellow-400' :
                                        'bg-red-500/20 text-red-400'
                                    }`}>
                                        {accessLevel.toUpperCase()} ACCESS
                                    </div>
                                    <div className="w-8 h-8 rounded-full bg-gradient-to-br from-mmt-cyan to-blue-500 flex items-center justify-center text-mmt-navy font-bold text-sm">
                                        {currentRole.label.charAt(0)}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </header>

                    {/* Opportunity Banner */}
                    <div className="bg-mmt-slate/50 border-b border-mmt-gray">
                        <div className="max-w-7xl mx-auto px-4 py-3">
                            <div className="flex items-center justify-between">
                                <div className="flex items-center gap-4">
                                    <span className="text-mmt-cyan">ðŸ“Š</span>
                                    <div>
                                        <span className="text-white font-medium">{DEMO_OPPORTUNITY.title}</span>
                                        <span className="text-gray-400 mx-2">â€¢</span>
                                        <span className="text-gray-400">{DEMO_OPPORTUNITY.agency}</span>
                                    </div>
                                </div>
                                <div className="flex items-center gap-4 text-sm">
                                    <span className="text-gray-400">Value: <span className="text-mmt-cyan">{DEMO_OPPORTUNITY.value}</span></span>
                                    <span className="px-2 py-1 bg-green-500/20 text-green-400 rounded text-xs">{DEMO_OPPORTUNITY.stage}</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    {/* Navigation Tabs */}
                    <div className="bg-mmt-slate border-b border-mmt-gray">
                        <div className="max-w-7xl mx-auto px-4">
                            <div className="flex gap-1">
                                {[
                                    { id: 'overview', label: 'ðŸ“ˆ Overview' },
                                    { id: 'pipeline', label: 'ðŸ”„ Pipeline' },
                                    { id: 'savings', label: 'ðŸ’° Cost Savings' },
                                    { id: 'launch', label: 'ðŸš€ Go-Live' }
                                ].map(tab => (
                                    <button
                                        key={tab.id}
                                        onClick={() => setActiveTab(tab.id)}
                                        className={`px-4 py-3 text-sm font-medium transition-all border-b-2 ${
                                            activeTab === tab.id
                                                ? 'text-mmt-cyan border-mmt-cyan'
                                                : 'text-gray-400 border-transparent hover:text-white'
                                        }`}
                                    >
                                        {tab.label}
                                    </button>
                                ))}
                            </div>
                        </div>
                    </div>

                    {/* Main Content */}
                    <main className="max-w-7xl mx-auto px-4 py-6">
                        {/* Overview Tab */}
                        {activeTab === 'overview' && (
                            <div className="space-y-6">
                                {/* Key Metrics */}
                                <div className="grid md:grid-cols-4 gap-4">
                                    <MetricCard
                                        title="Current pWin"
                                        value="78%"
                                        subtitle="VA EHR Modernization"
                                        trend="up"
                                        trendValue="6%"
                                        icon="ðŸŽ¯"
                                        restricted={isRestricted}
                                    />
                                    <MetricCard
                                        title="Pipeline Value"
                                        value="$312M"
                                        subtitle="24 active opportunities"
                                        trend="up"
                                        trendValue="12%"
                                        icon="ðŸ’¼"
                                        restricted={isRestricted}
                                    />
                                    <MetricCard
                                        title="Cost Savings"
                                        value="$424K"
                                        subtitle="This quarter"
                                        trend="up"
                                        trendValue="18%"
                                        icon="ðŸ’°"
                                        restricted={isRestricted || isLimited}
                                    />
                                    <MetricCard
                                        title="Go-Live Ready"
                                        value="73%"
                                        subtitle="11 of 15 tasks complete"
                                        icon="ðŸš€"
                                    />
                                </div>

                                {/* Charts Row */}
                                <div className="grid lg:grid-cols-2 gap-6">
                                    <WinProbabilityChart data={WIN_PROBABILITY_TREND} restricted={isRestricted} />
                                    <ExecutiveSummary onExport={handleExport} canExport={currentRole.canExport} />
                                </div>
                            </div>
                        )}

                        {/* Pipeline Tab */}
                        {activeTab === 'pipeline' && (
                            <div className="grid lg:grid-cols-2 gap-6">
                                <PipelineFunnel data={PIPELINE_FUNNEL} />
                                <div className="space-y-6">
                                    <div className="bg-mmt-slate rounded-xl p-6 border border-mmt-gray">
                                        <h3 className="text-lg font-semibold text-white mb-4">Pipeline by Agency</h3>
                                        <div className="space-y-3">
                                            {[
                                                { agency: "VA", count: 8, value: "$112M", color: "bg-blue-500" },
                                                { agency: "DHA", count: 6, value: "$87M", color: "bg-purple-500" },
                                                { agency: "HHS", count: 5, value: "$65M", color: "bg-green-500" },
                                                { agency: "CDC", count: 3, value: "$32M", color: "bg-yellow-500" },
                                                { agency: "Other", count: 2, value: "$16M", color: "bg-gray-500" }
                                            ].map(item => (
                                                <div key={item.agency} className="flex items-center gap-3">
                                                    <div className={`w-3 h-3 rounded-full ${item.color}`} />
                                                    <span className="text-white flex-1">{item.agency}</span>
                                                    <span className="text-gray-400">{item.count} opps</span>
                                                    <span className="text-mmt-cyan font-medium">{item.value}</span>
                                                </div>
                                            ))}
                                        </div>
                                    </div>
                                    <div className="bg-mmt-slate rounded-xl p-6 border border-mmt-gray">
                                        <h3 className="text-lg font-semibold text-white mb-4">Win Rate by Stage</h3>
                                        <div className="space-y-3">
                                            {[
                                                { stage: "Gate 1 â†’ Blue Team", rate: 85 },
                                                { stage: "Blue Team â†’ Kickoff", rate: 72 },
                                                { stage: "Pink â†’ Red", rate: 88 },
                                                { stage: "Red â†’ Gold", rate: 91 },
                                                { stage: "Submitted â†’ Won", rate: 42 }
                                            ].map(item => (
                                                <div key={item.stage}>
                                                    <div className="flex justify-between text-sm mb-1">
                                                        <span className="text-gray-400">{item.stage}</span>
                                                        <span className="text-white">{item.rate}%</span>
                                                    </div>
                                                    <div className="h-2 bg-mmt-gray rounded-full overflow-hidden">
                                                        <div 
                                                            className="h-full bg-mmt-cyan" 
                                                            style={{ width: `${item.rate}%` }}
                                                        />
                                                    </div>
                                                </div>
                                            ))}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        )}

                        {/* Cost Savings Tab */}
                        {activeTab === 'savings' && (
                            <div className="grid lg:grid-cols-2 gap-6">
                                <CostSavingsCalculator data={COST_SAVINGS} restricted={isRestricted || isLimited} />
                                <div className="space-y-6">
                                    <div className={`bg-mmt-slate rounded-xl p-6 border border-mmt-gray ${(isRestricted || isLimited) ? 'relative overflow-hidden' : ''}`}>
                                        {(isRestricted || isLimited) && (
                                            <div className="absolute inset-0 flex items-center justify-center z-10 bg-mmt-slate/80">
                                                <div className="text-center">
                                                    <span className="text-2xl">ðŸ”’</span>
                                                    <p className="text-xs text-gray-400 mt-1">Executive Only</p>
                                                </div>
                                            </div>
                                        )}
                                        <div className={(isRestricted || isLimited) ? 'restricted-blur' : ''}>
                                            <h3 className="text-lg font-semibold text-white mb-4">ROI Breakdown</h3>
                                            <div className="space-y-4">
                                                <div className="flex justify-between items-center p-3 bg-mmt-navy rounded-lg">
                                                    <span className="text-gray-400">Labor Savings</span>
                                                    <span className="text-green-400 font-bold">$380,625</span>
                                                </div>
                                                <div className="flex justify-between items-center p-3 bg-mmt-navy rounded-lg">
                                                    <span className="text-gray-400">Tool Subscription</span>
                                                    <span className="text-red-400 font-bold">-$24,000</span>
                                                </div>
                                                <div className="flex justify-between items-center p-3 bg-mmt-navy rounded-lg">
                                                    <span className="text-gray-400">AI Usage Costs</span>
                                                    <span className="text-red-400 font-bold">-$2,118</span>
                                                </div>
                                                <div className="flex justify-between items-center p-3 bg-green-500/10 rounded-lg border border-green-500/30">
                                                    <span className="text-white font-medium">Net ROI</span>
                                                    <span className="text-green-400 font-bold text-xl">$354,507</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div className="bg-mmt-slate rounded-xl p-6 border border-mmt-gray">
                                        <h3 className="text-lg font-semibold text-white mb-4">Time Savings by Task</h3>
                                        <div className="space-y-3">
                                            {[
                                                { task: "Compliance Review", saved: "340 hrs", percent: 75 },
                                                { task: "Section Drafting", saved: "520 hrs", percent: 68 },
                                                { task: "Win Theme Gen", saved: "180 hrs", percent: 82 },
                                                { task: "Pricing Analysis", saved: "240 hrs", percent: 58 },
                                                { task: "Past Perf Mapping", saved: "120 hrs", percent: 71 }
                                            ].map(item => (
                                                <div key={item.task}>
                                                    <div className="flex justify-between text-sm mb-1">
                                                        <span className="text-gray-400">{item.task}</span>
                                                        <span className="text-mmt-cyan">{item.saved} ({item.percent}%)</span>
                                                    </div>
                                                    <div className="h-2 bg-mmt-gray rounded-full overflow-hidden">
                                                        <div 
                                                            className="h-full bg-gradient-to-r from-mmt-cyan to-blue-500" 
                                                            style={{ width: `${item.percent}%` }}
                                                        />
                                                    </div>
                                                </div>
                                            ))}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        )}

                        {/* Go-Live Tab */}
                        {activeTab === 'launch' && (
                            <div className="grid lg:grid-cols-2 gap-6">
                                <GoLiveChecklist items={checklistItems} onToggle={handleChecklistToggle} />
                                <div className="space-y-6">
                                    <div className="bg-mmt-slate rounded-xl p-6 border border-mmt-gray">
                                        <h3 className="text-lg font-semibold text-white mb-4">Launch Timeline</h3>
                                        <div className="space-y-4">
                                            {[
                                                { date: "Jan 27", event: "Final Security Review", status: "upcoming", days: 2 },
                                                { date: "Jan 29", event: "User Training Sessions", status: "upcoming", days: 4 },
                                                { date: "Jan 31", event: "Stakeholder Sign-off", status: "upcoming", days: 6 },
                                                { date: "Feb 3", event: "Soft Launch (Pilot)", status: "planned", days: 9 },
                                                { date: "Feb 10", event: "Full Production Launch", status: "planned", days: 16 }
                                            ].map((item, i) => (
                                                <div key={i} className="flex items-center gap-4">
                                                    <div className={`w-3 h-3 rounded-full ${
                                                        item.status === 'complete' ? 'bg-green-500' :
                                                        item.status === 'upcoming' ? 'bg-yellow-500 pulse-dot' :
                                                        'bg-gray-500'
                                                    }`} />
                                                    <div className="flex-1">
                                                        <div className="text-white">{item.event}</div>
                                                        <div className="text-xs text-gray-500">{item.date}</div>
                                                    </div>
                                                    <span className={`text-xs px-2 py-1 rounded ${
                                                        item.days <= 3 ? 'bg-red-500/20 text-red-400' :
                                                        item.days <= 7 ? 'bg-yellow-500/20 text-yellow-400' :
                                                        'bg-gray-500/20 text-gray-400'
                                                    }`}>
                                                        {item.days} days
                                                    </span>
                                                </div>
                                            ))}
                                        </div>
                                    </div>
                                    <div className="bg-mmt-slate rounded-xl p-6 border border-mmt-gray">
                                        <h3 className="text-lg font-semibold text-white mb-4">Critical Blockers</h3>
                                        <div className="space-y-3">
                                            {checklistItems.filter(i => !i.completed).slice(0, 4).map(item => (
                                                <div key={item.id} className="flex items-center gap-3 p-3 bg-red-500/10 rounded-lg border border-red-500/30">
                                                    <span className="text-red-400">âš ï¸</span>
                                                    <div className="flex-1">
                                                        <div className="text-white text-sm">{item.item}</div>
                                                        <div className="text-xs text-gray-500">{item.category} â€¢ Owner: {item.owner}</div>
                                                    </div>
                                                </div>
                                            ))}
                                            {checklistItems.filter(i => !i.completed).length === 0 && (
                                                <div className="text-center py-4 text-green-400">
                                                    âœ“ All items complete! Ready for launch.
                                                </div>
                                            )}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        )}
                    </main>

                    {/* Footer */}
                    <footer className="bg-mmt-slate border-t border-mmt-gray mt-8">
                        <div className="max-w-7xl mx-auto px-4 py-4">
                            <div className="flex items-center justify-between text-sm">
                                <div className="flex items-center gap-2 text-gray-400">
                                    <span>âš ï¸ AI GENERATED - REQUIRES HUMAN REVIEW</span>
                                </div>
                                <div className="text-gray-500">
                                    MissionPulse v12.0 â€¢ Shield & Pulse UX v8.0 â€¢ Â© 2025 Mission Meets Tech
                                </div>
                            </div>
                        </div>
                    </footer>
                </div>
            );
        };

        ReactDOM.render(<ROIDashboardApp />, document.getElementById('root'));
    </script>
</body>
</html>
