<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MissionPulse | Team Workload</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'mp-navy': '#00050F',
                        'mp-cyan': '#00E5FA',
                        'mp-cyan-dark': '#00B8C8',
                        'mp-slate': '#0A1628',
                        'mp-card': '#111827',
                        'mp-border': '#1E3A5F'
                    },
                    fontFamily: {
                        'inter': ['Inter', 'sans-serif']
                    }
                }
            }
        }
    </script>
    <style>
        body { font-family: 'Inter', sans-serif; }
        .glow-cyan { box-shadow: 0 0 20px rgba(0, 229, 250, 0.15); }
    </style>
</head>
<body class="bg-mp-navy text-white min-h-screen">
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState } = React;

        const TEAM_MEMBERS = [
            { 
                id: 1, 
                name: 'Mary Womack', 
                role: 'CEO', 
                avatar: 'MW',
                capacity: 40,
                allocated: 32,
                assignments: [
                    { opportunity: 'VA EHR Modernization', hours: 12, task: 'Executive Oversight' },
                    { opportunity: 'DHA Telehealth Platform', hours: 8, task: 'Go/No-Go Review' },
                    { opportunity: 'CMS Data Analytics', hours: 12, task: 'Strategy Approval' },
                ],
                status: 'optimal'
            },
            { 
                id: 2, 
                name: 'Daniel Torres', 
                role: 'Capture Manager', 
                avatar: 'DT',
                capacity: 45,
                allocated: 52,
                assignments: [
                    { opportunity: 'VA EHR Modernization', hours: 25, task: 'Capture Lead' },
                    { opportunity: 'DHA Telehealth Platform', hours: 15, task: 'Win Strategy' },
                    { opportunity: 'IHS Cloud Migration', hours: 12, task: 'Competitive Analysis' },
                ],
                status: 'overloaded'
            },
            { 
                id: 3, 
                name: 'Sarah Chen', 
                role: 'Contracts Lead', 
                avatar: 'SC',
                capacity: 40,
                allocated: 38,
                assignments: [
                    { opportunity: 'VA EHR Modernization', hours: 18, task: 'FAR/DFARS Review' },
                    { opportunity: 'DHA Telehealth Platform', hours: 12, task: 'Terms Analysis' },
                    { opportunity: 'CMS Data Analytics', hours: 8, task: 'Compliance Matrix' },
                ],
                status: 'optimal'
            },
            { 
                id: 4, 
                name: 'Mike Johnson', 
                role: 'Technical Writer', 
                avatar: 'MJ',
                capacity: 40,
                allocated: 45,
                assignments: [
                    { opportunity: 'VA EHR Modernization', hours: 30, task: 'Technical Volume' },
                    { opportunity: 'DHA Telehealth Platform', hours: 15, task: 'Past Performance' },
                ],
                status: 'overloaded'
            },
            { 
                id: 5, 
                name: 'Lisa Park', 
                role: 'Pricing Analyst', 
                avatar: 'LP',
                capacity: 40,
                allocated: 22,
                assignments: [
                    { opportunity: 'VA EHR Modernization', hours: 14, task: 'BOE Development' },
                    { opportunity: 'CMS Data Analytics', hours: 8, task: 'Rate Analysis' },
                ],
                status: 'available'
            },
            { 
                id: 6, 
                name: 'James Wilson', 
                role: 'Solution Architect', 
                avatar: 'JW',
                capacity: 40,
                allocated: 36,
                assignments: [
                    { opportunity: 'VA EHR Modernization', hours: 20, task: 'Technical Approach' },
                    { opportunity: 'IHS Cloud Migration', hours: 16, task: 'Architecture Design' },
                ],
                status: 'optimal'
            },
        ];

        const OPPORTUNITIES = [
            { id: 1, name: 'VA EHR Modernization', totalHours: 119, status: 'Active', due: 'Feb 5' },
            { id: 2, name: 'DHA Telehealth Platform', totalHours: 50, status: 'Active', due: 'Feb 1' },
            { id: 3, name: 'CMS Data Analytics', totalHours: 28, status: 'Active', due: 'Feb 12' },
            { id: 4, name: 'IHS Cloud Migration', totalHours: 28, status: 'Pursuit', due: 'Feb 18' },
        ];

        // Components
        const Header = () => (
            <header className="bg-mp-slate border-b border-mp-border px-6 py-4">
                <div className="max-w-7xl mx-auto flex items-center justify-between">
                    <a href="missionpulse-sprint62-dashboard.html" className="text-gray-400 hover:text-white transition-colors">
                        ‚Üê Back to Dashboard
                    </a>
                    <h1 className="text-xl font-bold text-white">üë• Team Workload</h1>
                    <button className="text-sm bg-mp-cyan text-mp-navy px-4 py-2 rounded-lg font-medium hover:bg-mp-cyan-dark transition-colors">
                        + Assign Resources
                    </button>
                </div>
            </header>
        );

        const CapacityOverview = ({ members }) => {
            const totalCapacity = members.reduce((sum, m) => sum + m.capacity, 0);
            const totalAllocated = members.reduce((sum, m) => sum + m.allocated, 0);
            const utilization = Math.round((totalAllocated / totalCapacity) * 100);
            const overloaded = members.filter(m => m.status === 'overloaded').length;
            const available = members.filter(m => m.status === 'available').length;

            return (
                <div className="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
                    <div className="bg-mp-card border border-mp-border rounded-xl p-4">
                        <div className="flex items-center justify-between mb-2">
                            <span className="text-gray-400 text-sm">Team Utilization</span>
                            <span className={`text-xs px-2 py-0.5 rounded-full ${
                                utilization > 100 ? 'bg-red-500/20 text-red-400' :
                                utilization > 85 ? 'bg-yellow-500/20 text-yellow-400' :
                                'bg-green-500/20 text-green-400'
                            }`}>
                                {utilization > 100 ? 'Over' : utilization > 85 ? 'High' : 'Good'}
                            </span>
                        </div>
                        <p className="text-3xl font-bold text-white">{utilization}%</p>
                        <div className="w-full bg-mp-slate rounded-full h-2 mt-2">
                            <div 
                                className={`h-2 rounded-full ${
                                    utilization > 100 ? 'bg-red-500' :
                                    utilization > 85 ? 'bg-yellow-500' : 'bg-green-500'
                                }`}
                                style={{ width: `${Math.min(utilization, 100)}%` }}
                            ></div>
                        </div>
                    </div>
                    <div className="bg-mp-card border border-mp-border rounded-xl p-4">
                        <span className="text-gray-400 text-sm">Total Hours/Week</span>
                        <p className="text-3xl font-bold text-white mt-2">{totalAllocated}</p>
                        <p className="text-xs text-gray-400">of {totalCapacity} available</p>
                    </div>
                    <div className="bg-mp-card border border-red-500/30 rounded-xl p-4">
                        <span className="text-gray-400 text-sm">Overloaded</span>
                        <p className="text-3xl font-bold text-red-400 mt-2">{overloaded}</p>
                        <p className="text-xs text-gray-400">team members</p>
                    </div>
                    <div className="bg-mp-card border border-green-500/30 rounded-xl p-4">
                        <span className="text-gray-400 text-sm">Available</span>
                        <p className="text-3xl font-bold text-green-400 mt-2">{available}</p>
                        <p className="text-xs text-gray-400">for more work</p>
                    </div>
                </div>
            );
        };

        const MemberCard = ({ member, expanded, onToggle }) => {
            const utilizationPct = Math.round((member.allocated / member.capacity) * 100);
            const statusColors = {
                overloaded: { bg: 'bg-red-500/10', border: 'border-red-500/30', text: 'text-red-400', bar: 'bg-red-500' },
                optimal: { bg: 'bg-green-500/10', border: 'border-green-500/30', text: 'text-green-400', bar: 'bg-green-500' },
                available: { bg: 'bg-blue-500/10', border: 'border-blue-500/30', text: 'text-blue-400', bar: 'bg-blue-500' }
            };
            const colors = statusColors[member.status];

            return (
                <div className={`bg-mp-card border ${colors.border} rounded-xl overflow-hidden`}>
                    <div 
                        className="p-4 cursor-pointer hover:bg-mp-slate/50 transition-colors"
                        onClick={() => onToggle(member.id)}
                    >
                        <div className="flex items-center justify-between">
                            <div className="flex items-center gap-3">
                                <div className="w-10 h-10 rounded-full bg-mp-cyan/20 flex items-center justify-center text-sm font-medium text-mp-cyan">
                                    {member.avatar}
                                </div>
                                <div>
                                    <p className="text-sm font-medium text-white">{member.name}</p>
                                    <p className="text-xs text-gray-400">{member.role}</p>
                                </div>
                            </div>
                            <div className="text-right">
                                <p className={`text-lg font-bold ${colors.text}`}>{member.allocated}h</p>
                                <p className="text-xs text-gray-400">of {member.capacity}h</p>
                            </div>
                        </div>
                        
                        <div className="mt-3">
                            <div className="flex items-center justify-between text-xs mb-1">
                                <span className="text-gray-400">Utilization</span>
                                <span className={colors.text}>{utilizationPct}%</span>
                            </div>
                            <div className="w-full bg-mp-slate rounded-full h-2">
                                <div 
                                    className={`h-2 rounded-full ${colors.bar}`}
                                    style={{ width: `${Math.min(utilizationPct, 100)}%` }}
                                ></div>
                            </div>
                        </div>
                    </div>

                    {expanded && (
                        <div className="border-t border-mp-border p-4 bg-mp-slate/30">
                            <p className="text-xs text-gray-400 mb-3">Assignments</p>
                            <div className="space-y-2">
                                {member.assignments.map((assignment, idx) => (
                                    <div key={idx} className="flex items-center justify-between bg-mp-navy rounded-lg p-2">
                                        <div>
                                            <p className="text-sm text-white">{assignment.opportunity}</p>
                                            <p className="text-xs text-gray-400">{assignment.task}</p>
                                        </div>
                                        <span className="text-sm font-medium text-mp-cyan">{assignment.hours}h</span>
                                    </div>
                                ))}
                            </div>
                            <div className="flex gap-2 mt-3">
                                <button className="flex-1 text-xs bg-mp-slate hover:bg-mp-cyan/20 text-mp-cyan px-3 py-2 rounded-lg transition-colors">
                                    Edit Assignments
                                </button>
                                <button className="text-xs bg-mp-slate hover:bg-mp-cyan/20 text-gray-400 px-3 py-2 rounded-lg transition-colors">
                                    View Calendar
                                </button>
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        const OpportunityWorkload = ({ opportunities, members }) => (
            <div className="bg-mp-card border border-mp-border rounded-xl p-6">
                <h3 className="text-lg font-semibold text-white mb-4">Workload by Opportunity</h3>
                <div className="space-y-4">
                    {opportunities.map(opp => {
                        const assignedMembers = members.filter(m => 
                            m.assignments.some(a => a.opportunity === opp.name)
                        );
                        
                        return (
                            <div key={opp.id} className="bg-mp-slate rounded-lg p-4">
                                <div className="flex items-center justify-between mb-3">
                                    <div>
                                        <p className="text-sm font-medium text-white">{opp.name}</p>
                                        <p className="text-xs text-gray-400">Due {opp.due} ‚Ä¢ {opp.status}</p>
                                    </div>
                                    <div className="text-right">
                                        <p className="text-lg font-bold text-mp-cyan">{opp.totalHours}h</p>
                                        <p className="text-xs text-gray-400">total allocated</p>
                                    </div>
                                </div>
                                <div className="flex items-center gap-2">
                                    <div className="flex -space-x-2">
                                        {assignedMembers.slice(0, 4).map(member => (
                                            <div 
                                                key={member.id}
                                                className="w-7 h-7 rounded-full bg-mp-cyan/20 flex items-center justify-center text-xs font-medium text-mp-cyan border-2 border-mp-slate"
                                                title={member.name}
                                            >
                                                {member.avatar}
                                            </div>
                                        ))}
                                        {assignedMembers.length > 4 && (
                                            <div className="w-7 h-7 rounded-full bg-mp-border flex items-center justify-center text-xs text-gray-400 border-2 border-mp-slate">
                                                +{assignedMembers.length - 4}
                                            </div>
                                        )}
                                    </div>
                                    <span className="text-xs text-gray-400 ml-2">
                                        {assignedMembers.length} team member{assignedMembers.length !== 1 ? 's' : ''}
                                    </span>
                                </div>
                            </div>
                        );
                    })}
                </div>
            </div>
        );

        const WeeklyHeatmap = ({ members }) => {
            const days = ['Mon', 'Tue', 'Wed', 'Thu', 'Fri'];
            
            return (
                <div className="bg-mp-card border border-mp-border rounded-xl p-6">
                    <h3 className="text-lg font-semibold text-white mb-4">Weekly Availability Heatmap</h3>
                    <div className="overflow-x-auto">
                        <table className="w-full">
                            <thead>
                                <tr>
                                    <th className="text-left text-xs text-gray-400 pb-3 pr-4">Team Member</th>
                                    {days.map(day => (
                                        <th key={day} className="text-center text-xs text-gray-400 pb-3 px-2 w-16">{day}</th>
                                    ))}
                                </tr>
                            </thead>
                            <tbody>
                                {members.map(member => (
                                    <tr key={member.id}>
                                        <td className="py-2 pr-4">
                                            <div className="flex items-center gap-2">
                                                <div className="w-6 h-6 rounded-full bg-mp-cyan/20 flex items-center justify-center text-xs text-mp-cyan">
                                                    {member.avatar}
                                                </div>
                                                <span className="text-sm text-white">{member.name.split(' ')[0]}</span>
                                            </div>
                                        </td>
                                        {days.map((day, idx) => {
                                            // Simulate varying daily loads
                                            const load = Math.min(100, (member.allocated / member.capacity) * 100 + (Math.random() * 30 - 15));
                                            const color = load > 100 ? 'bg-red-500' :
                                                         load > 80 ? 'bg-yellow-500' :
                                                         load > 50 ? 'bg-green-500' : 'bg-blue-500';
                                            const opacity = Math.max(0.2, load / 100);
                                            
                                            return (
                                                <td key={day} className="py-2 px-2">
                                                    <div 
                                                        className={`w-full h-8 rounded ${color}`}
                                                        style={{ opacity }}
                                                        title={`${Math.round(load)}% utilized`}
                                                    ></div>
                                                </td>
                                            );
                                        })}
                                    </tr>
                                ))}
                            </tbody>
                        </table>
                    </div>
                    <div className="flex items-center justify-center gap-4 mt-4 text-xs">
                        <div className="flex items-center gap-1">
                            <div className="w-3 h-3 rounded bg-blue-500 opacity-30"></div>
                            <span className="text-gray-400">Light</span>
                        </div>
                        <div className="flex items-center gap-1">
                            <div className="w-3 h-3 rounded bg-green-500 opacity-70"></div>
                            <span className="text-gray-400">Moderate</span>
                        </div>
                        <div className="flex items-center gap-1">
                            <div className="w-3 h-3 rounded bg-yellow-500"></div>
                            <span className="text-gray-400">Heavy</span>
                        </div>
                        <div className="flex items-center gap-1">
                            <div className="w-3 h-3 rounded bg-red-500"></div>
                            <span className="text-gray-400">Overloaded</span>
                        </div>
                    </div>
                </div>
            );
        };

        // Main App
        const App = () => {
            const [expandedMember, setExpandedMember] = useState(null);
            const [view, setView] = useState('team'); // 'team' or 'opportunity'

            return (
                <div className="min-h-screen bg-mp-navy">
                    <Header />
                    
                    <main className="max-w-7xl mx-auto px-6 py-6">
                        <CapacityOverview members={TEAM_MEMBERS} />

                        <div className="flex items-center gap-4 mb-6">
                            <button
                                onClick={() => setView('team')}
                                className={`px-4 py-2 rounded-lg text-sm transition-colors ${
                                    view === 'team' 
                                        ? 'bg-mp-cyan text-mp-navy font-medium' 
                                        : 'bg-mp-slate text-gray-400 hover:text-white'
                                }`}
                            >
                                üë§ By Team Member
                            </button>
                            <button
                                onClick={() => setView('opportunity')}
                                className={`px-4 py-2 rounded-lg text-sm transition-colors ${
                                    view === 'opportunity' 
                                        ? 'bg-mp-cyan text-mp-navy font-medium' 
                                        : 'bg-mp-slate text-gray-400 hover:text-white'
                                }`}
                            >
                                üìã By Opportunity
                            </button>
                        </div>

                        {view === 'team' ? (
                            <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
                                <div className="space-y-4">
                                    <h3 className="text-lg font-semibold text-white">Team Members</h3>
                                    {TEAM_MEMBERS.map(member => (
                                        <MemberCard
                                            key={member.id}
                                            member={member}
                                            expanded={expandedMember === member.id}
                                            onToggle={(id) => setExpandedMember(expandedMember === id ? null : id)}
                                        />
                                    ))}
                                </div>
                                <div>
                                    <WeeklyHeatmap members={TEAM_MEMBERS} />
                                </div>
                            </div>
                        ) : (
                            <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
                                <OpportunityWorkload opportunities={OPPORTUNITIES} members={TEAM_MEMBERS} />
                                <WeeklyHeatmap members={TEAM_MEMBERS} />
                            </div>
                        )}
                    </main>

                    <footer className="border-t border-mp-border py-4 mt-8">
                        <div className="max-w-7xl mx-auto px-6 flex items-center justify-between text-xs text-gray-500">
                            <p>AI GENERATED - REQUIRES HUMAN REVIEW</p>
                            <p>MissionPulse v12 ‚Ä¢ Sprint 70</p>
                        </div>
                    </footer>
                </div>
            );
        };

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>
