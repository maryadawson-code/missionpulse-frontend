<!DOCTYPE html>
<html lang="en">
<head>
    <!-- FILE: missionpulse-sprint124-ai-training.html -->
    <!-- ROLE: Admin -->
    <!-- SECURITY: env vars verified, no hardcoded keys -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Training Dashboard | MissionPulse</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'mp-navy': '#00050F',
                        'mp-cyan': '#00E5FA',
                        'mp-slate': '#0A1628',
                        'mp-dark': '#010510'
                    },
                    fontFamily: {
                        'inter': ['Inter', 'sans-serif']
                    }
                }
            }
        }
    </script>
    <style>
        * { font-family: 'Inter', sans-serif; }
        .gradient-border { background: linear-gradient(135deg, #00E5FA 0%, #0066FF 100%); padding: 1px; }
        .glass-card { background: rgba(10, 22, 40, 0.8); backdrop-filter: blur(10px); }
        .pulse-glow { animation: pulse-glow 2s ease-in-out infinite; }
        @keyframes pulse-glow { 0%, 100% { box-shadow: 0 0 5px #00E5FA; } 50% { box-shadow: 0 0 20px #00E5FA; } }
        .progress-bar { transition: width 0.5s ease-in-out; }
    </style>
</head>
<body class="bg-mp-navy min-h-screen text-white">
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useMemo } = React;

        // Demo Data - AI Agent Performance Metrics
        const aiAgents = [
            { id: 'capture', name: 'Capture Agent', accuracy: 94.2, responseTime: 1.2, feedbackScore: 4.7, trainingExamples: 2847, lastTrained: '2025-01-28', status: 'active', trend: '+2.1%' },
            { id: 'strategy', name: 'Strategy Agent', accuracy: 91.8, responseTime: 1.8, feedbackScore: 4.5, trainingExamples: 1956, lastTrained: '2025-01-27', status: 'active', trend: '+1.4%' },
            { id: 'blackhat', name: 'Black Hat Agent', accuracy: 89.3, responseTime: 2.1, feedbackScore: 4.3, trainingExamples: 1243, lastTrained: '2025-01-26', status: 'training', trend: '+3.2%' },
            { id: 'pricing', name: 'Pricing Agent', accuracy: 96.1, responseTime: 0.9, feedbackScore: 4.8, trainingExamples: 3421, lastTrained: '2025-01-28', status: 'active', trend: '+0.8%' },
            { id: 'compliance', name: 'Compliance Agent', accuracy: 97.4, responseTime: 1.1, feedbackScore: 4.9, trainingExamples: 4102, lastTrained: '2025-01-28', status: 'active', trend: '+0.5%' },
            { id: 'writer', name: 'Writer Agent', accuracy: 88.6, responseTime: 2.4, feedbackScore: 4.2, trainingExamples: 2156, lastTrained: '2025-01-25', status: 'needs-review', trend: '-0.3%' },
            { id: 'contracts', name: 'Contracts Agent', accuracy: 95.2, responseTime: 1.3, feedbackScore: 4.6, trainingExamples: 2891, lastTrained: '2025-01-27', status: 'active', trend: '+1.1%' },
            { id: 'orals', name: 'Orals Agent', accuracy: 87.9, responseTime: 2.8, feedbackScore: 4.1, trainingExamples: 876, lastTrained: '2025-01-24', status: 'training', trend: '+4.2%' }
        ];

        const feedbackQueue = [
            { id: 1, agent: 'Writer Agent', query: 'Generate executive summary for DHA EHRM proposal', rating: 3, feedback: 'Too generic, needs more specific discriminators', timestamp: '2025-01-29 09:15', status: 'pending' },
            { id: 2, agent: 'Black Hat Agent', query: 'Analyze Leidos competitive positioning', rating: 5, feedback: 'Excellent depth on past performance analysis', timestamp: '2025-01-29 08:42', status: 'approved' },
            { id: 3, agent: 'Pricing Agent', query: 'Calculate wrap rates for OASIS+ Task Order', rating: 4, feedback: 'Accurate but missing fringe benefit breakdown', timestamp: '2025-01-29 08:30', status: 'pending' },
            { id: 4, agent: 'Compliance Agent', query: 'Check FAR 52.219-14 compliance for SDVOSB set-aside', rating: 5, feedback: 'Perfect citation and recommendation', timestamp: '2025-01-28 16:45', status: 'approved' },
            { id: 5, agent: 'Capture Agent', query: 'Draft win themes for VA EHRDI opportunity', rating: 2, feedback: 'Missed key customer hot buttons from PWS', timestamp: '2025-01-28 15:20', status: 'flagged' }
        ];

        const trainingBatches = [
            { id: 'TB-2025-047', name: 'Q1 Win/Loss Corpus', examples: 156, status: 'completed', accuracy: 94.2, date: '2025-01-28' },
            { id: 'TB-2025-046', name: 'IDIQ Pricing Models', examples: 89, status: 'completed', accuracy: 96.8, date: '2025-01-27' },
            { id: 'TB-2025-045', name: 'Section L/M Templates', examples: 234, status: 'in-progress', accuracy: null, date: '2025-01-29' },
            { id: 'TB-2025-044', name: 'Competitor Intel Updates', examples: 67, status: 'queued', accuracy: null, date: '2025-01-30' },
            { id: 'TB-2025-043', name: 'FAR/DFARS Amendments', examples: 112, status: 'completed', accuracy: 97.1, date: '2025-01-26' }
        ];

        // Metric Card Component
        function MetricCard({ title, value, subtitle, trend, icon }) {
            const isPositive = trend && trend.startsWith('+');
            return (
                <div className="gradient-border rounded-lg">
                    <div className="glass-card rounded-lg p-4">
                        <div className="flex items-center justify-between mb-2">
                            <span className="text-gray-400 text-sm">{title}</span>
                            <span className="text-2xl">{icon}</span>
                        </div>
                        <div className="text-3xl font-bold text-mp-cyan mb-1">{value}</div>
                        <div className="flex items-center justify-between">
                            <span className="text-gray-500 text-xs">{subtitle}</span>
                            {trend && (
                                <span className={`text-xs font-medium ${isPositive ? 'text-green-400' : 'text-red-400'}`}>
                                    {trend}
                                </span>
                            )}
                        </div>
                    </div>
                </div>
            );
        }

        // Agent Performance Row
        function AgentRow({ agent, onTrain, onReview }) {
            const statusColors = {
                'active': 'bg-green-500/20 text-green-400 border-green-500/30',
                'training': 'bg-yellow-500/20 text-yellow-400 border-yellow-500/30',
                'needs-review': 'bg-red-500/20 text-red-400 border-red-500/30'
            };
            
            const statusLabels = {
                'active': 'Active',
                'training': 'Training',
                'needs-review': 'Needs Review'
            };

            return (
                <tr className="border-b border-gray-800 hover:bg-mp-slate/50 transition-colors">
                    <td className="py-4 px-4">
                        <div className="flex items-center gap-3">
                            <div className={`w-2 h-2 rounded-full ${agent.status === 'active' ? 'bg-green-400' : agent.status === 'training' ? 'bg-yellow-400 pulse-glow' : 'bg-red-400'}`}></div>
                            <span className="font-medium">{agent.name}</span>
                        </div>
                    </td>
                    <td className="py-4 px-4">
                        <div className="flex items-center gap-2">
                            <div className="w-24 bg-gray-700 rounded-full h-2">
                                <div 
                                    className="h-2 rounded-full progress-bar"
                                    style={{ 
                                        width: `${agent.accuracy}%`,
                                        backgroundColor: agent.accuracy >= 95 ? '#22c55e' : agent.accuracy >= 90 ? '#00E5FA' : agent.accuracy >= 85 ? '#eab308' : '#ef4444'
                                    }}
                                ></div>
                            </div>
                            <span className="text-sm font-mono">{agent.accuracy}%</span>
                        </div>
                    </td>
                    <td className="py-4 px-4 text-center">
                        <span className="font-mono text-sm">{agent.responseTime}s</span>
                    </td>
                    <td className="py-4 px-4 text-center">
                        <div className="flex items-center justify-center gap-1">
                            <span className="text-yellow-400">‚òÖ</span>
                            <span className="font-mono text-sm">{agent.feedbackScore}</span>
                        </div>
                    </td>
                    <td className="py-4 px-4 text-center">
                        <span className="font-mono text-sm">{agent.trainingExamples.toLocaleString()}</span>
                    </td>
                    <td className="py-4 px-4 text-center">
                        <span className={`text-xs ${agent.trend.startsWith('+') ? 'text-green-400' : 'text-red-400'}`}>
                            {agent.trend}
                        </span>
                    </td>
                    <td className="py-4 px-4">
                        <span className={`px-2 py-1 rounded-full text-xs border ${statusColors[agent.status]}`}>
                            {statusLabels[agent.status]}
                        </span>
                    </td>
                    <td className="py-4 px-4">
                        <div className="flex gap-2">
                            <button 
                                onClick={() => onTrain(agent)}
                                className="px-3 py-1 bg-mp-cyan/20 text-mp-cyan rounded text-xs hover:bg-mp-cyan/30 transition-colors"
                            >
                                Train
                            </button>
                            <button 
                                onClick={() => onReview(agent)}
                                className="px-3 py-1 bg-gray-700 text-gray-300 rounded text-xs hover:bg-gray-600 transition-colors"
                            >
                                Review
                            </button>
                        </div>
                    </td>
                </tr>
            );
        }

        // Feedback Item Component
        function FeedbackItem({ item, onApprove, onReject }) {
            const ratingColor = item.rating >= 4 ? 'text-green-400' : item.rating >= 3 ? 'text-yellow-400' : 'text-red-400';
            const statusColors = {
                'pending': 'bg-yellow-500/20 text-yellow-400',
                'approved': 'bg-green-500/20 text-green-400',
                'flagged': 'bg-red-500/20 text-red-400'
            };

            return (
                <div className="glass-card rounded-lg p-4 border border-gray-800">
                    <div className="flex items-start justify-between mb-2">
                        <div>
                            <span className="text-mp-cyan font-medium text-sm">{item.agent}</span>
                            <span className="text-gray-500 text-xs ml-2">{item.timestamp}</span>
                        </div>
                        <span className={`px-2 py-0.5 rounded text-xs ${statusColors[item.status]}`}>
                            {item.status}
                        </span>
                    </div>
                    <p className="text-gray-300 text-sm mb-2 font-mono bg-mp-navy/50 p-2 rounded">
                        "{item.query}"
                    </p>
                    <div className="flex items-center gap-2 mb-2">
                        <span className="text-gray-400 text-xs">Rating:</span>
                        <div className="flex">
                            {[1,2,3,4,5].map(star => (
                                <span key={star} className={`${star <= item.rating ? ratingColor : 'text-gray-600'}`}>‚òÖ</span>
                            ))}
                        </div>
                    </div>
                    <p className="text-gray-400 text-sm italic mb-3">"{item.feedback}"</p>
                    {item.status === 'pending' && (
                        <div className="flex gap-2">
                            <button 
                                onClick={() => onApprove(item)}
                                className="flex-1 py-1.5 bg-green-600/20 text-green-400 rounded text-xs hover:bg-green-600/30 transition-colors"
                            >
                                ‚úì Add to Training
                            </button>
                            <button 
                                onClick={() => onReject(item)}
                                className="flex-1 py-1.5 bg-red-600/20 text-red-400 rounded text-xs hover:bg-red-600/30 transition-colors"
                            >
                                ‚úó Reject
                            </button>
                        </div>
                    )}
                </div>
            );
        }

        // Training Batch Row
        function BatchRow({ batch }) {
            const statusColors = {
                'completed': 'bg-green-500/20 text-green-400',
                'in-progress': 'bg-blue-500/20 text-blue-400',
                'queued': 'bg-gray-500/20 text-gray-400'
            };

            return (
                <tr className="border-b border-gray-800">
                    <td className="py-3 px-4 font-mono text-sm text-mp-cyan">{batch.id}</td>
                    <td className="py-3 px-4">{batch.name}</td>
                    <td className="py-3 px-4 text-center">{batch.examples}</td>
                    <td className="py-3 px-4">
                        <span className={`px-2 py-1 rounded text-xs ${statusColors[batch.status]}`}>
                            {batch.status}
                        </span>
                    </td>
                    <td className="py-3 px-4 text-center font-mono">
                        {batch.accuracy ? `${batch.accuracy}%` : '‚Äî'}
                    </td>
                    <td className="py-3 px-4 text-gray-400 text-sm">{batch.date}</td>
                </tr>
            );
        }

        // Main App Component
        function App() {
            const [activeTab, setActiveTab] = useState('performance');
            const [agents, setAgents] = useState(aiAgents);
            const [feedback, setFeedback] = useState(feedbackQueue);

            const avgAccuracy = useMemo(() => {
                return (agents.reduce((sum, a) => sum + a.accuracy, 0) / agents.length).toFixed(1);
            }, [agents]);

            const avgResponseTime = useMemo(() => {
                return (agents.reduce((sum, a) => sum + a.responseTime, 0) / agents.length).toFixed(2);
            }, [agents]);

            const totalExamples = useMemo(() => {
                return agents.reduce((sum, a) => sum + a.trainingExamples, 0);
            }, [agents]);

            const pendingFeedback = feedback.filter(f => f.status === 'pending').length;

            const handleTrain = (agent) => {
                alert(`Initiating training cycle for ${agent.name}...`);
            };

            const handleReview = (agent) => {
                alert(`Opening review dashboard for ${agent.name}...`);
            };

            const handleApproveFeedback = (item) => {
                setFeedback(prev => prev.map(f => f.id === item.id ? {...f, status: 'approved'} : f));
            };

            const handleRejectFeedback = (item) => {
                setFeedback(prev => prev.filter(f => f.id !== item.id));
            };

            return (
                <div className="min-h-screen bg-mp-navy">
                    {/* Header */}
                    <header className="bg-mp-slate/50 border-b border-gray-800 px-6 py-4">
                        <div className="flex items-center justify-between">
                            <div className="flex items-center gap-4">
                                <div className="w-10 h-10 bg-gradient-to-br from-mp-cyan to-blue-600 rounded-lg flex items-center justify-center">
                                    <span className="text-xl">üß†</span>
                                </div>
                                <div>
                                    <h1 className="text-xl font-bold">AI Training Dashboard</h1>
                                    <p className="text-gray-400 text-sm">Model Performance & Feedback Management</p>
                                </div>
                            </div>
                            <div className="flex items-center gap-4">
                                <span className="text-gray-400 text-sm">Last sync: 2 min ago</span>
                                <button className="px-4 py-2 bg-mp-cyan text-mp-navy font-semibold rounded-lg hover:bg-mp-cyan/80 transition-colors">
                                    + New Training Batch
                                </button>
                            </div>
                        </div>
                    </header>

                    <main className="p-6">
                        {/* Metrics Row */}
                        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6">
                            <MetricCard 
                                title="Avg Model Accuracy" 
                                value={`${avgAccuracy}%`} 
                                subtitle="Across all agents" 
                                trend="+1.8%" 
                                icon="üéØ" 
                            />
                            <MetricCard 
                                title="Avg Response Time" 
                                value={`${avgResponseTime}s`} 
                                subtitle="P95 latency" 
                                trend="-0.3s" 
                                icon="‚ö°" 
                            />
                            <MetricCard 
                                title="Training Examples" 
                                value={totalExamples.toLocaleString()} 
                                subtitle="Total corpus size" 
                                trend="+847" 
                                icon="üìö" 
                            />
                            <MetricCard 
                                title="Pending Feedback" 
                                value={pendingFeedback} 
                                subtitle="Awaiting review" 
                                trend="" 
                                icon="üìù" 
                            />
                        </div>

                        {/* Tabs */}
                        <div className="flex gap-2 mb-6 border-b border-gray-800">
                            {['performance', 'feedback', 'batches'].map(tab => (
                                <button
                                    key={tab}
                                    onClick={() => setActiveTab(tab)}
                                    className={`px-4 py-2 text-sm font-medium transition-colors border-b-2 -mb-px ${
                                        activeTab === tab 
                                            ? 'text-mp-cyan border-mp-cyan' 
                                            : 'text-gray-400 border-transparent hover:text-gray-300'
                                    }`}
                                >
                                    {tab === 'performance' && 'üìä Agent Performance'}
                                    {tab === 'feedback' && `üí¨ Feedback Queue (${pendingFeedback})`}
                                    {tab === 'batches' && 'üì¶ Training Batches'}
                                </button>
                            ))}
                        </div>

                        {/* Tab Content */}
                        {activeTab === 'performance' && (
                            <div className="glass-card rounded-lg border border-gray-800 overflow-hidden">
                                <table className="w-full">
                                    <thead className="bg-mp-slate/50">
                                        <tr className="text-left text-gray-400 text-sm">
                                            <th className="py-3 px-4 font-medium">Agent</th>
                                            <th className="py-3 px-4 font-medium">Accuracy</th>
                                            <th className="py-3 px-4 font-medium text-center">Response Time</th>
                                            <th className="py-3 px-4 font-medium text-center">Feedback Score</th>
                                            <th className="py-3 px-4 font-medium text-center">Training Examples</th>
                                            <th className="py-3 px-4 font-medium text-center">Trend</th>
                                            <th className="py-3 px-4 font-medium">Status</th>
                                            <th className="py-3 px-4 font-medium">Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {agents.map(agent => (
                                            <AgentRow 
                                                key={agent.id} 
                                                agent={agent} 
                                                onTrain={handleTrain}
                                                onReview={handleReview}
                                            />
                                        ))}
                                    </tbody>
                                </table>
                            </div>
                        )}

                        {activeTab === 'feedback' && (
                            <div className="grid grid-cols-1 lg:grid-cols-2 gap-4">
                                {feedback.map(item => (
                                    <FeedbackItem 
                                        key={item.id} 
                                        item={item} 
                                        onApprove={handleApproveFeedback}
                                        onReject={handleRejectFeedback}
                                    />
                                ))}
                            </div>
                        )}

                        {activeTab === 'batches' && (
                            <div className="glass-card rounded-lg border border-gray-800 overflow-hidden">
                                <table className="w-full">
                                    <thead className="bg-mp-slate/50">
                                        <tr className="text-left text-gray-400 text-sm">
                                            <th className="py-3 px-4 font-medium">Batch ID</th>
                                            <th className="py-3 px-4 font-medium">Name</th>
                                            <th className="py-3 px-4 font-medium text-center">Examples</th>
                                            <th className="py-3 px-4 font-medium">Status</th>
                                            <th className="py-3 px-4 font-medium text-center">Accuracy</th>
                                            <th className="py-3 px-4 font-medium">Date</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {trainingBatches.map(batch => (
                                            <BatchRow key={batch.id} batch={batch} />
                                        ))}
                                    </tbody>
                                </table>
                            </div>
                        )}
                    </main>

                    {/* Footer */}
                    <footer className="border-t border-gray-800 px-6 py-4 mt-8">
                        <div className="flex items-center justify-between text-xs text-gray-500">
                            <span>MissionPulse v12 ‚Ä¢ Sprint 124</span>
                            <span className="text-yellow-500/70">‚ö†Ô∏è AI GENERATED - REQUIRES HUMAN REVIEW</span>
                            <span>¬© 2025 Mission Meets Tech</span>
                        </div>
                    </footer>
                </div>
            );
        }

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>
